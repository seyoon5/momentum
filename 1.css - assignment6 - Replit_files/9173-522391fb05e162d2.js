"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9173],{98099:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(14251),i=n(52875),o=n(9941),a=n(69779),l=n(67294),s=n(6801),c=n(36764),u=n(93058);function d(e,t){var n=t.onReceiveAnnotationUpdate,d=void 0===n?function(){}:n,f=(0,u.Z)().showError,p=(0,o.Z)(l.useState(null),2),h=p[0],m=p[1],v=(0,s.xT)({variables:{replId:e}}),g=function(){var e,t=null===(e=v.data)||void 0===e?void 0:e.currentUser;return t?{user:{__typename:"User",id:t.id,username:t.username,image:t.image}}:{}},b=function(t,n){var o=t.readQuery({query:s.yi,variables:{replId:e}}),l=[],c=o.repl.annotationAnchors,u=c.findIndex((function(e){return e.id===n.id}));l=-1===u?(0,a.Z)(c).concat([n]):(0,a.Z)(c.slice(0,u)).concat([n],(0,a.Z)(c.slice(u+1))),t.writeQuery({query:s.yi,variables:{replId:e},data:(0,i.Z)((0,r.Z)({},o),{repl:(0,i.Z)((0,r.Z)({},o.repl),{annotationAnchors:l})})})},Z=(0,o.Z)((0,s.AS)({onError:function(e){return f(e.message)},update:function(e,t){var n;if(t.errors)t.errors.forEach((function(e){return f(e.message)}));else{var r=null===(n=t.data)||void 0===n?void 0:n.createAnnotationAnchor;r&&("UserError"===r.__typename?f(r.message):"AnnotationAnchor"===r.__typename&&b(e,r))}}}),1),y=Z[0],x=(0,o.Z)((0,s.gE)({onError:function(e){return f(e.message)},update:function(e,t){var n;if(t.errors)t.errors.forEach((function(e){return f(e.message)}));else{var r=null===(n=t.data)||void 0===n?void 0:n.createAnnotationMessage;r&&("UserError"===r.__typename?f(r.message):"AnnotationAnchor"===r.__typename&&b(e,r))}}}),1),w=x[0],k=(0,o.Z)((0,s.Rp)({onError:function(e){return f(e.message)},update:function(e,t){var n;if(t.errors)t.errors.forEach((function(e){return f(e.message)}));else{var r=null===(n=t.data)||void 0===n?void 0:n.updateAnnotationAnchor;r&&("UserError"===r.__typename?f(r.message):"AnnotationAnchor"===r.__typename&&b(e,r))}}}),1),C=k[0],S=(0,o.Z)((0,c.n)(),1)[0],_=(0,o.Z)((0,s.Hj)(),1)[0];(0,s.Tt)({variables:{replId:e},onData:function(e){var t=e.data.data,n=e.client,r=null===t||void 0===t?void 0:t.updatedAnnotation;r&&(b(n,r),d(r))}});var T=(0,o.Z)(l.useState([]),2),R=T[0],B=T[1];l.useEffect((function(){var e,t,n=[];"Repl"===(null===(e=v.data)||void 0===e?void 0:e.repl.__typename)&&(t=n).push.apply(t,(0,a.Z)(v.data.repl.annotationAnchors));h&&n.push((0,i.Z)((0,r.Z)({},h),{isGeneral:Boolean(h.isGeneral),messages:[],isResolved:!1,__typename:"AnnotationAnchor"})),B(n)}),[v,h]);var E=l.useMemo((function(){return R.find((function(e){return e.isGeneral}))}),[R]),G=l.useMemo((function(){return R.reduce((function(e,t){return t.isResolved?e:t.messages.some((function(e){return!1===e.seen}))?e+1:e}),0)}),[R]),D=function(e){var t=e.annotationAnchor,n=e.annotationMessage,o=e.highlight;y({variables:{annotationAnchor:t,annotationMessage:n,highlight:o},optimisticResponse:{createAnnotationAnchor:(0,i.Z)((0,r.Z)({},g(),t),{isGeneral:Boolean(t.isGeneral),__typename:"AnnotationAnchor",messages:n?[(0,i.Z)((0,r.Z)({},g(),n),{content:{text:n.text,__typename:"TextMessageContentType"},anchor:{id:t.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",timeCreated:Date.now(),currentUserIsAuthor:!0,seen:!0})]:[],isResolved:!1})}})};return{annotations:R,loading:v.loading,generalThread:E,unreadThreadCount:G,placeholderAnchorId:null===h||void 0===h?void 0:h.id,createAnnotationAnchorPlaceholder:function(e){var t=e.annotationAnchor;m(t)},deleteAnnotationAnchorPlaceholder:function(){m(null)},createAnnotationAnchor:D,createAnnotationMessage:function(t){var n=t.anchor,o=t.annotationMessage,l=t.highlight;(null===h||void 0===h?void 0:h.id)===n.id?(m(null),D({annotationAnchor:(0,r.Z)({},h),annotationMessage:o,highlight:l})):w({variables:{replId:e,anchorId:n.id,annotationMessage:o,highlight:l},optimisticResponse:{createAnnotationMessage:(0,i.Z)((0,r.Z)({},n),{messages:(0,a.Z)(n.messages.filter((function(e){return!e.id.startsWith("chat-")}))).concat([(0,i.Z)((0,r.Z)({},g(),o),{content:{text:o.text,__typename:"TextMessageContentType"},anchor:{id:n.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",timeCreated:Date.now(),currentUserIsAuthor:!0,seen:!0})])})}})},updateAnnotationAnchor:function(e){var t=e.annotationAnchor,n=e.changes;C({variables:{id:t.id,changes:n},optimisticResponse:{updateAnnotationAnchor:(0,i.Z)((0,r.Z)({},t,n),{isResolved:"boolean"===typeof n.isResolved?n.isResolved:t.isResolved})}})},updateThreadPreview:function(e){var t=e.threadId,n=e.messageId,r=e.message;_({variables:{threadId:t,messageId:n,message:r}})},markAllMessagesInReplAsSeenByUser:function(){S({variables:{replId:e}})}}}},41709:function(e,t,n){n.d(t,{q:function(){return R},J:function(){return T}});var r=n(14251),i=n(44747),o=n(9941),a=n(35944),l=n(75815),s=n(90132),c=n(48270),u=n(78120),d=n(14456),f=n(99094),p=d.tk.baseTheme({".cm-diff-inserted":{backgroundColor:"#0053A644",borderLeft:"#0053A6 solid 3px"},".cm-diff-deleted":{backgroundColor:"#c93c3733",borderLeft:"#c93c37 solid 3px"}}),h=d.p.line({attributes:{class:"cm-diff-inserted"}}),m=d.p.line({attributes:{class:"cm-diff-deleted"}}),v=u.Py.define({map:function(e,t){return e.map(t)}}),g=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,l.Z)(this,n),t.apply(this,arguments)}var r=n.prototype;return r.toDOM=function(){var e=document.createElement("div");return e.className="cm-diff-alignment cm-line",e.innerHTML="&nbsp;",e},r.ignoreEvent=function(){return!1},n}(d.l9);function b(e){var t=new u.f_,n=new g;e.sort((function(e,t){return e.character-t.character}));var r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0)for(var s=a.value,c=s.character,f=s.padding,p=0;p<f;p++)t.add(c,c,d.p.widget({widget:n,side:-1,block:!0}))}catch(h){i=!0,o=h}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return t.finish()}function Z(e){var t=e.coloredLines,n=e.colorDecoration,r=d.lg.fromClass((function e(r){(0,l.Z)(this,e);var i=new u.f_,o=!0,a=!1,s=void 0;try{for(var c,d=t[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){var f=c.value,p=r.state.doc.line(f);i.add(p.from,p.from,n)}}catch(h){a=!0,s=h}finally{try{o||null==d.return||d.return()}finally{if(a)throw s}}this.decorations=i.finish()}),{decorations:function(e){return e.decorations}}),i=u.QQ.define({create:function(){return d.p.none},update:function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;if(l.is(v))return l.value}}catch(s){r=!0,i=s}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t.docChanged?e.map(t.changes):e},provide:function(e){return d.tk.decorations.from(e)}});return[p,r,i]}var y=function(){var e=function(e,t){return d.tk.domEventHandlers({scroll:function(n,r){if(r===e&&n.target){var i=n.target;if(i.scrollTop){var o=i.scrollTop;t.scrollDOM.scrollTo({top:o})}}}})},t=new u.F6,n=new u.F6;return{extensions:function(){return{right:t.of([]),left:n.of([])}},setup:function(r,i){r.dispatch({effects:n.reconfigure(e(r,i))}),i.dispatch({effects:t.reconfigure(e(i,r))})}}},x=n(67294),w=n(30922),k=n(78244),C=y(),S=C.extensions,_=C.setup;function T(e){var t=e.left,n=e.right,a=t.code,l=(0,i.Z)(t,["code"]),s=n.code,c=(0,i.Z)(n,["code"]),d=(0,w.Z)((0,r.Z)({readOnly:!0,lineWrapping:!1,initialDoc:a,extensions:[S().left]},l)),p=d.view,g=d.ref,y=(0,w.Z)((0,r.Z)({readOnly:!0,lineWrapping:!1,initialDoc:s,extensions:[S().right]},c)),k=y.view,C=y.ref,T=(0,o.Z)(x.useState(!1),2),R=T[0],B=T[1],E=(0,o.Z)(x.useState(!1),2),G=E[0],D=E[1];return x.useEffect((function(){if(p&&k&&R&&G){var e=setTimeout((function(){_(p,k),function(e,t){var n=(0,f.Bz)(e.state.doc.sliceString(0),t.state.doc.sliceString(0));e.dispatch({effects:[u.Py.appendConfig.of(Z({coloredLines:n.leftColored.sort((function(e,t){return e-t})),colorDecoration:m})),v.of(b(n.leftPadded))]}),t.dispatch({effects:[u.Py.appendConfig.of(Z({coloredLines:n.rightColored.sort((function(e,t){return e-t})),colorDecoration:h})),v.of(b(n.rightPadded))]})}(p,k)}));return function(){return clearTimeout(e)}}}),[p,k,R,G]),x.useEffect((function(){p&&(p.dispatch({changes:{from:0,to:p.state.doc.length,insert:a}}),B(!0))}),[a,p]),x.useEffect((function(){k&&(k.dispatch({changes:{from:0,to:k.state.doc.length,insert:s}}),D(!0))}),[s,k]),{left:{view:p,ref:g,code:a,options:l,ready:R},right:{view:k,ref:C,code:s,options:c,ready:G}}}function R(e){var t,n=e.diffViewer,o=(0,i.Z)(e,["diffViewer"]);return(0,a.BX)(a.HY,{children:[(0,a.tZ)("div",{css:{height:n.ready?0:"auto"},ref:n.ref}),!n.ready&&(0,a.tZ)(k.PH,(0,r.Z)({code:null!==(t=n.code)&&void 0!==t?t:""},n.options,o))]})}},99094:function(e,t,n){n.d(t,{Bz:function(){return m},PO:function(){return v}});var r=n(75815),i=n(9941),o=n(70655),a=n(52027),l=n.n(a),s=l().DIFF_DELETE,c=l().DIFF_INSERT,u=l().DIFF_EQUAL;function d(e,t){var n=new(l()),r=n.diff_linesToChars_(e,t),i=r.chars1,o=r.chars2,a=r.lineArray,s=n.diff_main(i,o,!1);return n.diff_charsToLines_(s,a),s}function f(e){return e.split("\n").length-1}function p(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0===t)return 0;var r=e.indexOf("\n",n);return-1===r?null:1===t?r+1:p(e,t-1,r+1)}function h(e,t,n){if(e>0){var r=p(n,t);if(null!==r)return{lineNumber:t,character:r,padding:e}}return null}function m(e,t){for(var n,r,o=d(e+((n="\n"===e[e.length-1])?"":"\n"),t+((r="\n"===t[t.length-1])?"":"\n")),a=0,l=0,p=[],m=[],v=[],g=[],b=0,Z=0,y=0;y<o.length;y++){var x=(0,i.Z)(o[y],2),w=x[0],k=f(x[1]);switch(w){case s:var C,S=(0,i.Z)(null!==(C=o[y+1])&&void 0!==C?C:[],2),_=S[0],T=S[1];a+=k;for(var R=0;R<k;R++)p.push(a-R);var B=k;_===c&&(B-=f(T));var E=h(B,l,t);E&&g.push(E);break;case c:var G,D=(0,i.Z)(null!==(G=o[y-1])&&void 0!==G?G:[],2),I=D[0],j=D[1];l+=k;for(var N=0;N<k;N++)m.push(l-N);var L=k;I===s&&(L-=f(j));var z=h(L,a,e);z&&v.push(z);break;case u:l>Z&&(Z=l),a>b&&(b=a),a+=k,l+=k}}var P=v.filter((function(e){return e.lineNumber<Z})),A=g.filter((function(e){return e.lineNumber<b}));return{leftPadded:P,rightPadded:A,leftColored:p,rightColored:m,changedTrailingNewline:n!==r,leftTrailingNewline:n,rightTrailingNewline:r}}var v=function(){function e(t,n){(0,r.Z)(this,e),this.deleted=new Set,this.inserted=new Map,this.linePositions=new Map,this.lineLengths=new Map,this.currentTrailingNewline="\n"===t[t.length-1],this.otherTrailingNewline="\n"===n[n.length-1],this.changedTrailingNewline=this.currentTrailingNewline!==this.otherTrailingNewline;var o=d(t,n),a=[],l=!0,f=!1,p=void 0;try{for(var h,m=o[Symbol.iterator]();!(l=(h=m.next()).done);l=!0){var v=(0,i.Z)(h.value,2),g=v[0],b=v[1].split("\n");""===b[b.length-1]&&b.pop();var Z=!0,y=!1,x=void 0;try{for(var w,k=b[Symbol.iterator]();!(Z=(w=k.next()).done);Z=!0){var C=w.value;a.push([g,C])}}catch(P){y=!0,x=P}finally{try{Z||null==k.return||k.return()}finally{if(y)throw x}}}}catch(P){f=!0,p=P}finally{try{l||null==m.return||m.return()}finally{if(f)throw p}}this.currentTrailingNewline&&!this.otherTrailingNewline?a.push([s,""]):!this.currentTrailingNewline&&this.otherTrailingNewline?a.push([c,""]):this.currentTrailingNewline&&this.otherTrailingNewline&&a.push([u,""]);var S=1,_=0,T=1,R=!0,B=!1,E=void 0;try{for(var G,D=a[Symbol.iterator]();!(R=(G=D.next()).done);R=!0){var I=(0,i.Z)(G.value,2),j=I[0],N=I[1];switch(j){case s:this.linePositions.set(S,_),this.lineLengths.set(S,N.length),this.deleted.add(S),_+=N.length+1,S++;break;case c:var L=S-1,z=this.inserted.get(L);z||(z=[],this.inserted.set(L,z)),z.push({number:T,content:N}),T++;break;case u:this.linePositions.set(S,_),this.lineLengths.set(S,N.length),_+=N.length+1,S++,T++}}}catch(P){B=!0,E=P}finally{try{R||null==D.return||D.return()}finally{if(B)throw E}}}var t=e.prototype;return t.startInsertions=function(){var e=this.inserted.get(0);return e&&0!==e.length?e:null},t.lineIsDeleted=function(e){return this.deleted.has(e)},t.lineInsertions=function(e){var t=this.inserted.get(e);return t&&0!==t.length?t:null},t.lineInsertedContent=function(e){var t=this.lineInsertions(e);return t?t.map((function(e){return e.content})).join("\n"):null},t.offsetFor=function(e){var t,n,r=0;r+=null!==(n=null===(t=this.inserted.get(0))||void 0===t?void 0:t.length)&&void 0!==n?n:0;for(var i=1;i<e;i++){this.lineIsDeleted(i)&&r--;var o=this.lineInsertions(i);o&&(r+=o.length)}return r},t.linePosition=function(e){var t;return null!==(t=this.linePositions.get(e))&&void 0!==t?t:null},t.lineLength=function(e){var t;return null!==(t=this.lineLengths.get(e))&&void 0!==t?t:null},t.line=function(e){var t=this.linePosition(e),n=this.lineLength(e);return null===t||null===n?null:{number:e,from:t,to:t+n,length:n,offset:this.offsetFor(e),isDeleted:this.lineIsDeleted(e),insertions:this.lineInsertions(e)}},t.lines=function(){var e,t,n,r,a,l,s,c,u;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:e=!0,t=!1,n=void 0,o.label=1;case 1:o.trys.push([1,6,7,8]),r=this.linePositions[Symbol.iterator](),o.label=2;case 2:if(e=(a=r.next()).done)return[3,5];if(l=(0,i.Z)(a.value,1),s=l[0],!(c=this.line(s)))throw new Error("line should not be null");return[4,c];case 3:o.sent(),o.label=4;case 4:return e=!0,[3,2];case 5:return[3,8];case 6:return u=o.sent(),t=!0,n=u,[3,8];case 7:try{e||null==r.return||r.return()}finally{if(t)throw n}return[7];case 8:return[2]}}))},e}()},31352:function(e,t,n){n.d(t,{Z:function(){return S}});var r=n(35944),i=n(53328),o=n(78343),a=n(60081),l=n(69119),s=n(67294),c=n(55376),u=n(60379),d=n(77365),f=n(14251),p=n(32692),h=n(31230),m=n(37887);function v(){var e=(0,p.Z)(["\n  fragment ReplAnalyticsPageViewDataPoint on ReplAnalyticsPageViewsData {\n    __typename\n    timestamp\n    success\n    failure\n  }\n"]);return v=function(){return e},e}function g(){var e=(0,p.Z)(["\n  fragment ReplAnalyticsPageViews on ReplAnalyticsPageViews {\n    __typename\n    uniques\n    results {\n      ...ReplAnalyticsPageViewDataPoint\n    }\n  }\n  ","\n"]);return g=function(){return e},e}function b(){var e=(0,p.Z)(["\n  query ReplAnalyticsPageViews(\n    $id: String!\n    $input: ReplAnalyticsPageViewsInput!\n  ) {\n    repl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsPageViews(input: $input) {\n          ... on ReplAnalyticsPageViews {\n            ...ReplAnalyticsPageViews\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return b=function(){return e},e}var Z={},y=(0,h.Ps)(v()),x=(0,h.Ps)(g(),y),w=(0,h.Ps)(b(),x);var k=n(85861);i.kL.register(i.uw,i.f$,i.od,i.jn,i.u);var C=function(e){var t=e.data,n=e.start,i=e.hours,s=(0,k.Fg)().values,u=new Array(i).fill(0).map((function(e,t){return(0,o.Z)(n,t).toISOString()})),d=t.results.reduce((function(e,t){return e.set(t.timestamp,t),e}),new Map),f={labels:u,datasets:[{label:"Connected",data:u.map((function(e){var t;return{y:(null!==(t=d.get(e))&&void 0!==t?t:{success:0}).success,x:e}})),borderColor:s.global.accentPrimaryDefault,backgroundColor:s.global.accentPrimaryDefault,pointRadius:1,tension:.1},{label:"Failed",data:u.map((function(e){var t;return{y:(null!==(t=d.get(e))&&void 0!==t?t:{failure:0}).failure,x:e}})),borderColor:s.global.accentNegativeDefault,backgroundColor:s.global.accentNegativeDefault,pointRadius:1,tension:.1}]};return(0,r.tZ)(c.x1,{options:{responsive:!0,plugins:{tooltip:{callbacks:{title:function(e){var t=new Date(e[0].label);return(0,a.Z)(t,"MMM d, HH:mm (z)")}}}},scales:{y:{grid:{borderColor:s.global.backgroundHigher,color:s.global.backgroundHigher},ticks:{color:s.global.foregroundDimmer},min:0},x:{grid:{borderColor:s.global.backgroundHighest,color:s.global.backgroundHighest},ticks:{color:s.global.foregroundDimmer,callback:function(e,t){var n=new Date(u[t]);if(n.toISOString()===(0,l.Z)(n).toISOString())return(0,a.Z)(n,"MMM d")}}}}},data:f})},S=function(e){var t,n,i=e.replId,o=e.start,a=e.hours,l=e.deployment,c=(0,s.useState)(void 0),p=c[0],h=c[1],v=function(e){var t=(0,f.Z)({},Z,e);return m.a(w,t)}({variables:{id:i,input:{start:o,hours:a,deployment:l}},ssr:!1,onCompleted:function(e){if("Repl"===e.repl.__typename)switch(e.repl.analyticsPageViews.__typename){case"UserError":case"NotFoundError":h(new Error(e.repl.analyticsPageViews.message))}}}),g=v.data,b=v.loading,y=v.error,x="Repl"===(null===g||void 0===g||null===(t=g.repl)||void 0===t?void 0:t.__typename)&&"ReplAnalyticsPageViews"===(null===(n=g.repl.analyticsPageViews)||void 0===n?void 0:n.__typename)?g.repl.analyticsPageViews:void 0,k=x?x.uniques:void 0;return y&&h(y),(0,r.BX)(u.G7,{css:[u.l0.colWithGap(8)],children:[(0,r.BX)(u.G7,{css:[u.l0.flex.row,u.l0.align.center,u.l0.justify.spaceBetween],children:[(0,r.tZ)(u.xv,{variant:"subheadDefault",children:"Requests"}),k?(0,r.BX)(u.xv,{children:[(0,r.tZ)("strong",{children:k})," unique visitors"]}):null]}),(0,r.BX)(u.G7,{children:[b?(0,r.tZ)(d.Z,{}):null,p?(0,r.tZ)(u.E_,{text:p.message,colorway:"negative"}):null,x?(0,r.tZ)(C,{data:x,start:o,hours:a}):null]})]})}},77919:function(e,t,n){n.d(t,{Z:function(){return S}});var r=n(35944),i=n(67294),o=n(60379),a=n(77365),l=n(43935),s=n(55376),c=n(14251),u=n(32692),d=n(31230),f=n(37887);function p(){var e=(0,u.Z)(["\n  fragment ReplAnalyticsTopListResult on ReplAnalyticsTopList {\n    __typename\n    results {\n      __typename\n      value\n      count\n    }\n  }\n"]);return p=function(){return e},e}function h(){var e=(0,u.Z)(["\n  query ReplAnalyticsTopList($id: String!, $input: ReplAnalyticsTopInput!) {\n    repl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsTopList(input: $input) {\n          ... on ReplAnalyticsTopList {\n            ...ReplAnalyticsTopListResult\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return h=function(){return e},e}var m={},v=(0,d.Ps)(p()),g=(0,d.Ps)(h(),v);var b=n(85861),Z=n(5152),y=n.n(Z),x=function(e){var t=e.data,n=e.variant;if(0===t.results.length)return(0,r.tZ)(o.xv,{children:"No results"});switch(n){case"map":return(0,r.tZ)(C,{data:t});case"pie":return(0,r.tZ)(k,{data:t});case"table":return(0,r.tZ)(w,{data:t})}},w=function(e){var t=e.data;return(0,r.tZ)(o.G7,{children:t.results.map((function(e){return(0,r.BX)(o.G7,{css:[o.l0.rowWithGap(16),o.l0.py(8),{borderBottom:"1px solid ".concat(o.TV.outlineDimmest)},{"&:last-of-type":{borderBottom:"none"}}],children:[(0,r.tZ)(o.G7,{css:[o.l0.flex.grow(1),o.l0.maxWidth("90%")],children:(0,r.tZ)(o.xv,{title:e.value,children:e.value})}),(0,r.tZ)(o.G7,{children:(0,r.tZ)(o.xv,{children:e.count})})]})}))})},k=function(e){var t=e.data,n=(0,b.Fg)().values,i=[n.global.blueDefault,n.global.blurpleDefault,n.global.greenDefault,n.global.limeDefault,n.global.magentaDefault,n.global.orangeDefault,n.global.pinkDefault,n.global.purpleDefault,n.global.redDefault,n.global.tealDefault,n.global.yellowDefault];return(0,r.tZ)(s.by,{options:{radius:"80%"},data:{labels:t.results.map((function(e){return e.value})),datasets:[{hoverOffset:20,borderWidth:2,data:t.results.map((function(e){return e.count})),backgroundColor:Array(t.results.length).fill(0).map((function(e,t){return i[t%i.length]}))}]}})},C=function(e){var t=e.data,i=y()((function(){return Promise.all([n.e(2558),n.e(5309),n.e(5586),n.e(4964)]).then(n.bind(n,94964))}),{loadableGenerated:{webpack:function(){return[94964]}},ssr:!1}),a=t.results.map((function(e){return{country:e.value,numHits:e.count}}));return(0,r.tZ)(o.G7,{css:[o.l0.maxWidth(450)],children:(0,r.tZ)(i,{countries:a})})},S=function(e){var t,n,s=e.replId,u=e.start,d=e.hours,p=e.metric,h=e.deployment,v=e.count,b=e.variant,Z=void 0===b?"table":b,y=(0,l.CZ)(p),w=(0,i.useState)(void 0),k=w[0],C=w[1],S=function(e){var t=(0,c.Z)({},m,e);return f.a(g,t)}({variables:{id:s,input:{metric:p,start:u,hours:d,deployment:h,count:v}},ssr:!1,onCompleted:function(e){if("Repl"===e.repl.__typename)switch(e.repl.analyticsTopList.__typename){case"UserError":case"NotFoundError":C(new Error(e.repl.analyticsTopList.message))}}}),_=S.data,T=S.loading,R=S.error;return R&&C(R),(0,r.BX)(o.G7,{css:o.l0.colWithGap(8),children:[(0,r.BX)(o.xv,{variant:"subheadDefault",children:["Top ",y]}),(0,r.BX)(o.G7,{children:[T?(0,r.tZ)(a.Z,{}):null,k?(0,r.tZ)(o.E_,{text:k.message,colorway:"negative"}):null,"Repl"===(null===_||void 0===_||null===(t=_.repl)||void 0===t?void 0:t.__typename)&&"ReplAnalyticsTopList"===(null===(n=_.repl.analyticsTopList)||void 0===n?void 0:n.__typename)?(0,r.tZ)(x,{variant:Z,data:_.repl.analyticsTopList}):null]})]})}},77352:function(e,t,n){n.d(t,{gC:function(){return p},LK:function(){return d},jJ:function(){return f}});var r=n(35944),i=n(35642),o=n(60379),a=n(11163),l=["100-days-of-python","100-days-of-python-promo","add-guest-new-user","apps-announcement","appsOnboardingForkRepl","appsOnboardingRunRepl","appsOnboardingSelectRepl","april_2019_hiring","archive-cta","assignment_markdown","boosts-modal","classroom-repl-talk-ask-on-error","cleanup-popover-dismissed","codemirror-explorers-banner","create-model-solution","createWebsite","curriculum-launch-modal","custom-themes-banner","cycles-release","cycles-survey","dashboard_new_folder","dashboard_search","dashboard_templates","debugger_start","dec172020maintenance","devtools-intro","discount_hacker_18","discount_holiday_19","discount_newyear_19","downtime-073118","draw-new-user-cta","edfest-announcement","enveditorintro","file_tree","follow-cursor-avatar-click","ghostwriter-banner","ghostwriter-repl-resources-cta","ghostwriter-trial-repl-resources-cta","ghostwriter-trial-3-day-left-modal","ghostwriter-trial-banner","ghostwriter-trial-expired-modal","ghostwriter-post-purchase-tour","grid_click","hacker_upgrade","hacker-gift","home","home-feed","home-onboarding-checklist","home-onboarding-checklist-apps","home-onboarding-checklist-learn","home-onboarding-checklist-repl","hosting_url","introduceYourself","js-4-day-challenge-day-1","js-4-day-challenge-day-2","js-4-day-challenge-day-3","js-4-day-challenge-day-4","js-4-day-challenge-day-end","july_2019_music_jam","july18_irl","landing","languagesInterestedIn","launch-modal","learn-onboarding","legacy-cycles-grant-notice","make_website","march_2019_game_jam","migrated_unnamed_repls","mobile-app-banner","mobile-announcement","mobile-new-workspace-banner","mobile-survey-banner-11042021","move_unnamed_repls","repricing-announcement","multiplayer","multiplayer_invite","multiplayer_welcome","new_in_repls","new_share","nft-world-2022","onboarding_connection_toast","onboarding_run","onboarding-simplify-experiment","packager-shell-hint","packman","product_hunt","profile-refresh-beta","profile2","projects-overview-cta","projects-overview-tests-disclaimer","publish-guidelines","repl_stars","repl-con-2022","repl-talk-update-2021","repl-talk-update-2022","revisions_history","run_on_replit","saw_unnamed_folders","search","self-grouping-projects-cta","series-b-announcement","share_classroom","share_repl_to_talk","show_packager_about_tooltip","show_packager_import_tooltip","show_test_update_tooltip","stack-create-cta","stack-migration-cta","summer_hacker","summer-2021-pd-survey","teams_pro_module","teams-grading-survey","teams-pro-2022","template-jam-announcement","threads-2-announcement","upgrade_module","workspace-desktop-tour","workspace-desktop-tour19","workspace-experience-task-completion-survey-06022022","workspace-experience-task-completion-survey-nudge-06022022","workspace-history-announcement","youtube-in-the-ws","themes-announcement"];var s=n(88075),c=n(2146),u=n(60977);var d=function(e,t){return"".concat(e,"-tutorialChallenge-").concat(t)},f=function(e,t){var n,r,o=JSON.parse(i.Z.get(d(e,t),"string")||"{}");if("string"===typeof(r=o).tourName&&"string"===typeof r.url&&(n=o.tourName,l.includes(n)))return o},p=function(e){var t=e.challenge,n=l.find((function(e){return e.toString()===t.tourName}))||"js-4-day-challenge-day-1",i=(0,c.o)(n),d=i.isDone,f=i.isLoading,p=i.setAsDone,h=(0,a.useRouter)();return f?null:(0,r.tZ)(o.zx,{colorway:d?"primary":"positive",onClick:function(){p(),(0,u.j)(u.U3.TUTORIAL_DONE_BUTTON_COMPLETED),h.push("/~")},disabled:d,iconLeft:(0,r.tZ)(s.Z,{}),big:!0,text:d?"Challenge completed!":"Complete Challenge"})}},8121:function(e,t,n){n.d(t,{HM:function(){return x},JT:function(){return g},Y8:function(){return m},fS:function(){return Z}});var r=n(14251),i=n(32692),o=n(31230),a=n(37887),l=n(50319);function s(){var e=(0,i.Z)(["\n  fragment MultiplayerUser on User {\n    id\n    image\n    username\n  }\n"]);return s=function(){return e},e}function c(){var e=(0,i.Z)(["\n  fragment MultiplayerReplPermission on ReplPermission {\n    id\n    type\n    user {\n      id\n      ...MultiplayerUser\n    }\n  }\n  ","\n"]);return c=function(){return e},e}function u(){var e=(0,i.Z)(["\n  query MultiplayerManageTeamMultiplayers($replId: String!) {\n    currentUser {\n      id\n    }\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isOwner\n        permissions {\n          id\n          ...MultiplayerReplPermission\n        }\n        currentUserPermissions {\n          editMultiplayers\n          inviteGuests\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n        owner {\n          ... on User {\n            id\n          }\n          ... on Team {\n            id\n            members {\n              id\n              permissions\n              user {\n                id\n                ...MultiplayerUser\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,i.Z)(["\n  mutation MultiplayerManageTeamMultiplayersAddMultiplayerUser(\n    $replId: String!\n    $username: String!\n    $type: String!\n  ) {\n    addMultiplayerUser(replId: $replId, username: $username, type: $type) {\n      id\n      type\n      user {\n        id\n        ...MultiplayerUser\n      }\n      repl {\n        id\n        permissions {\n          id\n          ...MultiplayerReplPermission\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return d=function(){return e},e}function f(){var e=(0,i.Z)(["\n  mutation MultiplayerManageTeamMultiplayersRemoveMultiplayerUser(\n    $replId: String!\n    $username: String!\n  ) {\n    removeMultiplayerUser(replId: $replId, username: $username) {\n      id\n      user {\n        id\n        ...MultiplayerUser\n      }\n      repl {\n        id\n        permissions {\n          id\n          ...MultiplayerReplPermission\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return f=function(){return e},e}var p={},h=(0,o.Ps)(s()),m=(0,o.Ps)(c(),h),v=(0,o.Ps)(u(),m,h);function g(e){var t=(0,r.Z)({},p,e);return a.a(v,t)}var b=(0,o.Ps)(d(),h,m);function Z(e){var t=(0,r.Z)({},p,e);return l.D(b,t)}var y=(0,o.Ps)(f(),h,m);function x(e){var t=(0,r.Z)({},p,e);return l.D(y,t)}},62881:function(e,t,n){n.d(t,{Ej:function(){return E},Gk:function(){return _},L1:function(){return y},QN:function(){return C},Sv:function(){return R},X6:function(){return w}});var r=n(14251),i=n(32692),o=n(31230),a=n(8121),l=n(37887),s=n(50319);function c(){var e=(0,i.Z)(["\n  fragment MultiplayerControlUser on User {\n    id\n    image\n    username\n    url\n  }\n"]);return c=function(){return e},e}function u(){var e=(0,i.Z)(["\n  fragment MultiplayerControlReplPermission on ReplPermission {\n    id\n    type\n    user {\n      id\n      ...MultiplayerControlUser\n    }\n  }\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,i.Z)(["\n  fragment MultiplayerControlEmailInviteReplPermission on ReplPermission {\n    id\n    type\n    user {\n      id\n      image\n      username\n      url\n    }\n  }\n"]);return d=function(){return e},e}function f(){var e=(0,i.Z)(["\n  query MultiplayerControl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isOwner\n        permissions {\n          id\n          ...MultiplayerReplPermission\n        }\n        currentUserPermissions {\n          editMultiplayers\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n      }\n    }\n    currentUser {\n      id\n      isSubscribed\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function p(){var e=(0,i.Z)(["\n  mutation MultiplayerControlAddMultiplayerUser(\n    $replId: String!\n    $username: String!\n    $type: String!\n  ) {\n    addMultiplayerUser(replId: $replId, username: $username, type: $type) {\n      id\n      type\n      user {\n        id\n        ...MultiplayerControlUser\n      }\n      repl {\n        id\n        permissions {\n          id\n          ...MultiplayerControlReplPermission\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return p=function(){return e},e}function h(){var e=(0,i.Z)(["\n  mutation MultiplayerControlRemoveMultiplayerUser(\n    $replId: String!\n    $username: String!\n  ) {\n    removeMultiplayerUser(replId: $replId, username: $username) {\n      id\n      user {\n        id\n        ...MultiplayerControlUser\n      }\n      repl {\n        id\n        permissions {\n          id\n          ...MultiplayerControlReplPermission\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return h=function(){return e},e}function m(){var e=(0,i.Z)(["\n  mutation MultiplayerControlCreateMultiplayerInvite(\n    $replId: String!\n    $email: String!\n    $type: String!\n  ) {\n    createMultiplayerInvite2(replId: $replId, email: $email, type: $type) {\n      ... on MultiplayerInvite {\n        email\n        repl {\n          id\n          permissions {\n            id\n            ...MultiplayerReplPermission\n          }\n          multiplayerInvites {\n            email\n            type\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on ReplPermission {\n        id\n        ...MultiplayerControlEmailInviteReplPermission\n      }\n    }\n  }\n  ","\n  ","\n"]);return m=function(){return e},e}function v(){var e=(0,i.Z)(["\n  mutation MultiplayerControlDeleteMultiplayerInvite(\n    $replId: String!\n    $email: String!\n  ) {\n    deleteMultiplayerInvite(replId: $replId, email: $email) {\n      ... on MultiplayerInvite {\n        email\n        type\n        repl {\n          id\n          permissions {\n            id\n            ...MultiplayerReplPermission\n          }\n          multiplayerInvites {\n            email\n            type\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return v=function(){return e},e}var g={},b=(0,o.Ps)(c()),Z=(0,o.Ps)(u(),b),y=(0,o.Ps)(d()),x=(0,o.Ps)(f(),a.Y8);function w(e){var t=(0,r.Z)({},g,e);return l.a(x,t)}var k=(0,o.Ps)(p(),b,Z);function C(e){var t=(0,r.Z)({},g,e);return s.D(k,t)}var S=(0,o.Ps)(h(),b,Z);function _(e){var t=(0,r.Z)({},g,e);return s.D(S,t)}var T=(0,o.Ps)(m(),a.Y8,y);function R(e){var t=(0,r.Z)({},g,e);return s.D(T,t)}var B=(0,o.Ps)(v(),a.Y8);function E(e){var t=(0,r.Z)({},g,e);return s.D(B,t)}},17467:function(e,t,n){n.d(t,{Z:function(){return y}});var r=n(9941),i=n(69779),o=n(35944),a=n(28898),l=n(93058),s=n(15902),c=n(34847),u=n(60977),d=n(72533),f=n(67629),p=n(4158),h=n(11163),m=n(67294),v=n(90317),g=n(62881),b=n(69049),Z=n(60379);function y(e){var t=e.replId,n=(0,h.useRouter)(),y=(0,s.Vg)(n),x=(0,g.X6)({variables:{replId:t},pollInterval:8e3}),w=x.data,k=x.loading,C=(0,l.Z)(),S=C.showConfirm,_=C.showError,T=(0,r.Z)(m.useState(!1),2),R=T[0],B=T[1],E=(0,r.Z)((0,g.QN)({onCompleted:function(e){var n,r=null===(n=e.addMultiplayerUser.user)||void 0===n?void 0:n.username;r&&((0,u.j)(u.U3.MULTIPLAYER_INVITED,{replId:t,inviteMethod:"username"}),S("Added @".concat(r)))}}),2),G=E[0],D=E[1],I=(0,r.Z)((0,g.Gk)({onError:function(e){return _(e.message)},onCompleted:function(e){var t,n=null===(t=e.removeMultiplayerUser.user)||void 0===t?void 0:t.username;n&&S("".concat(n," removed"))}}),2),j=I[0],N=I[1],L=(0,r.Z)((0,g.Sv)({update:function(e,n){var r,o=null===(r=n.data)||void 0===r?void 0:r.createMultiplayerInvite2;if(o)if("UserError"!==o.__typename){if("MultiplayerInvite"===o.__typename){var a=o.email;return(0,u.j)(u.U3.MULTIPLAYER_INVITED,{replId:t,inviteMethod:"email"}),void S("Invited ".concat(a," via email"))}if("ReplPermission"===o.__typename){var l;e.modify({id:e.identify({__typename:"Repl",id:t}),fields:{permissions:function(t){var n=e.writeFragment({data:o,fragment:g.L1});return(0,i.Z)(t).concat([n])}}});var s=null===(l=o.user)||void 0===l?void 0:l.username;if(!s)return;(0,u.j)(u.U3.MULTIPLAYER_INVITED,{replId:t,inviteMethod:"email"}),S("Invited @".concat(s))}}else _(o.message)}}),2),z=L[0],P=L[1],A=(0,r.Z)((0,g.Ej)({onError:function(e){return _(e.message)},onCompleted:function(e){if("UserError"!==e.deleteMultiplayerInvite.__typename){if("MultiplayerInvite"===e.deleteMultiplayerInvite.__typename){var t=e.deleteMultiplayerInvite.email;S("invite for ".concat(t," deleted"))}}else _(e.deleteMultiplayerInvite.message)}}),2),X=A[0],U=A[1];m.useEffect((function(){var e=D.error||P.error;e&&(e.message.includes("reached the limit")?y?_("You have reached the invite limit for a free account, visit https://replit.com/pricing to upgrade."):B(!0):_(e.message))}),[D.error,P.error,_,y]);var F="Repl"===(null===w||void 0===w?void 0:w.repl.__typename)?w.repl:null,M=null===w||void 0===w?void 0:w.currentUser,W=null===F||void 0===F?void 0:F.permissions.reduce((function(e,t){return t.user?(0,i.Z)(e).concat([t.user.username]):e}),[]),O=null===F||void 0===F?void 0:F.currentUserPermissions.editMultiplayers,H=Boolean(F&&!F.permissions.length&&!F.multiplayerInvites.length),V=(null===F||void 0===F?void 0:F.permissions)?F.permissions.length:null;return(0,o.BX)(Z.Tg,{background:"default",css:{color:Z.TV.foregroundDefault},children:[(0,o.BX)(Z.G7,{css:[Z.l0.flex.column,Z.l0.colWithGap(8),Z.l0.align.stretch],children:[O&&W&&F?(0,o.tZ)(Z.G7,{children:(0,o.tZ)(b.Z,{existingUsernames:W,onSubmit:function(e){!!!e.match(/.+@.+/)||P.loading?D.loading||G({variables:{username:e,replId:F.id,type:"rw"}}):z({variables:{email:e,replId:F.id,type:"rw"}})}})}):null,(0,o.BX)(Z.G7,{css:[Z.l0.flex.row,Z.l0.rowWithGap(4),Z.l0.align.center],children:[(0,o.BX)(Z.xv,{variant:"subheadDefault",children:[null!==V&&(null===M||void 0===M?void 0:M.isSubscribed)?"".concat((0,c.Z)("multiplayer",V,!0)):null,null===V||(null===M||void 0===M?void 0:M.isSubscribed)?null:"".concat(V,"/").concat(100," ").concat((0,c.Z)("multiplayer",V))," "]}),k||(null===M||void 0===M?void 0:M.isSubscribed)||y?null:(0,o.tZ)(Z.hU,{alt:"Click to upgrade for unlimited invites",onClick:function(){return B(!0)},children:(0,o.tZ)(p.Z,{})}),k?(0,o.tZ)(Z.xv,{children:"Loading..."}):null]}),H?(0,o.BX)(Z.G7,{css:[Z.l0.flex.row,Z.l0.rowWithGap(8),Z.l0.center,Z.l0.borderRadius(8),{maxHeight:200,border:"solid 1px ".concat(Z.TV.outlineDimmest)}],children:[(0,o.tZ)(Z.xv,{children:"No one else is here"}),(0,o.tZ)("img",{src:"/public/images/rainy-computer.png",alt:"raindrops falling onto an open laptop",style:{height:200}})]}):(0,o.BX)(Z.G7,{css:[Z.l0.backgroundColor.backgroundDefault,Z.l0.borderRadius(8),Z.l0.p(8),Z.l0.flex.column,Z.l0.colWithGap(8),{border:"solid 1px ".concat(Z.TV.outlineDimmest),maxHeight:200,overflowY:"auto"}],children:[null===F||void 0===F?void 0:F.permissions.map((function(e){var n=e.user,r=e.type;return n?(0,o.BX)(Z.G7,{css:[Z.l0.flex.row,Z.l0.rowWithGap(8),Z.l0.align.center],children:[(0,o.tZ)(a.Z,{size:"s",url:n.image}),(0,o.BX)(Z.xv,{children:[n.username," "]}),(0,o.tZ)(Z.xv,{color:"dimmest",children:r===v.aQ.Rw?" (can edit)":null}),(0,o.tZ)(Z.G7,{css:[Z.l0.flex.grow(1)]}),F.currentUserPermissions.editMultiplayers?(0,o.tZ)(Z.hU,{alt:"Remove member",onClick:function(){N.loading||j({variables:{replId:t,username:n.username}})},children:(0,o.tZ)(f.Z,{size:12})}):null]},n.id):null})),null===F||void 0===F?void 0:F.multiplayerInvites.map((function(e){return(0,o.BX)(Z.G7,{css:[Z.l0.flex.row,Z.l0.rowWithGap(8),Z.l0.align.center],children:[(0,o.tZ)(a.Z,{size:"s"}),(0,o.BX)(Z.xv,{children:[e.email," "]}),(0,o.tZ)(Z.xv,{color:"dimmest",children:" (pending)"}),(0,o.tZ)(Z.G7,{css:[Z.l0.flex.grow(1)]}),O?(0,o.tZ)(Z.hU,{alt:"Remove member",onClick:function(){U.loading||X({variables:{replId:t,email:e.email}})},children:(0,o.tZ)(f.Z,{})}):null]},e.email)}))]})]}),(0,o.tZ)(d.Z,{isOpen:R,initialTab:"hacker",context:"workspace_multiplayer_header",onRequestClose:function(){B(!1)}})]})}},14452:function(e,t,n){n.d(t,{sk:function(){return f},zq:function(){return u}});var r=n(14251),i=n(32692),o=n(31230),a=n(37887);function l(){var e=(0,i.Z)(["\n  fragment MultiplayerUsernameSearchUser on User {\n    id\n    firstName\n    lastName\n    username\n    image\n  }\n"]);return l=function(){return e},e}function s(){var e=(0,i.Z)(["\n  query MultiplayerUsernameSearch($query: String!, $limit: Int) {\n    usernameSearch(query: $query, limit: $limit) {\n      id\n      ...MultiplayerUsernameSearchUser\n    }\n  }\n  ","\n"]);return s=function(){return e},e}var c={},u=(0,o.Ps)(l()),d=(0,o.Ps)(s(),u);function f(e){var t=(0,r.Z)({},c,e);return a.a(d,t)}},69049:function(e,t,n){n.d(t,{Z:function(){return x}});var r=n(14251),i=n(52875),o=n(9941),a=n(35944),l=n(87603),s=n.n(l),c=n(67294),u=n(94184),d=n.n(u),f=n(96594),p=n(27206),h=n(60379),m=n(24351),v=n(14452),g=n(93058),b=n(19526),Z=n(88075),y=n(28898);function x(e){var t=e.onSubmit,n=e.existingUsernames,l=e.isDisabled,u=e.onChange,x=e.placeholder,w=(0,o.Z)(c.useState(""),2),k=w[0],C=w[1],S=!!k.match(/.+@.+/),_=(0,m.Z)(k.trim().replace(/^@/,""),250),T=(0,v.sk)({skip:!_||S,variables:{query:_,limit:6}}),R=T.data,B=T.loading,E=T.error,G=(0,g.Z)().showError;c.useEffect((function(){E&&G(E.message)}),[E,G]);var D=null===R||void 0===R?void 0:R.usernameSearch;return(0,a.BX)("form",{onSubmit:function(e){e.preventDefault(),t(k),C("")},className:"jsx-d408485a86637a91",children:[(0,a.BX)("div",{className:"jsx-d408485a86637a91 form-content",children:[(0,a.tZ)(f.ZP,{onChange:function(e){e&&C(e.username)},itemToString:function(e){return(null===e||void 0===e?void 0:e.username)||""},initialHighlightedIndex:0,defaultHighlightedIndex:0,children:function(e){var o=e.getInputProps,l=e.getItemProps,s=e.getMenuProps,c=e.isOpen,f=e.highlightedIndex;return(0,a.BX)("div",{className:"jsx-d408485a86637a91 dropdown",children:[(0,a.tZ)(p.ZP,(0,r.Z)({},o({ref:null,value:k,onChange:function(e){C(e.currentTarget.value),null===u||void 0===u||u(e.currentTarget.value)},placeholder:null!==x&&void 0!==x?x:"Search by username or invite by email",autoComplete:"off",onKeyDown:function(e){"Enter"===e.key&&k.match(/.+@.+/)&&(t(k),C(""),e.currentTarget.blur())}}))),(0,a.BX)("div",(0,i.Z)((0,r.Z)({},s()),{className:"jsx-d408485a86637a91",children:[c&&D&&D.length?(0,a.tZ)("div",{className:"jsx-d408485a86637a91 dropdown-menu",children:D.map((function(e,t){return(0,a.tZ)("div",(0,i.Z)((0,r.Z)({},l({item:e,index:t})),{className:"jsx-d408485a86637a91 "+(d()("result",{"is-active":f===t})||""),children:(0,a.BX)(b.Ug,{align:"center",spacing:1,children:[(0,a.tZ)(y.Z,{size:"s",url:e.image}),(0,a.tZ)("div",{className:"jsx-d408485a86637a91",children:e.username}),n.includes(e.username)?(0,a.tZ)("div",{className:"jsx-d408485a86637a91 check-icon",children:(0,a.tZ)(Z.Z,{})}):null]})}),e.username)}))}):null,c&&B?(0,a.tZ)("div",{className:"jsx-d408485a86637a91 dropdown-menu is-loading",children:"loading..."}):null,c&&D&&0===D.length?(0,a.BX)("div",{className:"jsx-d408485a86637a91 dropdown-menu is-empty",children:['no results found for "',k,'"']}):null]}))]})}}),(0,a.tZ)("div",{className:"jsx-d408485a86637a91",children:(0,a.tZ)(h.zx,{colorway:"primary",type:"submit",disabled:l||!k,text:"Invite"})})]}),(0,a.tZ)(s(),{id:"d408485a86637a91",children:".form-content.jsx-d408485a86637a91{display:grid;position:relative;width:100%;grid-template-columns:1fr auto;grid-column-gap:var(--space-8);-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.dropdown.jsx-d408485a86637a91{position:relative;z-index:5}.dropdown-menu.jsx-d408485a86637a91{position:absolute;z-index:1;top:100%;left:0;width:100%;background-color:var(--background-default);border:1px solid var(--foreground-dimmest);border-top:0 none;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);max-height:300px;overflow:auto}.dropdown-menu.is-loading.jsx-d408485a86637a91,.dropdown-menu.is-empty.jsx-d408485a86637a91{color:var(--foreground-dimmer);padding:var(--space-8)}.dropdown.jsx-d408485a86637a91:focus-within .dropdown-menu.jsx-d408485a86637a91{border-color:var(--accent-primary-default)}.spacer.jsx-d408485a86637a91{width:var(--space-8);pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.result.jsx-d408485a86637a91{cursor:pointer;padding:var(--space-8)var(--space-16)}.result.jsx-d408485a86637a91:hover,.is-active.jsx-d408485a86637a91{background-color:var(--accent-primary-dimmer)}.check-icon.jsx-d408485a86637a91{margin-left:auto;color:var(--accent-positive-default)}"})]})}},47875:function(e,t,n){n.d(t,{H:function(){return o},Q:function(){return a}});var r=n(91131),i=n(21131),o=(0,r.cn)({flagGhostrunner:!1});function a(e){var t=(0,i.Z)((function(){return(0,r.cn)((function(t){return Boolean(t(o)[e])}))}),[e]);return(0,r.Dv)(t)}},65915:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(91131),i=n(95068);function o(){return(0,r.Dv)(i.Md)}},86518:function(e,t,n){n.d(t,{g:function(){return o}});var r=n(35944),i=n(70917);function o(){return(0,r.tZ)(i.xB,{styles:[{body:{overflow:"hidden"}}]})}},61668:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(35944),i=n(87603),o=n.n(i),a=(n(67294),n(44781));function l(e){var t=e.label;return(0,r.BX)(a.Z,{size:"xsmall",children:[(0,r.tZ)("span",{"data-microtip-position":"top",role:"tooltip","aria-label":t,className:"jsx-b2b24242521d2288 help",children:"?"}),(0,r.tZ)(o(),{id:"b2b24242521d2288",children:".help.jsx-b2b24242521d2288{display:-webkit-inline-box;display:-webkit-inline-flex;display:-moz-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;border:1px solid var(--background-higher);-webkit-border-radius:100%;-moz-border-radius:100%;border-radius:100%;width:var(--space-16);height:var(--space-16);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer}"})]})}},45435:function(e,t,n){n.d(t,{Sj:function(){return s},Th:function(){return a},UB:function(){return c},a0:function(){return u},ot:function(){return l}});var r=n(14251),i=n(52875),o=n(91131);var a=(0,o.cn)([]),l=(0,o.cn)({regexp:null,direction:"",highlightOnly:!0}),s=(0,o.cn)((function(e){return function(e,t){if(!t.regexp&&!t.direction)return e.map((function(e){return(0,i.Z)((0,r.Z)({},e),{highlighted:!1})}));var n=function(e){var n=e.dir,r=e.cmd;return(!t.direction||n===t.direction)&&!(t.regexp&&t.regexp.test&&!t.regexp.test(JSON.stringify(r)))};return t.highlightOnly?e.map((function(e){return n(e)?(0,i.Z)((0,r.Z)({},e),{highlighted:!0}):e})):e.filter(n)}(e(a),e(l))})),c=(0,o.cn)(null,(function(e,t){t(a,[])})),u=(0,o.cn)(!1)},13897:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(9941),i=n(69779),o=n(99408),a=n(91131),l=n(11163),s=n(67294),c=n(45435);function u(){var e=(0,l.useRouter)(),t=(0,o.Z)().container,n=(0,r.Z)((0,a.KO)(c.a0),2),u=n[0],d=n[1],f=(0,a.b9)(c.Th);(0,s.useEffect)((function(){e.query.debug&&d(!0)}),[d,e.query.debug]),(0,s.useEffect)((function(){if(u)return t.client().onDebugLog((function(e){"log"===e.type&&f((function(t){return(0,i.Z)(t).concat([{index:t[t.length-1]?t[t.length-1].index+1:0,dir:e.log.direction,cmd:e.log.cmd,timestamp:window.performance.now()}])}))}))}),[u,f,t])}},42325:function(e,t,n){n.d(t,{AA:function(){return C},CH:function(){return b},Gg:function(){return v},Ne:function(){return _},pV:function(){return w},vk:function(){return y}});var r=n(14251),i=n(32692),o=n(31230),a=n(64576),l=n(37887),s=n(50319);function c(){var e=(0,i.Z)(["\n  fragment AutograderTest on ReplTemplateTest {\n    id\n    name\n    input\n    output\n    name\n    type\n  }\n"]);return c=function(){return e},e}function u(){var e=(0,i.Z)(["\n  query Autograder($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        currentUserPermissions {\n          writeTests\n        }\n        template {\n          id\n        }\n        ioTests {\n          id\n          ...AutograderTest\n        }\n        unitTests {\n          meta {\n            id\n            ...UnitTestsReplUnitTestMeta\n          }\n          tests {\n            id\n            ...UnitTestsReplUnitTest\n            lastRun(replId: $replId) {\n              ... on ReplUnitTestLastRun {\n                status\n              }\n              ... on UserError {\n                message\n              }\n            }\n          }\n        }\n        isProject\n        isProjectFork\n        owner {\n          ... on Team {\n            id\n            isAdmin\n          }\n          ... on User {\n            id\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,i.Z)(["\n  mutation SaveIOTestResults(\n    $teamId: Int!\n    $replId: String!\n    $results: [IOTestResultInput!]!\n  ) {\n    saveIOTestResults(teamId: $teamId, replId: $replId, results: $results) {\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n"]);return d=function(){return e},e}function f(){var e=(0,i.Z)(["\n  mutation CreateAutograderTest($input: CreateTemplateTestInput!) {\n    createTemplateTest(input: $input) {\n      ... on ReplTemplateTest {\n        id\n        ...AutograderTest\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function p(){var e=(0,i.Z)(["\n  mutation UpdateAutograderTest($input: UpdateTemplateTestInput!) {\n    updateTemplateTest(input: $input) {\n      ... on ReplTemplateTest {\n        id\n        ...AutograderTest\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return p=function(){return e},e}function h(){var e=(0,i.Z)(["\n  mutation DeleteAutograderTest($testId: Int!) {\n    deleteTemplateTest(testId: $testId) {\n      ... on ReplTemplate {\n        id\n        tests {\n          id\n          ...AutograderTest\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return h=function(){return e},e}var m={},v=(0,o.Ps)(c()),g=(0,o.Ps)(u(),v,a.aA,a.Rb);function b(e){var t=(0,r.Z)({},m,e);return l.a(g,t)}var Z=(0,o.Ps)(d());function y(e){var t=(0,r.Z)({},m,e);return s.D(Z,t)}var x=(0,o.Ps)(f(),v);function w(e){var t=(0,r.Z)({},m,e);return s.D(x,t)}var k=(0,o.Ps)(p(),v);function C(e){var t=(0,r.Z)({},m,e);return s.D(k,t)}var S=(0,o.Ps)(h(),v);function _(e){var t=(0,r.Z)({},m,e);return s.D(S,t)}},93803:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return createEvalJet}});var _swc_helpers_src_async_to_generator_mjs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(34727),_swc_helpers_src_ts_generator_mjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(70655);function createEvalJet(param){var send=param.send,services=param.services;return{eval:function(){var _ref=(0,_swc_helpers_src_async_to_generator_mjs__WEBPACK_IMPORTED_MODULE_0__.Z)((function(data){var res;return(0,_swc_helpers_src_ts_generator_mjs__WEBPACK_IMPORTED_MODULE_1__.__generator)(this,(function(_state){return res=eval("(function(services) {".concat(data.payload.code,"})"))(services),send({id:data.id,payload:{res:res}}),[2]}))}));return function(e){return _ref.apply(this,arguments)}}()}}},87138:function(e,t,n){n.d(t,{bD:function(){return u},lg:function(){return f}});var r=n(14251),i=n(32692),o=n(31230),a=n(37887);function l(){var e=(0,i.Z)(["\n  query WorkspaceHistory2Users($ids: [Int!]!) {\n    currentUser {\n      id\n      username\n      image\n    }\n    usersByIds(ids: $ids) {\n      id\n      username\n      image\n    }\n  }\n"]);return l=function(){return e},e}function s(){var e=(0,i.Z)(["\n  query WorkspaceHistory2CurrentUserDate {\n    currentUser {\n      id\n      timeCreated\n    }\n  }\n"]);return s=function(){return e},e}var c={},u=(0,o.Ps)(l());var d=(0,o.Ps)(s());function f(e){var t=(0,r.Z)({},c,e);return a.a(d,t)}},72466:function(e,t,n){n.d(t,{Z:function(){return me}});var r=n(9941),i=n(35944),o=n(67294),a=n(19526),l=n(46702),s=n(24291),c=n(6951),u=n(92350),d=n(60379),f=n(99408),p=n(33773),h=n(64080),m=n(87603),v=n.n(m),g=n(30019);var b=function(e){var t=e.title,n=e.sub,r=void 0!==n&&n,o=e.actions,l=void 0===o?[]:o;return(0,i.BX)(a.Ug,{justify:"space-between",align:"center",children:[(0,i.tZ)(v(),{id:"fd8117a15303f4ca",children:".header-action.jsx-fd8117a15303f4ca{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;width:var(--space-24);height:var(--space-24);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);color:var(--foreground-dimmer)}.header-action.jsx-fd8117a15303f4ca:hover{background:var(--background-higher);cursor:pointer}"}),(0,i.tZ)(g.Z,{level:r?5:4,children:t}),(0,i.tZ)(a.Ug,{spacing:"4px",align:"center",children:l?l.map((function(e,t){return(0,i.tZ)("div",{onClick:e.action,className:"jsx-fd8117a15303f4ca header-action",children:e.icon},t)})):null})]})},Z=n(69779),y=n(94184),x=n.n(y);var w=function(e){var t=e.fileDrag,n=e.children,a=(0,r.Z)(o.useState(!1),2),l=a[0],s=a[1],c=o.useRef(0);return(0,i.BX)("div",{onDragEnter:function(e){if(t){e.preventDefault(),e.stopPropagation();var n=!0;if(e.dataTransfer.items&&e.dataTransfer.items.length>0){if(t.accept)for(var r=e.dataTransfer.items,i=0;i<r.length;i++){var o=r[i];t.accept.includes(o.type)||(n=!1)}n&&(s(!0),c.current++)}}},onDragLeave:function(e){t&&(e.preventDefault(),e.stopPropagation(),c.current--,0===c.current&&s(!1))},onDrop:function(e){t&&(e.preventDefault(),e.stopPropagation(),c.current=0,s(!1),(0,Z.Z)(e.dataTransfer.files).filter((function(e){return t.accept.includes(e.type)})).forEach(t.onDrop))},className:"jsx-68ea6c6d36b196a3 section",children:[(0,i.tZ)(v(),{id:"68ea6c6d36b196a3",children:".section.jsx-68ea6c6d36b196a3{position:relative;width:100%}.dragfilter.jsx-68ea6c6d36b196a3{position:absolute;width:100%;height:100%;top:0;left:0;background:var(--accent-primary-default);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);opacity:.2}.dragfilter.hidden.jsx-68ea6c6d36b196a3{display:none!important}"}),n,(0,i.tZ)("div",{className:"jsx-68ea6c6d36b196a3 "+(x()("dragfilter",{hidden:!l})||"")})]})};var k=function(){var e=(0,f.Z)().session,t=(0,r.Z)(o.useState(!1),2),n=t[0],l=t[1];return(0,i.BX)(w,{children:[(0,i.tZ)(b,{title:"Kaboom",actions:[{icon:(0,i.tZ)(p.Z,{rotate:n?0:-90}),action:function(){return l(!n)}}]}),n?(0,i.BX)(a.gC,{spacing:1,children:[(0,i.tZ)("div",{}),(0,i.tZ)(c.Z,{Icon:h.Z,size:"small",onClick:function(){return e.openFile("template.html")},children:"Edit HTML Template"})]}):null]})},C=n(92002),S=n(42941),_=n(27206),T=n(67573),R=n(14251),B=n(52875);var E,G=n(37432),D=n(17556),I=n(58794),j=n(48551),N=n(93058),L=n(40381),z=n(65456),P=n(1879),A=n(7835);function X(e){return function(t){for(var n in e)t.key===n&&e[n](t)}}function U(e,t){E||(E=document.createElement("input")).setAttribute("type","file"),E.setAttribute("accept",t.join(","));var n=function(){E.files&&((0,Z.Z)(E.files).forEach(e),E.removeEventListener("change",n))};E.addEventListener("change",n),E.click()}var F=n(53202);var M=function(e){var t=e.isActive,n=e.name,l=e.icon,s=e.options,c=e.onClick,u=e.onRename,d=(0,r.Z)(o.useState(!1),2),f=d[0],p=d[1],h=(0,r.Z)(o.useState(null),2),m=h[0],g=h[1],b=(0,D.Z)((function(){p(!1)}),[]),Z=(0,D.Z)((function(){g(null)}),[]);return o.useEffect((function(){Z.current&&null!==m&&Z.current.focus()}),[Z,m]),(0,i.BX)("div",{onClick:c,className:"jsx-103c0085cc983ea1 "+(x()("entry",{active:t&&null===m})||""),children:[(0,i.BX)(a.Ug,{spacing:1,align:"center",children:[l,null===m?(0,i.tZ)("p",{className:"jsx-103c0085cc983ea1",children:n}):(0,i.tZ)(_.ZP,{ref:Z,value:m,onChange:function(e){g(e.currentTarget.value)},onKeyDown:X({Escape:function(){g(null)},Enter:function(){u&&m&&u(m),g(null)}})})]}),s&&s.length>0?(0,i.tZ)("div",{onClick:function(e){e.stopPropagation(),p(!f)},className:"jsx-103c0085cc983ea1 "+(x()("options-icon",{active:t})||""),children:(0,i.tZ)(F.MoreVertical,{})}):null,s&&s.length>0&&f?(0,i.tZ)("div",{ref:b,onKeyDown:X({Escape:function(){p(!1)}}),className:"jsx-103c0085cc983ea1 options-box",children:s.map((function(e){return e?(0,i.tZ)("div",{onClick:function(t){t.stopPropagation(),p(!1),e.action(),"Rename"===e.name&&g(n)},className:"jsx-103c0085cc983ea1 "+(x()("option",{danger:e.danger})||""),children:e.name},e.name):null}))}):null,(0,i.tZ)(v(),{id:"103c0085cc983ea1",children:".entry.jsx-103c0085cc983ea1{width:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:var(--space-8);color:var(--foreground-dimmer);position:relative}.entry.active.jsx-103c0085cc983ea1{background:var(--accent-primary-default)!important;color:var(--white)!important;font-weight:var(--font-weight-medium)!important}.entry.jsx-103c0085cc983ea1:hover{color:var(--foreground-default);background:var(--background-higher);cursor:pointer}.options-icon.jsx-103c0085cc983ea1{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;width:var(--space-16);height:var(--space-16);opacity:0;color:var(--foreground-dimmest)}.options-icon.jsx-103c0085cc983ea1:hover{color:var(--foreground-dimmest)}.options-icon.active.jsx-103c0085cc983ea1{opacity:1!important;color:var(--white)!important}.entry.jsx-103c0085cc983ea1:hover .options-icon.jsx-103c0085cc983ea1{opacity:1}.options-box.jsx-103c0085cc983ea1{position:absolute;top:var(--space-32);right:var(--space-16);padding:var(--space-4);background:var(--background-default);border:1px solid var(--outline-dimmest);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);font-size:var(--font-size-subhead-default);font-weight:var(--font-weight-regular)!important;z-index:500}.option.jsx-103c0085cc983ea1{padding:var(--space-8);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);color:var(--foreground-default)}.option.danger.jsx-103c0085cc983ea1{color:var(--accent-negative-default)}.option.jsx-103c0085cc983ea1:hover{background:var(--background-higher)}.option.danger.jsx-103c0085cc983ea1:hover{background:var(--accent-negative-default);color:var(--white)}"})]})},W=n(57704);function O(e){var t=e.close,n=e.entries,a=(0,f.Z)(),l=a.fs,s=a.session,c=(0,D.Z)(t,[]),u=(0,N.Z)().showError,d=(0,r.Z)(function(e){var t=(0,r.Z)(o.useState(e),2),n=t[0],i=t[1];return[n,i,function(e){var t=null;switch(e.currentTarget.type){case"checkbox":t=e.currentTarget.checked;break;case"number":case"range":t=Number(e.currentTarget.value);break;default:t=e.currentTarget.value}i((0,B.Z)((0,R.Z)({},n),(0,T.Z)({},e.currentTarget.name,t)))}]}({name:""}),3),p=d[0],h=d[2];return o.useEffect((function(){c.current&&c.current.focus()}),[c]),(0,i.tZ)(_.ZP,{ref:c,name:"name",onChange:h,onKeyDown:X({Escape:t,Enter:function(){var e="".concat(p.name,".js"),r="code/".concat(e);n.includes(e)?u("file '".concat(p.name,"' already exists")):(l.writeFile(r,I.Z.from("")).then((function(){s.openFile(r)})),t())}})})}var H=function(e){var t=e.onFileOpen,n=(0,f.Z)().fs,a=(0,L.Z)(),l=(0,r.Z)(o.useState(!1),2),s=l[0],c=l[1],u=(0,N.Z)().showError,d=(0,r.Z)(o.useState(null),2),p=d[0],h=d[1],m=((0,G.Z)({path:"code",initialExpanded:!0,fs:n}).children||[]).filter((function(e){return e.type===z.Tv.File})).map((function(e){return e.filename})).sort();return(0,i.BX)(w,{fileDrag:{accept:["text/javascript"],onDrop:function(e){var t="code/".concat(e.name);m.includes(t)?u("scene '".concat((0,j.eb)(e.name),"' already exists")):e.text().then((function(e){n.writeFile(t,I.Z.from(e))}))}},children:[(0,i.tZ)(b,{sub:!0,title:"Code",actions:[{icon:(0,i.tZ)(C.Z,{}),action:function(){return c(!0)}}]}),(0,i.tZ)(S.Z,{height:"4px"}),(0,i.tZ)("div",{children:m.map((function(e){var r="code/".concat(e),o=(0,j.eb)(e),l=[{name:"Rename",action:function(){}}];return"main"!==o&&l.push({name:"Delete",action:function(){return h(r)},danger:!0}),(0,i.tZ)(M,{isActive:r===a,onClick:function(){return t(r)},onRename:function(e){n.moveFile(r,"code/".concat(e,".js")).then((function(e){e.error&&u("failed to rename")}))},name:o,options:l},o)}))}),s?(0,i.tZ)(O,{entries:m,close:function(){return c(!1)}}):null,p?(0,i.tZ)(P.Z,{isOpen:Boolean(p),onRequestClose:function(){return h(null)},children:(0,i.tZ)(A.Z,{danger:!0,prompt:"Delete scene '".concat((0,j.eb)(p),"' ?"),desc:"Are you sure you want to delete this scene? This action cannot be undone.",onCancel:function(){return h(null)},confirmText:"Yes, delete this scene",icon:(0,i.tZ)(W.Z,{}),onConfirm:function(){n.deleteFile(p),h(null)}})}):null]})},V=n(27668),q=n(49619),$=n(21128),Y=n(91513),K=n(54098),J=n.n(K),Q=n(44781);var ee=function(e){var t=e.kind,n=e.renderItem,l=e.onRequestClose,s=e.onAdd,u=function(e){var n="".concat(k,"/").concat(e);J()(n).then((function(e){return e.arrayBuffer()})).then((function(r){var i="".concat(t,"/").concat(e);p.writeFile(i,I.Z.from(r)).then((function(t){if(t.error)throw new Error(t.error);h.openFile(i),s&&s(e,n)})),l()})).catch((function(){return C("Failed to fetch ".concat(e))}))},d=(0,f.Z)(),p=d.fs,h=d.session,m=(0,r.Z)(o.useState([]),2),b=m[0],Z=m[1],y=(0,r.Z)(o.useState(""),2),x=y[0],w=y[1],k="https://kaboomjs.com/".concat(t),C=(0,N.Z)().showError;return o.useEffect((function(){J()("https://kaboomjs.com/api/assets/".concat(t)).then((function(e){return e.json()})).then((function(e){return Z(e)})).catch((function(){return C("Failed to fetch assets lib listing")}))}),[Z,C,k]),(0,i.BX)("div",{className:"jsx-d616aed56d26af98 assets",children:[(0,i.BX)(a.gC,{spacing:2,children:[(0,i.tZ)(g.Z,{level:3,children:"Assets Lib (beta)"}),0===b.length?(0,i.tZ)(Q.Z,{foreground:2,children:"Loading..."}):(0,i.BX)(i.HY,{children:[(0,i.tZ)(_.ZP,{large:!0,label:"Search",onChange:function(e){w(e.target.value)}}),(0,i.tZ)("div",{className:"jsx-d616aed56d26af98 box",children:b.filter((function(e){return!x||e.includes(x)})).map((function(e){return(0,i.tZ)(o.Fragment,{children:n({name:e,url:"".concat(k,"/").concat(e),add:function(){return u(e)}})},e)}))}),(0,i.tZ)(c.Z,{size:"small",onClick:function(){b.length>0&&u(b[Math.floor(Math.random()*b.length)])},children:"I\u2019m Feeling Lucky"})]})]}),(0,i.tZ)(v(),{id:"d616aed56d26af98",children:".assets.jsx-d616aed56d26af98{padding:var(--space-24)}.box.jsx-d616aed56d26af98{width:100%;height:320px;overflow-x:hidden;overflow-y:scroll}"})]})},te=n(37424);function ne(e){var t=e.url,n=e.add;return(0,i.BX)(i.HY,{children:[(0,i.tZ)("img",{src:t,loading:"lazy",onClick:n,alt:"sprite asset",className:"jsx-4ad892a0258c4ced entry"}),(0,i.tZ)(v(),{id:"4ad892a0258c4ced",children:".entry.jsx-4ad892a0258c4ced{padding:var(--space-16);height:120px;-ms-interpolation-mode:nearest-neighbor;image-rendering:-webkit-optimize-contrast;image-rendering:-moz-crisp-edges;image-rendering:-o-pixelated;image-rendering:pixelated;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4)}.entry.jsx-4ad892a0258c4ced:hover{cursor:pointer;background:var(--background-root)}"})]})}function re(e){var t=e.close,n=e.entries,a=e.onFileOpen,l=(0,f.Z)().fs,s=(0,D.Z)(t,[]),c=o.useRef(null),u=(0,N.Z)().showError,p=(0,r.Z)(o.useState({name:"",width:32,height:32}),2),h=p[0],m=p[1];o.useEffect((function(){c.current&&c.current.focus()}),[c]);var v=function(){if(0!==h.name.length){var e=h.width,r=h.height;if(isNaN(e)||isNaN(r)||e<=0||r<=0)u("invalid width / height!");else if(e>256||r>256)u("only supports sprites smaller than 256x256 yet");else{var i="".concat(h.name,".pedit"),o="sprites/".concat(i);n.includes(i)?u("sprite '".concat(h.name,"' already exists")):(l.writeFile(o,I.Z.from(JSON.stringify({fromKaboom:!0,width:h.width,height:h.height}))).then((function(){a(o)})),t())}}else u("invalid 'name'")},g=(0,te.H)();return(0,i.tZ)("div",{ref:s,className:"dialog",onKeyDown:X({Escape:t,Enter:v}),children:(0,i.tZ)(d.Tg,{elevated:!0,css:[d.l0.borderRadius(8),d.l0.p(8),d.l0.mt(8)],children:(0,i.BX)(d.G7,{css:[d.l0.colWithGap(16)],children:[(0,i.BX)(d.G7,{css:[d.l0.colWithGap(4)],children:[(0,i.tZ)("label",{htmlFor:g("name"),children:(0,i.tZ)(d.xv,{color:"dimmer",variant:"small",children:"Name"})}),(0,i.tZ)(d.II,{id:g("name"),ref:c,value:h.name,onChange:function(e){m((0,B.Z)((0,R.Z)({},h),{name:e.target.value}))}})]}),(0,i.BX)(d.G7,{css:[d.l0.rowWithGap(8)],children:[(0,i.BX)(d.G7,{css:[d.l0.colWithGap(4),{flex:"1 1 0px"}],children:[(0,i.tZ)("label",{htmlFor:g("width"),children:(0,i.tZ)(d.xv,{color:"dimmer",variant:"small",children:"Width"})}),(0,i.tZ)(d.II,{id:g("width"),value:"".concat(h.width),onChange:function(e){return m((0,B.Z)((0,R.Z)({},h),{width:parseInt(e.target.value,10)||0}))}})]}),(0,i.BX)(d.G7,{css:[d.l0.colWithGap(4),{flex:"1 1 0px"}],children:[(0,i.tZ)("label",{htmlFor:g("height"),children:(0,i.tZ)(d.xv,{color:"dimmer",variant:"small",children:"Height"})}),(0,i.tZ)(d.II,{id:g("height"),value:"".concat(h.height),onChange:function(e){return m((0,B.Z)((0,R.Z)({},h),{height:parseInt(e.target.value,10)||0}))}})]})]}),(0,i.BX)(d.G7,{css:[d.l0.rowWithGap(12),d.l0.justify.end],children:[(0,i.tZ)(d.zx,{onClick:t,text:"Cancel"}),(0,i.tZ)(d.zx,{colorway:"primary",onClick:v,text:"Create",iconLeft:(0,i.tZ)(C.Z,{})})]})]})})})}var ie=function(e){var t=e.onFileOpen,n=(0,f.Z)().fs,a=(0,N.Z)().showError,l=(0,L.Z)(),s=(0,r.Z)(o.useState(!1),2),c=s[0],u=s[1],p=(0,r.Z)(o.useState(!1),2),h=p[0],m=p[1],g=(0,r.Z)(o.useState(null),2),y=g[0],x=g[1],k=(0,Y.Z)(l),_=(0,$.Z)({fs:n,onContentProcess:function(e,t){if(t.endsWith("pedit")){var n=JSON.parse(e.toString());if(!n.fromKaboom)return n.frames[0]}else{var r=(0,j.yC)(t);if(r)return"data:".concat(r,";base64,").concat(e.toString("base64"))}return""}}),T=((0,G.Z)({path:"sprites",initialExpanded:!0,fs:n}).children||[]).filter((function(e){return e.type===z.Tv.File})).map((function(e){return e.filename})).sort(),R=["image/png","image/jpeg",".pedit"],B=function(e){var t="sprites/".concat(e.name);if(T.includes(t))return a("sprite '".concat((0,j.eb)(e.name),"' already exists"));e.arrayBuffer().then((function(e){n.writeFile(t,I.Z.from(e))}))},E=[{icon:(0,i.tZ)(V.Z,{}),action:function(){return m(!0)}},{icon:(0,i.tZ)(q.Z,{}),action:function(){return U(B,R)}},{icon:(0,i.tZ)(C.Z,{}),action:function(){return u(!0)}}];return(0,i.BX)(w,{fileDrag:{accept:R,onDrop:B},children:[(0,i.tZ)(b,{sub:!0,title:"Sprites",actions:E}),(0,i.tZ)(S.Z,{height:"4px"}),(0,i.tZ)("div",{className:"jsx-286709118fe5858",children:T.map((function(e){var r="sprites/".concat(e),o=(0,j.r6)(e),s=(0,j.eb)(e),c=_(r),u=k?[{name:"Insert load code",action:function(){var e="".concat("pedit"===o?"loadPedit":"loadSprite","(").concat(JSON.stringify(s),", ").concat(JSON.stringify(r),");");k({code:e})}}]:[];return(0,i.tZ)(M,{isActive:r===l,onClick:function(){return t(r)},onRename:function(e){n.moveFile(r,"sprites/".concat(e,".").concat(o)).then((function(e){e.error&&a("failed to rename")}))},icon:(0,i.tZ)("div",{className:"jsx-286709118fe5858 preview-img",children:c.state===$.j.Ready&&(0,i.tZ)("img",{src:c.content,alt:"",className:"jsx-286709118fe5858"})}),name:s,options:(0,Z.Z)(u).concat([{name:"Rename",action:function(){}},{name:"Delete",action:function(){return x(r)},danger:!0}])},s)}))}),c?(0,i.tZ)(re,{entries:T,close:function(){return u(!1)},onFileOpen:t}):null,y?(0,i.tZ)(d.u_,{isOpen:Boolean(y),onRequestClose:function(){return x(null)},children:(0,i.tZ)(A.Z,{danger:!0,prompt:"Delete sprite '".concat((0,j.eb)(y),"' ?"),desc:"Are you sure you want to delete this sprite? This action cannot be undone.",confirmText:"Yes, delete this sprite",icon:(0,i.tZ)(W.Z,{}),onCancel:function(){return x(null)},onConfirm:function(){n.deleteFile(y),x(null)}})}):null,(0,i.tZ)(d.u_,{isOpen:h,onRequestClose:function(){return m(!1)},maxWidth:872,children:(0,i.tZ)(ee,{kind:"sprites",renderItem:ne,onRequestClose:function(){return m(!1)}})}),(0,i.tZ)(v(),{id:"286709118fe5858",children:".preview-img.jsx-286709118fe5858{width:var(--space-32);height:var(--space-32);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;overflow:hidden}.preview-img.jsx-286709118fe5858 img.jsx-286709118fe5858{width:100%;-ms-interpolation-mode:nearest-neighbor;image-rendering:-webkit-optimize-contrast;image-rendering:-moz-crisp-edges;image-rendering:-o-pixelated;image-rendering:pixelated;image-rendering:-webkit-optimize-contrast;image-rendering:-moz-crisp-edges;image-rendering:crisp-edges}"})]})};function oe(e){var t=e.name,n=e.url,r=e.add;return(0,i.BX)(a.Ug,{justify:"space-between",align:"center",children:[(0,i.BX)(a.gC,{spacing:1,children:[(0,i.tZ)(Q.Z,{children:t}),(0,i.tZ)("audio",{src:n,controls:!0})]}),(0,i.tZ)(c.Z,{onClick:r,children:"Import"})]})}var ae=function(e){var t=e.onFileOpen,n=(0,f.Z)().fs,a=(0,L.Z)(),l=(0,N.Z)().showError,s=(0,r.Z)(o.useState(null),2),c=s[0],u=s[1],d=(0,r.Z)(o.useState(!1),2),p=d[0],h=d[1],m=(0,Y.Z)(a),v=((0,G.Z)({path:"sounds",initialExpanded:!0,fs:n}).children||[]).filter((function(e){return e.type===z.Tv.File})).map((function(e){return e.filename})).sort(),g=["audio/ogg","audio/mpeg","audio/wav"],y=function(e){var t="sounds/".concat(e.name);if(v.includes(t))return l("sound '".concat((0,j.eb)(e.name),"' already exists"));e.arrayBuffer().then((function(e){n.writeFile(t,I.Z.from(e))}))},x=[{icon:(0,i.tZ)(V.Z,{}),action:function(){return h(!0)}},{icon:(0,i.tZ)(q.Z,{}),action:function(){return U(y,g)}}];return(0,i.BX)(w,{fileDrag:{accept:g,onDrop:y},children:[(0,i.tZ)(b,{sub:!0,title:"Sounds",actions:x}),(0,i.tZ)(S.Z,{height:"4px"}),(0,i.tZ)("div",{children:v.map((function(e){var r=(0,j.eb)(e),o="sounds/".concat(e),s=m?[{name:"Insert load code",action:function(){return m({code:"loadSound(".concat(JSON.stringify(r),", ").concat(JSON.stringify(o),");")})}}]:[];return(0,i.tZ)(M,{isActive:o===a,onClick:function(){return t(o)},onRename:function(t){n.moveFile(o,"sounds/".concat(t,".").concat((0,j.r6)(e))).then((function(e){e.error&&l("failed to rename")}))},name:r,options:(0,Z.Z)(s).concat([{name:"Rename",action:function(){}},{name:"Delete",action:function(){return u(o)},danger:!0}])},r)}))}),c?(0,i.tZ)(P.Z,{isOpen:Boolean(c),onRequestClose:function(){return u(null)},children:(0,i.tZ)(A.Z,{danger:!0,prompt:"Delete sound '".concat((0,j.eb)(c),"' ?"),desc:"Are you sure you want to delete this sound? This action cannot be undone.",confirmText:"Yes, delete this sound",icon:(0,i.tZ)(W.Z,{}),onCancel:function(){return u(null)},onConfirm:function(){n.deleteFile(c),u(null)}})}):null,(0,i.tZ)(P.Z,{isOpen:p,onRequestClose:function(){return h(!1)},maxWidth:872,children:(0,i.tZ)(ee,{kind:"sounds",renderItem:oe,onRequestClose:function(){return h(!1)},onAdd:function(e,t){return new window.Audio(t).play()}})})]})},le=n(91131),se=n(87514),ce=n(43530),ue=n(65915),de=n(11731),fe=n(95068);function pe(e){var t=e.file,n=e.name,r=(0,ue.Z)()===t,o=(0,le.b9)(de.Ky),l=(0,le.b9)(fe.Sg);return(0,i.BX)("div",{onClick:function(){l(t),o({type:"markdown",data:{path:t}})},className:"jsx-148e6ca45d3ccd5a entry",children:[(0,i.BX)(a.Ug,{spacing:1,align:"center",children:[r?(0,i.tZ)(se.Z,{}):(0,i.tZ)(ce.Z,{}),(0,i.tZ)(Q.Z,{foreground:r?1:2,fontWeight:r?"medium":"regular",children:null!==n&&void 0!==n?n:(0,j.eb)(t)})]}),(0,i.tZ)(v(),{id:"148e6ca45d3ccd5a",children:".entry.jsx-148e6ca45d3ccd5a{cursor:pointer}"})]})}var he=function(){var e=(0,r.Z)(o.useState(!0),2),t=e[0],n=e[1],l=(0,r.Z)(o.useState(!1),2),s=l[0],c=l[1],u=(0,f.Z)().fs,d=(0,G.Z)({path:"learn",initialExpanded:!0,fs:u});o.useEffect((function(){var e=!1;return u.stat("README.md").then((function(t){e||t.exists&&c(!0)})),function(){e=!0}}),[u]);var h=(d.children||[]).filter((function(e){return e.type===z.Tv.File&&(0,j.gK)(e.filename)})).map((function(e){return e.filename})).sort();return(0,i.BX)(w,{children:[(0,i.tZ)(b,{sub:!0,title:"Learn",actions:[{icon:(0,i.tZ)(p.Z,{rotate:t?0:-90}),action:function(){return n(!t)}}]}),t?(0,i.BX)(a.gC,{spacing:1,children:[(0,i.tZ)("div",{}),s?(0,i.tZ)(pe,{name:"Intro",file:"README.md"}):null,h.map((function(e){return(0,i.tZ)(pe,{file:"learn/".concat(e)},e)}))]}):null]})};function me(e){var t=e.onFileOpen,n=(0,r.Z)(o.useState(!1),2),f=n[0],p=n[1];return(0,i.BX)(d.G7,{css:[d.l0.p(8),d.l0.flex.growAndShrink(1),d.l0.overflow("scroll"),{userSelect:"none"}],children:[(0,i.BX)(a.gC,{spacing:1,children:[(0,i.tZ)(k,{}),(0,i.tZ)(H,{onFileOpen:t}),(0,i.tZ)(ie,{onFileOpen:t}),(0,i.tZ)(ae,{onFileOpen:t}),(0,i.tZ)(he,{}),(0,i.tZ)("div",{}),(0,i.tZ)(c.Z,{Icon:l.Z,size:"small",onClick:function(){return window.open("https://kaboomjs.com")},children:"Docs"}),(0,i.tZ)(c.Z,{Icon:l.Z,size:"small",onClick:function(){return window.open("https://kaboomjs.com/play")},children:"Examples"}),(0,i.tZ)(c.Z,{Icon:s.Z,size:"small",onClick:function(){return p(!0)},children:"What\u2019s new"})]}),(0,i.tZ)(d.u_,{isOpen:f,onRequestClose:function(){return p(!1)},maxWidth:872,children:(0,i.tZ)(d.G7,{css:[d.l0.colWithGap(16),d.l0.p(32)],children:(0,i.tZ)(u.ZP,{children:'\n# New Kaboom Workspace\n\n- **No weird delay when run after editing.** Just press Cmd + S to refresh webview and quickly iterate!\n- **Helpful error reporting.** No need to go into browser console every time. The kaboom console displays your errors nicely.\n- **Support NPM packages and typescript by default.** Kaboom dev server builds your code with esbuild on the fly.\n- **Replit DB and Auth integration.** Make a score board even multiplayer with DB and Auth!\n- **In editor tutorial.** The template comes with a nice intro tutorial which you can learn and code along.\n- **Autocomplete.** Updated kaboom lib comes with detailed jsdoc for every function. No need to pull your hair out to figure out how certain functions work!\n- **HTML template.** Easily customize the html for your game.\n- **Total control over which version of Kaboom you use.** it\'s managed by NPM.\n- **Assets Library** Grab some quick assets to test out a game idea.\n- **Transparent dev server.** The dev server scripts are just in the Repl, customize them or toss them out if you want to. Or turn it into a multiplayer game server!\n- **New library version** The template comes with kaboom2000 (beta), with bunch of [new stuff and improvements](https://github.com/replit/kaboom/blob/master/CHANGELOG.md)\n\n## Migration Guide\n\n- The kaboom template now will not generate the initializing and assets loading code (`kaboom()`, `loadSprite()` etc.) for you, allowing more customized setup, and making it more portable with using kaboom outside replit.\n\n```js\nimport kaboom from "kaboom";\n\n// initialize context\nkaboom();\n\n// load assets\nloadSprite("bean", "sprites/bean.png");\nloadSound("coin", "sounds/coin.mp3");\n\n// the rest is the same\nconst player = add([\n\tsprite("bean"),\n\tarea(),\n]);\n```\n\nFor easier assets loading, use the "Insert load code" option in the asset entry option menu.\n\n- The template by default is running `kaboom@next`, which is currently the beta version of kaboom2000. It contains breaking changes, all listed in [CHANGELOG.md](https://github.com/replit/kaboom/blob/master/CHANGELOG.md). If you don\'t feel like migrating now, you can always `npm install kaboom@5.1`\n'})})})]})}},92069:function(e,t,n){n.d(t,{m:function(){return f}});var r=n(35944),i=(n(67294),n(70917)),o=n(60379),a=n(73092),l=n(197),s=n(27668),c=n(30052),u=(0,i.F4)("0%,100%{opacity:1;}50%{opacity:0.25;}"),d={root:(0,i.iv)([o.l0.height(20),o.l0.width(20),o.l0.center]),pulse:(0,i.iv)({animation:"".concat(u," 2s infinite")})};function f(){var e=(0,a.Z)(),t=e.isSaving;return e.isOffline?(0,r.tZ)(o.u,{tooltip:"Reconnecting, changes will be synced when you\u2019re online",placement:"right",children:(0,r.tZ)(o.G7,{css:d.root,children:(0,r.tZ)(l.Z,{size:16,color:o.TV.redDefault})})}):t?(0,r.tZ)(o.u,{tooltip:"Saving",placement:"right",children:(0,r.tZ)(o.G7,{css:[d.root,d.pulse],children:(0,r.tZ)(s.Z,{size:16,color:o.TV.foregroundDimmest})})}):(0,r.tZ)(o.u,{tooltip:"Saved",placement:"right",children:(0,r.tZ)(o.G7,{css:d.root,children:(0,r.tZ)(c.Z,{size:16,color:o.TV.foregroundDimmest})})})}},22371:function(e,t,n){n.d(t,{V:function(){return T},Z:function(){return R}});var r=n(34727),i=n(9941),o=n(70655),a=n(35944),l=n(67294),s=n(66681),c=n(60379),u=n(77365),d=n(79652),f=n(67629),p=n(48505),h=n(8941),m=n(48551),v=n(99408),g=n(65456),b=n(63377),Z=n(35642);var y,x=n(77352),w=n(34385),k=n(36228),C=n(92162),S=n(51995),_=n(56724),T=".tutorial";function R(){var e,t=(0,v.Z)().fs,n=(0,C.yR)(),R=(0,w.Z)(k.y.Sidepane),E=(0,i.Z)(l.useState([]),2),G=E[0],D=E[1],I=(0,i.Z)(l.useState(y.Loading),2),j=I[0],N=I[1],L=(0,b.Z)(),z=(0,i.Z)(function(e,t){var n,r=(0,l.useState)((function(){return null!==(n=Z.Z.get(e))&&void 0!==n?n:t})),i=r[0],o=r[1];return(0,l.useEffect)((function(){Z.Z.set(e,i)}),[e,i]),[i,o]}("tutorialProgress--".concat(L),0),2),P=z[0],A=z[1],X=(0,i.Z)(l.useState(!1),2),U=X[0],F=X[1],M=l.useRef(null),W=(0,_.d)(),O=W?W.toString():"",H=(0,x.jJ)(O,L),V=H?(0,a.tZ)(x.gC,{challenge:H}):null,q=l.useCallback((function(){M.current&&(M.current.scrollTop=0)}),[M]);return l.useEffect((function(){var e=!1,n=function(){var n=(0,r.Z)((function(){var n,r,a,l,s,c,u,d,f,p,h,v,b,Z,x;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return N(y.Loading),[4,t.readDir(T)];case 1:return n=o.sent(),e?[2]:n.error?(N(y.Error),[2]):(r=[],[4,Promise.all(n.children.filter((function(e){return e.type===g.Tv.File&&"md"===(0,m.r6)(e.filename)})).map((function(e){var n="".concat(T,"/").concat(e.filename);return Promise.all([n,t.readFile(n)])})))]);case 2:if(a=o.sent(),e)return[2];l=!0,s=!1,c=void 0;try{for(u=a[Symbol.iterator]();!(l=(d=u.next()).done);l=!0)f=(0,i.Z)(d.value,2),p=f[0],(h=f[1]).error?N(y.Error):(b=h.content.toString(),Z=RegExp("^#\\s(?<title>.*)"),x=Z.exec(b),r.push({title:null===x||void 0===x||null===(v=x.groups)||void 0===v?void 0:v.title,content:b,path:p}))}catch(w){s=!0,c=w}finally{try{l||null==u.return||u.return()}finally{if(s)throw c}}return D(r),N(y.Ready),[2]}}))}));return function(){return n.apply(this,arguments)}}();return n(),function(){e=!0}}),[t]),l.useEffect((function(){G[P]||A(0)}),[P,A,G]),j===y.Loading?(0,a.tZ)(c.G7,{css:[c.l0.flex.growAndShrink(1),c.l0.center],children:(0,a.tZ)(u.Z,{})}):j===y.Error?(0,a.tZ)(c.G7,{css:[c.l0.flex.growAndShrink(1),c.l0.center],children:(0,a.BX)(c.G7,{css:[c.l0.center,c.l0.colWithGap(4)],children:[(0,a.tZ)(f.Z,{color:c.TV.accentNegativeDefault}),(0,a.tZ)(c.xv,{color:"dimmer",children:"Failed to load tutorial"})]})}):0===G.length?(0,a.tZ)(c.G7,{css:[c.l0.flex.growAndShrink(1),c.l0.center],children:(0,a.BX)(c.G7,{css:[c.l0.center,c.l0.colWithGap(4)],children:[(0,a.tZ)(f.Z,{color:c.TV.accentNegativeDefault}),(0,a.tZ)(c.xv,{color:"dimmer",children:"No tutorials found!"})]})}):U?(0,a.BX)(c.G7,{css:[c.l0.overflowY("scroll"),c.l0.flex.growAndShrink(1),c.l0.p(8),c.l0.colWithGap(16)],children:[(0,a.tZ)(c.xv,{variant:"headerDefault",children:"Table of Contents"}),(0,a.tZ)(c.G7,{css:[c.l0.flex.growAndShrink(1),c.l0.colWithGap(8)],children:G.map((function(e,t){return(0,a.BX)(c.G7,{css:[c.l0.p(8),P===t?c.l0.backgroundColor.backgroundHighest:c.l0.backgroundColor.backgroundHigher,c.l0.borderRadius(4),c.l0.rowWithGap(8),c.l0.align.center,c.l0.cursor.pointer,P===t?{outline:"solid 2px var(--outline-dimmest)"}:{},{":hover":{outline:"solid 2px var(--outline-dimmest)"}}],onClick:function(){A(t),F(!1)},children:[(0,a.tZ)(c.G7,{css:[c.l0.backgroundColor.backgroundHighest,c.l0.width(20),c.l0.height(20),c.l0.borderRadius("full"),c.l0.center,{outline:"solid 1px var(--outline-dimmest)"}],children:(0,a.tZ)(c.xv,{variant:"small",color:"dimmest",children:t+1})}),(0,a.tZ)(c.xv,{css:[c.l0.maxWidth("80%")],children:e.title})]},e.title)}))})]}):(0,a.tZ)(c.G7,{innerRef:R,css:[c.l0.height("100%")],children:(0,a.BX)(c.G7,{dataCy:"tutorial-viewer-content",innerRef:M,css:[c.l0.overflowY("scroll"),c.l0.flex.growAndShrink(1),c.l0.p(16),c.l0.pb(48),c.l0.colWithGap(16)],children:[n?(0,a.tZ)(c.zx,{text:"Show tutorial video",iconLeft:(0,a.tZ)(S.Z,{}),onClick:function(){return n()}}):null,V,G.length>1&&(0,a.tZ)(c.zx,{text:"Table of Contents",iconLeft:(0,a.tZ)(d.Z,{}),onClick:function(){return F(!0)}}),(0,a.tZ)(s.Z,{fs:t,path:G[P].path,source:G[P].content,sourcePos:!1}),G.length>1&&(0,a.BX)(c.G7,{css:[c.l0.position.absolute,c.l0.width("100%"),c.l0.left(0),c.l0.bottom(0),c.l0.overflow("hidden")],children:[(0,a.tZ)(B,{progress:(P+1)/G.length}),(0,a.BX)(c.G7,{css:[c.l0.width("100%"),c.l0.height(40),c.l0.align.center,c.l0.flex.row],children:[(0,a.tZ)(c.G7,{tag:"button",css:[c.l0.justify.center,c.l0.p(8),c.l0.backgroundColor.backgroundHigher,c.l0.cursor.pointer,c.l0.width(40),c.l0.height("100%")],onClick:function(){P>0&&(A((function(e){return e-1})),q())},children:P>0&&(0,a.tZ)(p.Z,{size:24})}),(0,a.tZ)(c.G7,{tag:"button",css:[c.l0.rowWithGap(8),c.l0.flex.growAndShrink(1),c.l0.height("100%"),c.l0.justify.spaceBetween,c.l0.backgroundColor.backgroundHighest,c.l0.align.center,c.l0.p(8),c.l0.cursor.pointer,{userSelect:"none"}],onClick:function(){P<G.length-1&&(A((function(e){return e+1})),q())},children:P<G.length-1&&(0,a.BX)(a.HY,{children:[(0,a.BX)(c.xv,{css:[c.l0.flex.growAndShrink(1),c.l0.textAlign.left,c.l0.fontSize(c.TV.fontSizeSubheadDefault)],children:[(0,a.BX)("span",{css:[c.l0.color.foregroundDimmer],children:["Next",G[P+1].title?": ":" page"]}),(0,a.tZ)("b",{children:null!==(e=G[P+1].title)&&void 0!==e?e:""})]}),(0,a.tZ)(h.Z,{size:24})]})})]})]})]})})}!function(e){e.Ready="READY",e.Loading="LOADING",e.Error="ERROR"}(y||(y={}));var B=function(e){var t=e.progress;return(0,a.tZ)(c.u,{tooltip:"Progress: ".concat(t),children:(0,a.tZ)(c.G7,{css:[c.l0.width("100%"),c.l0.height(4),c.l0.backgroundColor.backgroundHigher],children:(0,a.tZ)(c.G7,{css:[c.l0.width("".concat(100*t,"%")),c.l0.height("100%"),c.l0.backgroundColor.purpleDefault]})})})}},54168:function(e,t,n){n.d(t,{x:function(){return T},y:function(){return _}});var r=n(34727),i=n(69779),o=n(70655),a=n(92876),l=n(60977),s=n(75815),c=function(){function e(t){(0,s.Z)(this,e),this.code="",this.currentIndent=0,this.lib=t}var t=e.prototype;return t.indent=function(){this.currentIndent+=1},t.dedent=function(){if(0===this.currentIndent)throw new Error("indent at zero");this.currentIndent-=1},t.addIndents=function(){for(var e=0;e<this.currentIndent;e++)this.code+="  "},t.push=function(e){var t=e.split("\n"),n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;this.addIndents(),this.code+=l,this.newLine()}}catch(s){r=!0,i=s}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}},t.newLine=function(){this.code+="\n"},t.closeCurly=function(){this.addIndents(),this.code+=this.lib.getClosingBrackets()},t.toString=function(){return this.code},e}(),u=n(83160),d={testRunnerName:function(){return"TestRunner"},testSuiteName:function(){return"TestSuite"},defaultImports:function(){return"import org.junit.Before;\nimport org.junit.After;\nimport org.junit.Test;\nimport static org.junit.Assert.*;"},classIntro:function(){return"public class ".concat((0,u.Og)(d.testSuiteName())," {")},classConstructorName:function(){return(0,u.Og)(d.testSuiteName())},setupIntro:function(){return"@Before\npublic void setUp() {"},tearDownIntro:function(){return"@After\npublic void tearDown() {"},testIntro:function(e){return"".concat(d.testIntroPreName()).concat(e).concat(d.testIntroPostName())},testIntroPreName:function(){return"@Test\npublic void "},testIntroPostName:function(){return"() {"},getProperTestName:function(e){return e},parseTestResultName:function(e){return e.replace("(".concat((0,u.Og)(d.testSuiteName()),")"),"")},buildSuite:function(e){var t=e.tests,n=e.meta,r=new c(d);r.push(d.defaultImports()),n&&n.imports&&r.push(n.imports),r.newLine(),r.push(d.classIntro()),r.newLine(),r.indent(),n&&(n.initialization&&(r.push(n.initialization),r.newLine()),n.setup&&(r.push(d.setupIntro()),r.indent(),r.push(n.setup),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()),n.tearDown&&(r.push(d.tearDownIntro()),r.indent(),r.push(n.tearDown),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()));var i=!0,o=!1,a=void 0;try{for(var l,s=t[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var u=l.value;u.code&&(r.push(d.testIntro(u.name)),r.indent(),r.push(u.code),r.dedent(),r.closeCurly(),r.newLine(),r.newLine())}}catch(f){o=!0,a=f}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}return r.dedent(),r.closeCurly(),r.toString()},runSuite:function(e){return m.apply(this,arguments)},buildAndRunTests:function(e){var t=e.container,n=e.fs,r=e.packager,i=e.logger,o=e.tests,a=e.meta,l=d.buildSuite({tests:o,meta:a});return d.runSuite({container:t,fs:n,packager:r,logger:i,suiteCode:l})},hasClosingBrackets:function(){return!0},getClosingBrackets:function(){return"}"},hasSemicolon:function(){return!0},getCommentChar:function(){return"//"},getHelpText:function(){return"no react in this bitch either"},captureSetupError:function(e){var t=e.tag,n=e.raw;a.$e((function(e){e.setTag("unitTestLib","true"),e.setExtra("raw",n),e.setExtra("language","java10"),a.Tb(t)}))},exampleTest:{id:-1,failureMessage:"An Adder class should have an add method that adds two ints and returns the result",name:"add",code:"Adder adder = new Adder();\nint result = adder.add(1, 2);\nassertEquals(3, result);\n"}},f="__UNIT_TEST_RESULT_START__",p="__UNIT_TEST_RESULT_END__",h="import org.json.simple.JSONArray;\nimport org.json.simple.JSONObject;\nimport org.junit.runner.JUnitCore;\nimport org.junit.runner.Result;\nimport org.junit.runner.notification.Failure;\n\npublic class ".concat((0,u.Og)(d.testRunnerName())," {\n    public static void main(String[] args) {\n      Result result = JUnitCore.runClasses(").concat((0,u.Og)(d.testSuiteName()),'.class);\n      JSONArray failures = new JSONArray();\n\n        for (Failure failure : result.getFailures()) {\n            JSONObject obj = new JSONObject();\n            obj.put("name", failure.getTestHeader());\n            obj.put("stack", failure.getTrace());\n            failures.add(obj);\n        }\n        JSONObject out = new JSONObject();\n        out.put("passed", result.wasSuccessful());\n        out.put("failures", failures);\n        System.out.println();\n        System.out.println("').concat(f,'");\n        System.out.println(out);\n        System.out.println("').concat(p,'");\n    }\n}');function m(){return(m=(0,r.Z)((function(e){var t,n,r,a,s,c,m,v,g,b,Z,y,x,w,k,C,S,_,T,R,B,E,G,D;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return t=e.container,n=e.fs,r=e.packager,a=e.logger,s=e.suiteCode,m=a.startLogSpinner("Setting up the environment"),[4,(0,u.WT)(n)];case 1:return o.sent(),m("Creating your test files 1/2"),[4,(0,u.e3)({fs:n,code:s,filename:"".concat(d.testSuiteName(),".java")})];case 2:return v=o.sent(),(g=v.error)?("Failed to create suite code file",d.captureSetupError({tag:"Failed to create suite code file",raw:g}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}]):(m("Creating your test files 2/2"),[4,(0,u.e3)({fs:n,code:h,filename:"".concat(d.testRunnerName(),".java")})]);case 3:return b=o.sent(),(Z=b.error)?("Failed to create test runner file",d.captureSetupError({tag:"Failed to create test runner file",raw:Z}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}]):(a.stopLogSpinner(),a.clearLine(),a.logMessage("Installing imported packages\r\n"),[4,r.addPackages([{name:"junit:junit",version:"4.12"},{name:"com.googlecode.json-simple:json-simple",version:"1.1.1"},{name:"org.hamcrest:hamcrest-core",version:"1.3"}])]);case 4:return o.sent(),[4,r.installPackages()];case 5:return o.sent()?(a.clearLogs(),m=a.startLogSpinner("Compiling your files"),[4,t.exec("find",".","-type","f","-name","*.java","-print0")]):[2,{error:"Failed to install packages\r\n"}];case 6:if(y=o.sent(),x=y.output,w=y.error)return k="Failed to fetch working directory java files",d.captureSetupError({tag:k,raw:w}),[2,{error:"".concat(k,"\r\n\r\n")+(null===x||void 0===x?void 0:x.replace(/\n/g,"\n\r"))+"\r\n\r\n"+w}];if("string"!==typeof x)throw new Error("expected working directory files to be a string");return C=x.slice(0,-1).split("\0"),S=".:./target/dependency/*",[4,(c=t).exec.apply(c,["javac","-classpath",S,"-d","."].concat((0,i.Z)(C)))];case 7:return _=o.sent(),T=_.output,(R=_.error)?(B="Failed to compile test runner file",d.captureSetupError({tag:B,raw:R}),[2,{error:"".concat(B,"\r\n\r\n")+(null===T||void 0===T?void 0:T.replace(/\n/g,"\n\r"))+"\r\n\r\n"+R}]):(m("Running your tests"),[4,t.exec("java","-classpath",S,(0,u.Og)(d.testRunnerName()))]);case 8:if(E=o.sent(),G=E.output,D=E.error)return(0,l.j)(l.U3.REPL_UNIT_TEST_CONSTRUCTION_ERROR_INTERNAL),[2,{error:"Running tests failed\r\n\r\n"+(null===G||void 0===G?void 0:G.replace(/\n/g,"\n\r"))+"\r\n\r\n"+D}];if("string"!==typeof G)throw new Error("expected runOutput to be a string");return[2,{result:JSON.parse(G.slice(G.indexOf(f)+f.length,G.lastIndexOf(p))),error:null}]}}))}))).apply(this,arguments)}var v=d,g=function(e){return!!e&&e.trim().length>0&&e.split("\n").some((function(e){return!(e.trim().startsWith("#")||""===e.trim())}))},b={testRunnerName:function(){return"test_runner"},testSuiteName:function(){return"test_suite"},defaultImports:function(){return"import unittest\nfrom main import *\n"},classIntro:function(){return"class UnitTests(unittest.TestCase):"},classConstructorName:function(){return"__init__"},setupIntro:function(){return"def setUp(self):"},tearDownIntro:function(){return"def tearDown(self):"},testIntro:function(e){return b.testIntroPreName()+e+b.testIntroPostName()},testIntroPreName:function(){return"def test_"},testIntroPostName:function(){return"(self):"},getProperTestName:function(e){return"test_".concat(e)},parseTestResultName:function(e){return e},buildSuite:function(e){var t=e.tests,n=e.meta,r=new c(b);r.push(b.defaultImports()),n&&n.imports&&r.push(n.imports),r.newLine(),r.push(b.classIntro()),r.newLine(),r.indent(),n&&(n.initialization&&(r.push(n.initialization),r.newLine()),g(n.setup)&&(r.push(b.setupIntro()),r.indent(),r.push(n.setup),r.dedent(),r.newLine()),g(n.tearDown)&&(r.push(b.tearDownIntro()),r.indent(),r.push(n.tearDown),r.dedent(),r.newLine()));var i=!0,o=!1,a=void 0;try{for(var l,s=t[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var u=l.value;r.push(b.testIntro(u.name)),r.indent(),r.push(u.code||"pass"),r.dedent(),r.newLine()}}catch(d){o=!0,a=d}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}return r.toString()},runSuite:function(e){return w.apply(this,arguments)},buildAndRunTests:function(e){var t=e.container,n=e.fs,r=e.packager,i=e.logger,o=e.tests,a=e.meta,l=b.buildSuite({tests:o,meta:a});return b.runSuite({container:t,fs:n,packager:r,logger:i,suiteCode:l})},hasClosingBrackets:function(){return!1},getClosingBrackets:function(){throw new Error("This language does not have closing brackets, check `hasClosingBrackets` first")},hasSemicolon:function(){return!1},getCommentChar:function(){return"#"},getHelpText:function(){return"no react in this bitch"},captureSetupError:function(e){var t=e.tag,n=e.raw;a.$e((function(e){e.setTag("unitTestLib","true"),e.setExtra("raw",n),e.setExtra("language","python3"),a.Tb(t)}))},exampleTest:{id:-1,failureMessage:"In main.py you should have an add functions that adds two numbers and returns the result",name:"add",code:"self.assertEquals(add(1, 2), 3)"}},Z="__UNIT_TEST_RESULT_START__",y="__UNIT_TEST_RESULT_END__",x="import unittest\nimport ".concat((0,u.Og)(b.testSuiteName()),"\nimport os\nimport json\nfrom time import sleep\n\nsuite = unittest.TestLoader().loadTestsFromTestCase(\n  ").concat((0,u.Og)(b.testSuiteName()),'.UnitTests)\nf = open(os.devnull,"w")\ntest_res = unittest.TextTestRunner(stream=f).run(suite)\n\n# Merge errors and failures and normalize to {name, stack}\nfailures = [\n    {\n        "name": r[0]._testMethodName,\n        "stack": r[1],\n    } for r in test_res.errors + test_res.failures\n]\nprint()\nprint(\'').concat(Z,'\')\nsleep(1)\nprint(json.dumps({\n    "passed": test_res.wasSuccessful(),\n    "failures": failures,\n}))\nprint()\nprint(\'').concat(y,"');");function w(){return(w=(0,r.Z)((function(e){var t,n,r,i,a,s,c,d,f,p,h,m,v;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return t=e.container,n=e.fs,r=e.packager,i=e.logger,a=e.suiteCode,s=i.startLogSpinner("Setting up the environment"),[4,(0,u.WT)(n)];case 1:return o.sent(),s("Creating your test files 1/2"),[4,(0,u.e3)({fs:n,code:a,filename:"".concat(b.testSuiteName(),".py")})];case 2:return c=o.sent(),(d=c.error)?("Failed to create suite code file",b.captureSetupError({tag:"Failed to create suite code file",raw:d}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}]):(s("Creating your test files 2/2"),[4,(0,u.e3)({fs:n,code:x,filename:"".concat(b.testRunnerName(),".py")})]);case 3:return f=o.sent(),(p=f.error)?("Failed to create test runner file",b.captureSetupError({tag:"Failed to create test runner file",raw:p}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}]):(i.stopLogSpinner(),i.clearLine(),i.logMessage("Installing imported packages\r\n"),[4,r.installPackages()]);case 4:return o.sent()?(i.clearLogs(),i.startLogSpinner("Running your tests"),[4,t.exec("python","-B",(0,u.Og)("".concat(b.testRunnerName(),".py")))]):[2,{error:"Failed to install packages\r\n"}];case 5:if(h=o.sent(),m=h.output,v=h.error)return(0,l.j)(l.U3.REPL_UNIT_TEST_CONSTRUCTION_ERROR_INTERNAL),[2,{error:"Running tests failed\r\n\r\n"+(null===m||void 0===m?void 0:m.replace(/\n/g,"\n\r"))+"\r\n"+v}];if("string"!==typeof m)throw new Error("expected runoutput to be a string");return[2,{result:JSON.parse(m.slice(m.indexOf(Z)+Z.length,m.lastIndexOf(y))),error:null}]}}))}))).apply(this,arguments)}var k={testRunnerName:function(){throw new Error("Node test runner uses jest directly")},testSuiteName:function(){return"test_suite"},defaultImports:function(){return"const index = require('./index.js');"},classIntro:function(){return'describe("UnitTests", function() {'},classConstructorName:function(){return null},setupIntro:function(){return"beforeAll(async function() {"},tearDownIntro:function(){return"afterAll(async function() {"},testIntro:function(e){return k.testIntroPreName()+e+k.testIntroPostName()},testIntroPreName:function(){return'test("'},testIntroPostName:function(){return'", async function() {'},getProperTestName:function(e){return e},parseTestResultName:function(e){return e},buildSuite:function(e){var t=e.tests,n=e.meta,r=new c(k);r.push(k.defaultImports()),n&&n.imports&&r.push(n.imports),r.newLine(),r.push(k.classIntro()),r.newLine(),r.indent(),n&&(n.initialization&&(r.push(n.initialization),r.newLine()),n.setup&&(r.push(k.setupIntro()),r.indent(),r.push(n.setup),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()),n.tearDown&&(r.push(k.tearDownIntro()),r.indent(),r.push(n.tearDown),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()));var i=!0,o=!1,a=void 0;try{for(var l,s=t[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var u=l.value;u.code&&(r.push(k.testIntro(u.name)),r.indent(),r.push(u.code),r.dedent(),r.closeCurly(),r.newLine(),r.newLine())}}catch(d){o=!0,a=d}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}return r.dedent(),r.closeCurly(),r.toString()},runSuite:function(e){return C.apply(this,arguments)},buildAndRunTests:function(e){var t=e.container,n=e.fs,r=e.packager,i=e.logger,o=e.tests,a=e.meta,l=k.buildSuite({tests:o,meta:a});return k.runSuite({container:t,fs:n,packager:r,logger:i,suiteCode:l})},hasClosingBrackets:function(){return!0},getClosingBrackets:function(){return"});"},hasSemicolon:function(){return!0},getCommentChar:function(){return"//"},getHelpText:function(){return"no react yet"},captureSetupError:function(e){var t=e.tag,n=e.raw;a.$e((function(e){e.setTag("unitTestLib","true"),e.setExtra("raw",n),e.setExtra("language","nodejs"),a.Tb(t)}))},exampleTest:{id:-1,failureMessage:"",name:"add",code:"expect(index.add(1, 2)).toBe(3);"}};function C(){return(C=(0,r.Z)((function(e){var t,n,r,i,a,s,c,d,f,p,h,m,v,g,b,Z,y,x,w,C,S,_;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return t=e.container,n=e.fs,r=e.packager,i=e.logger,a=e.suiteCode,s=i.startLogSpinner("Setting up the environment"),[4,(0,u.WT)(n)];case 1:return o.sent(),s("Creating your test files 1/2"),[4,(0,u.e3)({fs:n,code:a,filename:"".concat(k.testSuiteName(),".js")})];case 2:return c=o.sent(),(d=c.error)?("Failed to create suite code file",k.captureSetupError({tag:"Failed to create suite code file",raw:d}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}]):(s("Creating your test files 2/2"),f=69,p="jest.config.json",h={testRegex:(0,u.Og)("".concat(k.testSuiteName(),".js")),testEnvironment:"node",testFailureExitCode:f},[4,(0,u.e3)({fs:n,code:JSON.stringify(h),filename:p})]);case 3:return m=o.sent(),(v=m.error)?("Failed to create config file",k.captureSetupError({tag:"Failed to create config file",raw:v}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}]):(i.stopLogSpinner(),i.clearLine(),i.logMessage("Installing imported packages\r\n"),[4,r.installPackages()]);case 4:return o.sent()?(i.clearLogs(),s=i.startLogSpinner("Running your tests"),g=(0,u.Og)("output.json"),[4,t.exec("jest","--json","--outputFile",g,"--config",(0,u.Og)(p),"--forceExit","--passWithNoTests")]):[2,{error:"Failed to install packages\r\n"}];case 5:return b=o.sent(),Z=b.output,(y=b.error)&&!y.endsWith(f.toString())?((0,l.j)(l.U3.REPL_UNIT_TEST_CONSTRUCTION_ERROR_INTERNAL),[2,{error:"Running tests failed\r\n\r\n"+(null===Z||void 0===Z?void 0:Z.replace(/\n/g,"\n\r"))+"\r\n"+y}]):(s("Parsing your test results"),[4,n.readFile(g)]);case 6:return(x=o.sent()).error?("Error reading test results",k.captureSetupError({tag:"Error reading test results",raw:x.error}),[2,{error:"There was an error getting test results, if this happens please contact support."}]):(w=x.content.toString(),(C=JSON.parse(w)).success?[2,{error:null,result:{passed:!0,failures:[]}}]:(S=C.testResults[0],(_=S.assertionResults.filter((function(e){return"passed"!==e.status})).map((function(e){return{name:e.title,stack:e.failureMessages[0]}}))).length?[2,{error:null,result:{passed:!1,failures:_}}]:[2,{error:S.message.replace(/\n/g,"\r\n")}]))}}))}))).apply(this,arguments)}var S={java10:v,java10_beta:v,java:v,python3:b,python3_beta:b,python:b,nodejs:k,javascript:k,nodejs_beta:k};function _(e){return e in S}function T(e){if(!_(e))throw new Error("".concat(e," is not a supported unit testing language, it has to be one of ").concat(Object.keys(S)));return S[e]}},83160:function(e,t,n){n.d(t,{Og:function(){return u},WT:function(){return p},e3:function(){return d}});var r=n(34727),i=n(70655),o=n(92876),a=n(31066),l=n(65456),s=n(58794),c="_test_runner";function u(e){return c+e}function d(e){return f.apply(this,arguments)}function f(){return(f=(0,r.Z)((function(e){var t,n,r,o,a;return(0,i.__generator)(this,(function(i){return t=e.fs,n=e.code,r=e.filename,o=u(r),a=s.Z.from(n,"utf8"),[2,t.writeFile(o,a)]}))}))).apply(this,arguments)}function p(e){return h.apply(this,arguments)}function h(){return(h=(0,r.Z)((function(e){var t,n;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,e.readDir(a.Ql)];case 1:return(t=r.sent()).error?[2]:[4,Promise.all(t.children.map((function(t){return t.filename.startsWith(c)?t.type===l.Tv.File?e.deleteFile(t.filename):e.deleteDir(t.filename):Promise.resolve(null)})))];case 2:return r.sent(),[3,4];case 3:return n=r.sent(),o.$e((function(e){e.setTag("unitTestLib","true"),o.Tb(n)})),[3,4];case 4:return[2]}}))}))).apply(this,arguments)}},64576:function(e,t,n){n.d(t,{AF:function(){return x},Hd:function(){return k},IV:function(){return T},Rb:function(){return g},aA:function(){return v},kO:function(){return S},lQ:function(){return B},rU:function(){return Z}});var r=n(14251),i=n(32692),o=n(31230),a=n(50319);function l(){var e=(0,i.Z)(["\n  fragment UnitTestsReplUnitTestMeta on ReplUnitTestMeta {\n    id\n    imports\n    initialization\n    setup\n    tearDown\n  }\n"]);return l=function(){return e},e}function s(){var e=(0,i.Z)(["\n  fragment UnitTestsReplUnitTest on ReplUnitTest {\n    id\n    name\n    code\n    failureMessage\n  }\n"]);return s=function(){return e},e}function c(){var e=(0,i.Z)(["\n  mutation createUnitTestMeta($input: CreateReplUnitTestMetaInput!) {\n    createReplUnitTestMeta(input: $input) {\n      ... on ReplUnitTestMeta {\n        id\n        ...UnitTestsReplUnitTestMeta\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}function u(){var e=(0,i.Z)(["\n  mutation updateUnitTestMeta($input: UpdateReplUnitTestMetaInput!) {\n    updateReplUnitTestMeta(input: $input) {\n      ... on ReplUnitTestMeta {\n        id\n        ...UnitTestsReplUnitTestMeta\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,i.Z)(["\n  mutation createUnitTest($input: CreateReplUnitTestInput!) {\n    createReplUnitTest(input: $input) {\n      ... on ReplUnitTest {\n        id\n        ...UnitTestsReplUnitTest\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function f(){var e=(0,i.Z)(["\n  mutation updateUnitTest($input: UpdateReplUnitTestInput!) {\n    updateReplUnitTest(input: $input) {\n      ... on ReplUnitTest {\n        id\n        ...UnitTestsReplUnitTest\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function p(){var e=(0,i.Z)(["\n  mutation deleteUnitTest($testId: Int!) {\n    deleteReplUnitTest(testId: $testId) {\n      ... on ReplUnitTest {\n        id\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return p=function(){return e},e}function h(){var e=(0,i.Z)(["\n  mutation updateReplUnitTestLastRun(\n    $input: UpdateReplUnitTestLastRunInput!\n    $replId: String!\n  ) {\n    updateReplUnitTestLastRun(input: $input) {\n      ... on UpdateReplUnitTestLastRunUpdatedTests {\n        __typename\n        updatedTests {\n          ... on ReplUnitTest {\n            id\n            __typename\n            lastRun(replId: $replId) {\n              ... on ReplUnitTestLastRun {\n                __typename\n                status\n              }\n              ... on UserError {\n                __typename\n                message\n              }\n            }\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n      ... on UserError {\n        __typename\n        message\n      }\n    }\n  }\n"]);return h=function(){return e},e}var m={},v=(0,o.Ps)(l()),g=(0,o.Ps)(s()),b=(0,o.Ps)(c(),v);function Z(e){var t=(0,r.Z)({},m,e);return a.D(b,t)}var y=(0,o.Ps)(u(),v);function x(e){var t=(0,r.Z)({},m,e);return a.D(y,t)}var w=(0,o.Ps)(d(),g);function k(e){var t=(0,r.Z)({},m,e);return a.D(w,t)}var C=(0,o.Ps)(f(),g);function S(e){var t=(0,r.Z)({},m,e);return a.D(C,t)}var _=(0,o.Ps)(p());function T(e){var t=(0,r.Z)({},m,e);return a.D(_,t)}var R=(0,o.Ps)(h());function B(e){var t=(0,r.Z)({},m,e);return a.D(R,t)}},69128:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(2916),i=n(25497),o=n(99408),a=n(67294),l=n(54168);function s(){var e=(0,r.Z)(),t=(0,o.Z)().dotReplit,n=null===e||void 0===e?void 0:e.language,s=(0,a.useState)(null),c=s[0],u=s[1],d=(0,a.useState)(!0),f=d[0],p=d[1];return(0,a.useEffect)((function(){if(n){if((0,l.y)(n))return u(n),void p(!1);var e=!1,r=t.watch((function(t){var n,r;if(e||(e=!0,p(!1)),t.error)t.error===i.Yt.NotFound&&u(null);else{var o=null===(n=t.config.unitTest)||void 0===n||null===(r=n.language)||void 0===r?void 0:r.toLowerCase();o&&(0,l.y)(o)?u(o):u(null)}}));return function(){r()}}}),[n,t]),{language:c,isLoading:f}}},47886:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(67294);function i(e){var t=e.container,n=e.runner,i=e.refreshWebView;(0,r.useEffect)((function(){var e,r=[];return"shellrunner"===n.mode&&r.push(n.onOutput((function(t){t&&t.includes("exit status 1")&&(e=Date.now())}))),r.push(t.onPortOpened((function(t){if(!t.isVnc){var n=Date.now();void 0!==e&&n-e<1e3||i()}}))),function(){return r.forEach((function(e){return e()}))}}),[t,i,n])}},56483:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(67294),i=n(48920);function o(e){var t=e.runner,n=e.refreshWebView;(0,r.useEffect)((function(){if("html"===t.mode)return t.onStateChanged((function(e){e===i.A.RUNNING&&n()}))}),[t,n])}},80856:function(e,t,n){n.d(t,{Z:function(){return w}});var r=n(34727),i=n(69779),o=n(70655),a=n(67294),l=n(41709),s=n(60977),c=n(14251),u=n(32692),d=n(31230),f=n(37887);function p(){var e=(0,u.Z)(["\n  query ContentsDiverged {\n    currentUser {\n      id\n      isAdmin: hasRole(role: ADMIN)\n    }\n  }\n"]);return p=function(){return e},e}var h={},m=(0,d.Ps)(p());var v=n(31066),g=n(40381),b=n(99408),Z=n(37806),y=n(48551),x=n(41671);function w(e){var t,n=e.moveOrDeleteFile,u=(0,b.Z)().fs,d=(0,x.K)(),p=(0,a.useRef)(new Map),w=(0,g.Z)(),k=(0,a.useState)(!1),C=k[0],S=k[1],_=(0,a.useState)(!1),T=_[0],R=_[1],B=(0,a.useState)([]),E=B[0],G=B[1],D=function(e){var t=(0,c.Z)({},h,e);return f.a(m,t)}().data,I=(null===D||void 0===D||null===(t=D.currentUser)||void 0===t?void 0:t.isAdmin)||window.location.search.includes("debug=1"),j=(0,Z.IY)(),N=E.map((function(e){return e.path})).map((function(e){return{title:e,path:e}})),L=(0,a.useState)(),z=L[0],P=L[1];(0,a.useEffect)((function(){if(w&&!p.current.has(w)&&w!==v.rq){var e=function(e){n&&n(e),p.current.delete(w),G((function(e){return e.filter((function(e){return e.path!==w}))}))};(0,y.Mb)(w)?u.watchTextFile(w,{onMoveOrDelete:e,onError:function(e,t){e.code||(u.flush(),u.persist({skipDebounce:!0}),j({error:e,extras:t,tags:{ot:!0}}))},onReconnectFail:function(e,t){G((function(n){return(0,i.Z)(n.filter((function(e){return e.path!==w}))||[]).concat([{path:w,prompt:t,cb:e}])})),d("user:ot:diverged",{path:w,divergence:t}),S(!0),z||P(w)}}):u.watchFile(w,{onChange:function(){},onMoveOrDelete:e}),p.current.set(w,!0)}}),[w,u,j,n,z,d]);var A,X,U=function(){var e=(0,r.Z)((function(e){return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return(0,s.j)(s.U3.FILE_RECONNECT_FALLBACK_CHOSEN,{choice:e}),(0,s.j)(s.U3.CONTENTS_DIVERGED_ACTION,{action:"local"===e?"client":"server"}),R(!0),[4,Promise.all(E.map((function(t){return G((function(e){var n=e.filter((function(e){return e.path!==t.path}));return 0===n.length?S(!1):P(n[0].path),n})),t.cb(e)})))];case 1:return t.sent(),R(!1),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),F=z?E.find((function(e){return e.path===z})):null,M=null===F||void 0===F?void 0:F.prompt,W=z,O=(0,l.J)({left:{code:null!==(A=null===M||void 0===M?void 0:M.localContent)&&void 0!==A?A:"",filePath:W},right:{code:null!==(X=null===M||void 0===M?void 0:M.remoteContent)&&void 0!==X?X:"",filePath:W}}),H=O.left,V=O.right;return{isConverging:T,didContentsDiverge:C,showMoreDetail:I,failedFiles:E,failedFilesOptions:N,selectedFile:z,setSelectedFile:P,reviewingPrompt:M,onChoice:U,local:H,remote:V}}},76832:function(e,t,n){n.d(t,{Z:function(){return l},f:function(){return a}});var r=n(67294),i=n(91131),o=n(16965),a=(0,i.cn)({current:null});function l(){var e=(0,o.Z)((0,i.Dv)(a));return(0,r.useCallback)((function(){var t,n;null===(t=e.current)||void 0===t||null===(n=t.current)||void 0===n||n.refresh()}),[e])}},53800:function(e,t,n){n.d(t,{Se:function(){return l},fK:function(){return o},kz:function(){return s}});var r=n(35944),i=n(67294);function o(e){var t=e.config;return{Icon:function(e){var n=e.pane,i=e.size,o=void 0===i?16:i,a=t[n.type].Icon;return(0,r.tZ)(a,{pane:n,size:o})},Content:function(e){var n=e.pane,i=e.options,o=t[n.type].Content;return(0,r.tZ)(o,{pane:n,options:i})},getTitle:function(e){return(0,t[e.type].getTitle)(e)},getActions:function(e){var n=t[e.type].getActions;if(n)return n(e)}}}var a=(0,i.createContext)(null);function l(){var e=(0,i.useContext)(a);if(!e)throw new Error("Expected PaneUI in context");return e}var s=a.Provider},28497:function(e,t,n){function r(e){var t=document.createElement("canvas"),n=t.getContext("2d");if(t.width=e.width,t.height=e.height,!n)throw new Error("failed to get canvas ctx");return{version:"1",width:e.width,height:e.height,palette:[[0,0,0,255],[255,255,255,255],[255,255,128,255],[255,128,255,255],[0,128,128,255],[128,0,255,255],[255,0,128,255],[0,255,255,255]],anims:{},frames:e.frames.map((function(r){var i=new window.ImageData(new Uint8ClampedArray(r.pixels),e.width,e.height);return n.putImageData(i,0,0),t.toDataURL()}))}}function i(e){return new Promise((function(t,n){var r=new window.Image;r.src=e,r.onload=function(){t(r)},r.onerror=n}))}function o(e){return new Promise((function(t,n){Promise.all(e.frames.map(i)).then((function(r){var i=document.createElement("canvas");i.width=e.width,i.height=e.height;var o=i.getContext("2d");if(o){var a=r.map((function(t){return o.drawImage(t,0,0),{pixels:Array.from(o.getImageData(0,0,e.width,e.height).data),width:e.width,height:e.height}}));t({frames:a,preview:e.frames[0],width:e.width,height:e.height})}else n(new Error("failed to get canvas ctx"))})).catch(n)}))}n.d(t,{C:function(){return r},u:function(){return o}})},22414:function(e,t,n){n.d(t,{D:function(){return g},$:function(){return b}});var r=n(14251),i=n(52875),o=n(35944),a=n(15902),l=n(77402),s=n(63736),c=n(11163),u=n.n(c),d=function(){return Boolean(u().query.embed||u().query.lite)},f=n(91131),p=n(67294),h=n(28217),m=n(2581),v=n(55183),g={Content:function(e){var t=e.pane,n=e.options;return(0,o.tZ)(Z,(0,i.Z)((0,r.Z)({},t.data),{isHidden:n.isHidden,replacePane:n.replacePane}))},Icon:function(e){var t=e.pane,n=e.size;return(0,o.tZ)(s.Z,{path:t.data.path||"",size:n})},getTitle:function(e){return e.data.path||"No file open"}},b=(0,f.cn)(null);function Z(e){var t=e.path,n=e.line,r=e.col,i=e.isHidden,s=e.replacePane,u=Boolean(t&&((0,l.V)(t)===l.D.Code||(0,l.V)(t)===l.D.Markdown)),g=(0,v.EI)(t,s),Z=function(e){var t=e.isHidden,n=(0,f.b9)(b);return(0,p.useEffect)((function(){t&&n(null)}),[n,t]),(0,p.useCallback)((function(e){n({focus:function(){e.focus()}})}),[n])}({isHidden:i}),y=(0,c.useRouter)(),x=!d()&&!(0,a.Vg)(y);return t&&u?(0,o.tZ)(f.zt,{scope:m.d8,children:(0,o.tZ)(v.ox.Provider,{value:g,children:(0,o.tZ)(h.Z,{filePath:t,onFocus:Z,autoFocus:x,deeplink:{line:n,col:r},hideMobileKeyboardToolbar:!0,replacePane:s},t)})}):null}},15606:function(e,t,n){n.d(t,{T:function(){return c}});var r=n(35944),i=(n(67294),n(53202)),o=n(60379),a=n(17467),l=n(75474),s=n(63377),c={Content:function(){var e=(0,s.Z)();return(0,r.BX)(o.G7,{css:[o.l0.py(32),o.l0.px(16)],children:[(0,r.tZ)(a.Z,{replId:e}),(0,r.tZ)(l.Z,{replId:e})]})},Icon:function(e){var t=e.size;return(0,r.tZ)(i.UserAdd,{size:t})},getTitle:function(){return"Multiplayer"}}},82947:function(e,t,n){n.d(t,{R:function(){return f},b:function(){return p}});var r=n(35944),i=n(9117),o=n(99408),a=n(34467),l=n(53249),s=n(91131),c=n(76832),u=n(47886),d=n(56483),f={Content:function(e){var t=e.options.isHidden,n=(0,o.Z)(),a=n.container,f=n.fs,h=n.session,m=n.runner,v=(0,s.Dv)(c.f),g=(0,c.Z)();return(0,u.Z)({container:a,runner:m,refreshWebView:g}),(0,d.Z)({runner:m,refreshWebView:g}),(0,i.x)(p,{run:function(){g()}}),(0,r.tZ)(l.Z,{fs:f,session:h,ref:v,isVisible:!t})},Icon:function(e){var t=e.size;return(0,r.tZ)(a.Z,{size:t})},getTitle:function(){return"Webview"}},p={cmdOrCtrlKey:!0,altKey:!1,shiftKey:!1,key:"S"}},62718:function(e,t,n){n.d(t,{U:function(){return wm}});var r=n(35944),i=n(67294),o=n(67573),a=n(9941),l=n(57263),s=n(18757),c=n(87603),u=n.n(c),d=n(24561),f=n(32027),p=n(60379);function h(e){var t=e.preventHighlightBorder,n=(0,f.Z)();return(0,r.BX)("div",{className:u().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])+" loader",children:[(0,r.tZ)("div",{className:u().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])+" wrap",children:(0,r.BX)(d.ZP,{backgroundColor:p.TV.backgroundHighest,foregroundColor:p.TV.backgroundHigher,uniqueKey:"editorLoader",children:[(0,r.tZ)("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"70",height:"10",className:u().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"80",y:"0",rx:"3",ry:"3",width:"100",height:"10",className:u().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"190",y:"0",rx:"3",ry:"3",width:"10",height:"10",className:u().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"15",y:"20",rx:"3",ry:"3",width:"130",height:"10",className:u().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"155",y:"20",rx:"3",ry:"3",width:"130",height:"10",className:u().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"15",y:"40",rx:"3",ry:"3",width:"90",height:"10",className:u().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"115",y:"40",rx:"3",ry:"3",width:"60",height:"10",className:u().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"185",y:"40",rx:"3",ry:"3",width:"60",height:"10",className:u().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"0",y:"60",rx:"3",ry:"3",width:"30",height:"10",className:u().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"15",y:"80",rx:"3",ry:"3",width:"70",height:"10",className:u().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"95",y:"80",rx:"3",ry:"3",width:"60",height:"10",className:u().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"165",y:"80",rx:"3",ry:"3",width:"30",height:"10",className:u().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"15",y:"100",rx:"3",ry:"3",width:"110",height:"10",className:u().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"135",y:"100",rx:"3",ry:"3",width:"100",height:"10",className:u().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"0",y:"120",rx:"3",ry:"3",width:"70",height:"10",className:u().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])})]})}),(0,r.tZ)(u(),{id:"b8bdeb39d1178985",dynamic:[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"],children:".loader.__jsx-style-dynamic-selector{z-index:3;height:100%;width:100%;background-color:var(--background-default);overflow:hidden;padding:var(--space-16);-webkit-border-bottom-right-radius:var(--border-radius-4);-moz-border-radius-bottomright:var(--border-radius-4);border-bottom-right-radius:var(--border-radius-4);-webkit-border-bottom-left-radius:var(--border-radius-4);-moz-border-radius-bottomleft:var(--border-radius-4);border-bottom-left-radius:var(--border-radius-4);-webkit-box-shadow:".concat(n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)",";-moz-box-shadow:").concat(n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)",";box-shadow:").concat(n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)","}.wrap.__jsx-style-dynamic-selector{overflow:hidden}.wrap.__jsx-style-dynamic-selector>svg{max-width:640px;min-width:500px;height:auto}@media screen and (min-width:900px){.loader.__jsx-style-dynamic-selector{padding:30px}}")})]})}var m=n(65915),v=n(99408);n(24351);function g(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,v.Z)().session,n=(0,a.Z)(i.useState(t.getCursorPosition()),2),r=n[0],o=n[1];return i.useEffect((function(){if(!e)return o(t.getCursorPosition()),t.onCursorPositionChanged(o)}),[t,e]),r}var b=n(96189),Z=n(93096),y=n.n(Z),x=n(48551),w=n(66681),k=n(65456),C=n(40381),S=y()((function(e){e.scrollIntoView({behavior:"smooth",block:"center"})}),100),_=i.memo(w.Z);function T(){var e=(0,v.Z)().fs,t=(0,v.Z)().session,n=(0,a.Z)(i.useState(!1),2),s=n[0],c=n[1],u=(0,C.Z)(),d=(0,m.Z)(),f=g(u!==d),Z=i.useRef(null),y=(0,b.Z)((function(){c(!0),Z.current&&clearTimeout(Z.current),Z.current=setTimeout((function(){c(!1)}),150)}),{type:"throttle",wait:37.5});i.useLayoutEffect((function(){if(!s&&u===d){var e=document.querySelectorAll(".rendered-markdown [data-sourcepos]"),t=Array.from(e).reverse();if(t){var n=f.lineNumber,r=f.column,i=!0,o=!1,l=void 0;try{for(var c,p=t[Symbol.iterator]();!(i=(c=p.next()).done);i=!0){var h=c.value,m=h.dataset.sourcepos;if(!m)throw new Error("Expected data source pos on selected element");var v=(0,a.Z)(m.split("-"),2),g=v[0],b=v[1],Z=(0,a.Z)(g.split(":").map(Number),2),y=Z[0],x=Z[1],w=(0,a.Z)(b.split(":").map(Number),2),k=w[0],C=w[1];if(n>=y&&r>=x&&(n<k||n===k&&r<=C))return void S(h)}}catch(_){o=!0,l=_}finally{try{i||null==p.return||p.return()}finally{if(o)throw l}}}}}),[f,s,u,d]);var w=(0,a.Z)(i.useState(null),2),T=w[0],B=w[1];return i.useEffect((function(){if(B(null),d&&(0,x.Mb)(d))return e.watchTextFile(d,{onReady:function(e){var t=e.initialContent;B(t.toString())},onChange:function(e){var t=e.latestContent;B(t)},onMoveOrDelete:function(e){e.eventType===k.kS.Delete&&t.setPreviewedFile(null)}})}),[d,e,t]),d?null===T?(0,r.tZ)(h,{preventHighlightBorder:!0}):(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8),p.l0.height("100%"),p.l0.width("100%"),p.l0.overflow("auto"),p.l0.backgroundColor.backgroundDefault,p.l0.zIndex(2),p.l0.align.center,p.l0.py(16),p.l0.px(16),(0,o.Z)({margin:"0 auto"},"@media only screen and (min-width: ".concat(l.j.tabletMin,"px)"),p.l0.px(32))],innerRef:y,children:[(0,r.tZ)(p.G7,{css:[p.l0.rowWithGap(0),p.l0.height(30),p.l0.width("100%"),p.l0.justify.spaceBetween,p.l0.align.center,p.l0.backgroundColor.backgroundDefault],children:(0,r.tZ)(R,{})}),(0,r.tZ)(p.G7,{css:[p.l0.width("100%"),{"& .rendered-markdown":[p.l0.flex.column,p.l0.center],"& .rendered-markdown > *":[p.l0.maxWidth(840),p.l0.width("100%")],"& .rendered-markdown > table":p.l0.maxWidth("100%")}],children:(0,r.tZ)(_,{path:d,source:T,fs:e,sourcePos:!0})})]}):(0,r.tZ)(p.G7,{css:[p.l0.height("100%"),p.l0.width("100%"),p.l0.center],children:(0,r.tZ)(p.xv,{children:"No previewed file"})})}var R=function(){var e=(0,m.Z)();return(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(2),p.l0.color.foregroundDimmer,p.l0.width("calc(100% - ".concat(p.TV.space16,")")),p.l0.align.center],children:[(0,r.tZ)(s.Z,{}),(0,r.BX)(p.xv,{css:p.l0.m(4),color:"dimmer",children:["Preview of ",(0,r.tZ)("a",{href:"#".concat(e),children:e})]})]})},B=n(34079),E={Content:function(){return(0,r.tZ)(T,{})},Icon:function(e){var t=e.size;return(0,r.tZ)(B.Z,{size:t})},getTitle:function(){return"Markdown"}},G=n(26451),D=n(25582),I=n(76476),j={Content:function(){return(0,r.tZ)(N,{})},Icon:function(e){var t=e.size;return(0,r.tZ)(G.Z,{size:t})},getTitle:function(){return"Files"}};function N(){var e=(0,I.p)();return(0,r.tZ)(D.Z,{filetreeApi:e})}var L=n(22414),z=n(61622),P=n(71530),A=n(68122),X=n(63805),U={Content:function(e){var t=e.options;return(0,r.tZ)(F,{visible:!t.isHidden})},Icon:function(e){var t=e.size;return(0,r.tZ)(P.Z,{size:t})},getTitle:function(){return"Console"}};function F(e){var t=e.visible,n=(0,v.Z)(),o=n.session,a=n.runner,l=n.packager,s=n.container,c=n.debuggest,u=i.useRef(null),d=(0,A.Z)(c.mainClient);return i.useEffect((function(){if(d)return d.onOutput((function(e){u.current&&u.current.write(e)}))}),[d]),i.useEffect((function(){var e=o.onTerminalClear((function(){u.current&&u.current.clear()})),t=o.onTerminalWrite((function(e){u.current&&u.current.write(e)}));return function(){e(),t()}}),[o]),i.useEffect((function(){t&&u.current&&u.current.focus()}),[t]),i.useEffect((function(){if(!(0,X.isMobile)())return a.onLocalRun((function(){var e,t;null===(e=u.current)||void 0===e||e.clear(),null===(t=u.current)||void 0===t||t.focus()}))}),[a]),"html"===a.mode?null:(0,r.tZ)(z.Z,{runner:a,debugClient:d,packager:l,ref:u,onBootStatus:s.client().onBootStatus})}var M=n(79985),W=n(30019),O=n(87514),H=n(54992);function V(e){var t=e.children;return(0,r.tZ)(p.G7,{css:[p.l0.height("100%"),p.l0.overflowY("auto"),H.F3],children:(0,r.BX)(p.G7,{css:[p.l0.p(8),p.l0.colWithGap(8),p.l0.flex.grow(1)],children:[(0,r.BX)(p.G7,{css:p.l0.colWithGap(4),children:[(0,r.BX)(p.G7,{css:[p.l0.flex.row,p.l0.justify.spaceBetween,p.l0.flex.wrap],children:[(0,r.tZ)(W.Z,{truncate:!0,level:4,children:"Secrets"}),(0,r.tZ)(p.ZP,{iconLeft:(0,r.tZ)(O.Z,{}),href:"https://docs.replit.com/programming-ide/storing-sensitive-information-environment-variables",small:!0,text:"Docs",target:"_blank"})]}),(0,r.tZ)(p.xv,{variant:"small",color:"dimmer",children:"System environment variables."})]}),(0,r.tZ)(p.G7,{css:[p.l0.flex.grow(1),p.l0.py(8),p.l0.position.relative],children:t})]})})}var q=n(82893),$={Content:function(){return(0,r.tZ)(Y,{})},Icon:function(e){var t=e.size;return(0,r.tZ)(q.Z,{size:t})},getTitle:function(){return"Secrets"}};function Y(){var e=(0,v.Z)().fs,t=(0,C.Z)();return(0,r.tZ)(V,{children:(0,r.tZ)(M.Z,{readRawEnv:function(){return e.readFile(".env")},writeRawEnv:function(t){return e.writeFile(".env",t)},activeFile:t})})}var K=n(54060),J=n(42844),Q={Content:function(){return(0,r.BX)(p.G7,{css:[p.l0.overflow("auto"),H.F3],children:[(0,r.tZ)(p.h4,{variant:"subheadBig",level:3,css:[p.l0.p(8)],children:"Settings"}),(0,r.tZ)(K.Z,{css:[{backgroundColor:"transparent"}]})]})},Icon:function(e){var t=e.size;return(0,r.tZ)(J.Z,{size:t})},getTitle:function(){return"Settings"}},ee=n(22942),te=n(62944),ne={Content:function(){return(0,r.BX)(p.G7,{css:H.F3,children:[(0,r.tZ)(p.h4,{variant:"subheadBig",level:3,css:[p.l0.p(8)],children:"Packages"}),(0,r.tZ)(ee.Z,{})]})},Icon:function(e){var t=e.size;return(0,r.tZ)(te.Z,{size:t})},getTitle:function(){return"Packages"}},re=n(1557),ie=n(69779),oe=n(26473),ae=n(14251),le=n(32692),se=n(31230),ce=n(37887);function ue(){var e=(0,le.Z)(["\n  fragment DatabaseUsage on Database {\n    id\n    keysCount\n    sizeMB\n  }\n"]);return ue=function(){return e},e}function de(){var e=(0,le.Z)(["\n  query Database($replID: String!) {\n    repl(id: $replID) {\n      ... on Repl {\n        id\n        database {\n          id\n          ...DatabaseUsage\n        }\n      }\n    }\n    currentUser {\n      id\n      isLoggedIn\n    }\n  }\n  ","\n"]);return de=function(){return e},e}var fe={},pe=(0,se.Ps)(ue()),he=(0,se.Ps)(de(),pe);var me=n(77365),ve=n(79500),ge=n(63377),be=n(91513),Ze=n(41034),ye=n(9517);function xe(e){var t,n,i,o,a=e.activeFile,l=function(e){var t=(0,ae.Z)({},fe,e);return ce.a(he,t)}({variables:{replID:(0,ge.Z)()},pollInterval:1e4}),s=l.data,c=l.error,u=l.loading;s&&("Repl"===s.repl.__typename?i=null===s||void 0===s||null===(o=s.repl)||void 0===o?void 0:o.database:n="Could not fetch Database info");c&&("GraphQL error: You don't have access to this database"===c.message?i=null:n=c.message);var d=null===s||void 0===s||null===(t=s.currentUser)||void 0===t?void 0:t.isLoggedIn;return(0,r.BX)(p.G7,{css:[p.l0.colWithGap(16),p.l0.backgroundColor.backgroundDefault,p.l0.p(8),p.l0.borderRadius(0,4,4,0),H.F3],children:[(0,r.tZ)(p.h4,{level:2,variant:"subheadBig",children:"Database"}),(0,r.tZ)(p.G7,{css:[p.l0.colWithGap(16),{overflowY:"auto",width:"100%",flex:"1"}],children:d?(0,r.BX)(r.HY,{children:[(0,r.BX)(p.xv,{multiline:!0,children:[(0,r.tZ)("a",{href:"https://docs.replit.com/hosting/database-faq",target:"_blank",rel:"noopener",css:[p.l0.color.accentPrimaryStronger,p.l0.pr(4)],children:"Replit Database"}),"is an easy to use key-value store."]}),n&&(0,r.tZ)(p.xv,{multiline:!0,css:[p.l0.color.accentNegativeStronger],children:n}),(i||u)&&(0,r.tZ)(p.G7,{css:[p.l0.pb(16)],children:(0,r.tZ)(we,{database:i,loading:u})}),!u&&(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8)],children:[(0,r.tZ)(p.xv,{variant:"small",css:{textTransform:"uppercase",fontWeight:p.TV.fontWeightMedium},children:"commands"}),(0,r.tZ)(ke,{activeFile:a})]})]}):(0,r.tZ)(De,{})})]})}var we=function(e){var t=e.database;if(e.loading)return(0,r.tZ)(me.Z,{style:{margin:"10px auto",width:"35px",height:"35px"}});if(!t)return null;var n=t.sizeMB||0,i="MB";return n<1&&(n*=1e3,i="KB"),(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8)],children:[(0,r.tZ)(p.xv,{variant:"small",css:{textTransform:"uppercase",fontWeight:p.TV.fontWeightMedium},children:"storage"}),(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(4)],children:[(0,r.BX)(p.xv,{color:"dimmer",children:[n.toFixed(2)," ",i]}),(0,r.tZ)(p.xv,{color:"dimmer",children:"|"}),(0,r.tZ)(p.xv,{color:"dimmer",children:"".concat(t.keysCount||0," ").concat(1===t.keysCount?"key":"keys")})]})]})},ke=function(e){var t=e.activeFile,n=(0,r.tZ)(Ge,{activeFile:t});if(t)switch((0,x.r6)(t)){case"go":n=(0,r.tZ)(Ee,{examples:Re,activeFile:t});break;case"js":case"ts":case"tsx":case"jsx":case"mjs":n=(0,r.tZ)(Ee,{examples:Be,activeFile:t});break;case"py":n=(0,r.tZ)(Ee,{examples:Te,activeFile:t})}return(0,r.tZ)(p.G7,{css:[p.l0.colWithGap(8)],children:n})},Ce=function(e){var t=e.title,n=e.content,o=e.activeFile,l=(0,a.Z)(i.useState(n),2),s=l[0],c=l[1],u=(0,a.Z)(function(){var e=t.split(" ");return[e[0],e.slice(1).join(" ")]}(),2),d=u[0],f=u[1];return(0,r.BX)(p.G7,{css:[p.l0.colWithGap(4)],children:[(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(4)],children:[(0,r.tZ)(p.xv,{css:{fontWeight:p.TV.fontWeightMedium},children:d}),(0,r.tZ)(p.xv,{color:"dimmer",children:f})]}),(0,r.BX)(p.G7,{css:[p.l0.colWithGap(4),{width:"fit-content"}],children:[(0,r.tZ)(p.G7,{css:[p.l0.rowWithGap(4),p.l0.backgroundColor.backgroundRoot,p.l0.borderRadius(4),p.l0.p(4),p.l0.align.center],children:n.map((function(e,n){return"input"===e.type?(0,r.tZ)(p.II,{onChange:function(e){var t=(0,ie.Z)(s);t[n].value=e.target.value,c(t)},placeholder:e.placeholder,value:e.value||"",css:[p.l0.width(64),p.l0.height(24),p.l0.zIndex(1)]},"".concat(t,"-").concat(n)):(0,r.tZ)(p.G7,{css:[p.l0.borderRadius(4),p.l0.backgroundColor.backgroundRoot],children:(0,r.tZ)(p.xv,{css:[p.l0.font.code,p.l0.color.greyStronger,p.l0.p(4)],children:e.value})},"".concat(t,"-").concat(n))}))}),(0,r.tZ)(Se,{code:s.reduce((function(e,t){return"input"===t.type?e+(t.value||t.placeholder):e+t.value}),""),activeFile:o})]})]})},Se=function(e){var t=e.code,n=e.activeFile,i=(0,be.Z)(n);return i?(0,r.tZ)(p.Tg,{background:"default",children:(0,r.tZ)(p.zx,{small:!0,outlined:!0,onClick:function(){i({code:t})},text:"Insert",iconRight:(0,r.tZ)(ye.Z,{}),css:{width:"fit-content"}})}):(0,r.tZ)(p.Tg,{background:"default",children:(0,r.tZ)(p.zx,{small:!0,outlined:!0,onClick:function(){return(0,ve.Z)(t)},text:"Copy",iconLeft:(0,r.tZ)(Ze.Z,{}),css:{width:"fit-content"}})})},_e=[{title:"Set a key to a value",content:[{type:"code",value:"curl $REPLIT_DB_URL -d '"},{type:"input",placeholder:"key"},{type:"code",value:"="},{type:"input",placeholder:"value"},{type:"code",value:"'"}]},{title:"Get a key's value",content:[{type:"code",value:"curl $REPLIT_DB_URL/"},{type:"input",placeholder:"key"}]},{title:"Delete a key",content:[{type:"code",value:"curl -XDELETE $REPLIT_DB_URL/"},{type:"input",placeholder:"key"}]},{title:"List all keys",content:[{type:"code",value:'curl "$REPLIT_DB_URL?prefix='},{type:"input",placeholder:"key"},{type:"code",value:'"'}]}],Te=[{title:"Import the database",content:[{type:"code",value:"from replit import db"}]},{title:"Set a key to a value",content:[{type:"code",value:'db["'},{type:"input",placeholder:"key"},{type:"code",value:'"] = "'},{type:"input",placeholder:"value"},{type:"code",value:'"'}]},{title:"Get a key's value",content:[{type:"code",value:'value = db["'},{type:"input",placeholder:"key"},{type:"code",value:'"]'}]},{title:"Delete a key",content:[{type:"code",value:'del db["'},{type:"input",placeholder:"key"},{type:"code",value:'"]'}]},{title:"List all keys",content:[{type:"code",value:"keys = db.keys()"}]},{title:"List keys with a prefix",content:[{type:"code",value:'matches = db.prefix("'},{type:"input",placeholder:"prefix"},{type:"code",value:'")'}]}],Re=[{title:"Import the database",content:[{type:"code",value:'import "github.com/replit/database-go"'}]},{title:"Set a key to a value",content:[{type:"code",value:'database.Set("'},{type:"input",placeholder:"key"},{type:"code",value:'", "'},{type:"input",placeholder:"value"},{type:"code",value:'")'}]},{title:"Get a key's value",content:[{type:"code",value:'value, _ := database.Get("'},{type:"input",placeholder:"key"},{type:"code",value:'")'}]},{title:"Delete a key",content:[{type:"code",value:'database.Delete("'},{type:"input",placeholder:"key"},{type:"code",value:'")'}]},{title:"List all keys",content:[{type:"code",value:'keys, _ := database.ListKeys("")'}]},{title:"List keys with a prefix",content:[{type:"code",value:"matches, _ := database.ListKeys("},{type:"input",placeholder:"prefix"},{type:"code",value:'")'}]}],Be=[{title:"Import the database",content:[{type:"code",value:'const Database = require("@replit/database")'}]},{title:"Create a new database",content:[{type:"code",value:"const db = new Database()"}]},{title:"Set a key to a value",content:[{type:"code",value:'db.set("'},{type:"input",placeholder:"key"},{type:"code",value:'", "'},{type:"input",placeholder:"value"},{type:"code",value:'").then(() => {});'}]},{title:"Get a key's value",content:[{type:"code",value:'db.get("'},{type:"input",placeholder:"key"},{type:"code",value:'").then(value => {});'}]},{title:"Delete a key",content:[{type:"code",value:'db.delete("'},{type:"input",placeholder:"key"},{type:"code",value:'").then(() => {});'}]},{title:"List all keys",content:[{type:"code",value:"db.list().then(keys => {});"}]},{title:"List keys with a prefix",content:[{type:"code",value:'db.list("'},{type:"input",placeholder:"prefix"},{type:"code",value:'").then(matches => {});'}]}],Ee=function(e){var t=e.examples,n=e.activeFile;return(0,r.tZ)(p.G7,{css:[p.l0.colWithGap(24)],children:t.map((function(e,t){return(0,r.tZ)(Ce,{title:e.title,content:e.content,activeFile:n},t)}))})},Ge=function(e){var t=e.activeFile;return(0,r.tZ)(r.HY,{children:(0,r.BX)(p.G7,{css:[p.l0.colWithGap(24)],children:[(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(4),{flexWrap:"wrap"}],children:[(0,r.tZ)(p.xv,{color:"dimmer",multiline:!0,children:"We\u2019ve set an environment variable called"}),(0,r.tZ)(p.G7,{css:[p.l0.borderRadius(4),p.l0.backgroundColor.backgroundRoot],children:(0,r.tZ)(p.xv,{css:[p.l0.font.code,p.l0.color.greyStronger,p.l0.p(4)],children:"REPLIT_DB_URL"})}),(0,r.tZ)(p.xv,{color:"dimmer",multiline:!0,children:"in your Repl."})]}),_e.map((function(e,n){return(0,r.tZ)(Ce,{title:e.title,content:e.content,activeFile:t},n)})),(0,r.tZ)(p.xv,{color:"dimmer",multiline:!0,children:"You can use the Database from any Repl by making HTTP requests similar to those above. We have language clients for Python, Go, and Node, switch to a file that uses that language to see how to use the client."})]})})},De=function(){return(0,r.BX)(p.G7,{css:[p.l0.colWithGap(16)],children:[(0,r.BX)(p.xv,{multiline:!0,children:[(0,r.tZ)("a",{href:"https://docs.replit.com/hosting/database-faq",target:"_blank",rel:"noopener",css:[p.l0.color.accentPrimaryStronger,p.l0.pr(4)],children:"Replit Database"}),"is the fastest and easiest way to store data from your Repl. Try it out by logging in or signing up."]}),(0,r.tZ)(p.ZP,{href:"/signup",colorway:"primary",text:"Sign up",iconLeft:(0,r.tZ)(oe.Z,{})})]})},Ie={Content:function(){var e=(0,C.Z)();return(0,r.tZ)(xe,{activeFile:e})},Icon:function(e){var t=e.size;return(0,r.tZ)(re.Z,{size:t})},getTitle:function(){return"Database"}},je=n(34727),Ne=n(70655),Le=n(50319);function ze(){var e=(0,le.Z)(["\n  mutation CreateNeonDatabase($input: CreateNeonDatabaseInput!) {\n    createNeonDatabase(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on CreateNeonDatabaseResult {\n        databaseId\n        databaseName\n        projectId\n        connectionString\n        isFrozen\n      }\n    }\n  }\n"]);return ze=function(){return e},e}function Pe(){var e=(0,le.Z)(["\n  mutation DeleteNeonDatabase($input: DeleteNeonDatabaseInput!) {\n    deleteNeonDatabase(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on DeleteNeonDatabaseResult {\n        success\n      }\n    }\n  }\n"]);return Pe=function(){return e},e}function Ae(){var e=(0,le.Z)(["\n  query GetNeonDatabases($input: GetNeonDatabasesInput!) {\n    getNeonDatabases(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on GetNeonDatabasesResult {\n        databases {\n          databaseId\n          databaseName\n          projectId\n          connectionString\n          isFrozen\n        }\n      }\n    }\n  }\n"]);return Ae=function(){return e},e}var Xe={},Ue=(0,se.Ps)(ze());var Fe=(0,se.Ps)(Pe());var Me=(0,se.Ps)(Ae());var We=n(93058),Oe=n(57704),He=n(70917),Ve=n(30922),qe=n(88075),$e=n(14456),Ye=n(73935),Ke=n(59006),Je=n(69355),Qe=n(21390),et=n(78120),tt=n(52875),nt=n(92125),rt=n(30551),it=n(83952),ot=n(65812),at={"td,th":{border:"1px solid "+p.TV.outlineDefault}},lt={"td,th":{paddingLeft:8,paddingTop:8,paddingBottom:8,paddingRight:8,whiteSpace:"nowrap"},"td:first-of-type,th:first-of-type":{paddingLeft:8}},st={outline:"2px solid ".concat(p.TV.accentPrimaryDefault),outlineOffset:"-2px"},ct=(0,He.iv)({":focus:focus-visible":st}),ut=(0,He.iv)(st),dt=(0,He.iv)([lt,at,ct]),ft=(0,He.iv)([p.l0.fontWeight.medium,lt,at,ct]),pt=(0,He.iv)({"tbody > tr:hover":{backgroundColor:p.TV.backgroundHigher,cursor:"pointer"}});function ht(e){var t=e.type,n=e.style,i=e.children,o=(0,nt.LA)().rowGroupProps;return(0,r.tZ)(t,(0,tt.Z)((0,ae.Z)({},o),{style:n,children:i}))}function mt(e){var t=e.item,n=e.state,o=e.children,a=(0,i.useRef)(null),l=(0,nt.Qm)({node:t},n,a).rowProps;return(0,r.tZ)("tr",(0,tt.Z)((0,ae.Z)({css:ft},l),{ref:a,children:o}))}function vt(e){var t,n=e.column,o=e.state,a=(0,i.useRef)(null),l=(0,nt.WY)({node:n},o,a).columnHeaderProps,s=(0,rt.Fx)(),c=s.isFocusVisible,u=s.focusProps;return(0,r.tZ)("th",(0,tt.Z)((0,ae.Z)({},(0,it.dG)(l,u)),{css:[c&&ut,ct],colSpan:n.colspan,style:{textAlign:(null!==(t=n.colspan)&&void 0!==t?t:1)>1?"center":"left"},ref:a,children:n.rendered}))}function gt(e){var t=e.item,n=e.children,o=e.state,a=(0,i.useRef)(null),l=(0,nt.U)({node:t},o,a).rowProps,s=(0,rt.Fx)(),c=s.isFocusVisible,u=s.focusProps;return(0,r.tZ)("tr",(0,tt.Z)((0,ae.Z)({css:[c&&ut,dt]},(0,it.dG)(l,u)),{ref:a,children:n}))}function bt(e){var t=e.cell,n=e.state,o=(0,i.useRef)(null),a=(0,nt.fs)({node:t},n,o).gridCellProps,l=(0,rt.Fx)(),s=l.isFocusVisible,c=l.focusProps;return(0,r.tZ)("td",(0,tt.Z)((0,ae.Z)({},(0,it.dG)(a,c)),{css:[s&&ut,ct],ref:o,children:t.rendered}))}function Zt(e){var t=e.selectionMode,n=e.selectionBehavior,o=(0,ot.oy)((0,tt.Z)((0,ae.Z)({},e),{showSelectionCheckboxes:"multiple"===t&&"replace"!==n})),a=(0,i.useRef)(null),l=o.collection,s=(0,nt.x6)(e,o,a).gridProps;return(0,r.BX)("table",(0,tt.Z)((0,ae.Z)({},s),{ref:a,css:[(null===e||void 0===e?void 0:e.onRowAction)&&pt],style:{borderCollapse:"collapse"},children:[(0,r.tZ)(ht,{type:"thead",children:l.headerRows.map((function(e){return(0,r.tZ)(mt,{item:e,state:o,children:(0,ie.Z)(e.childNodes).map((function(e){return(0,r.tZ)(vt,{column:e,state:o},e.key)}))},e.key)}))}),(0,r.tZ)(ht,{type:"tbody",children:(0,ie.Z)(l.body.childNodes).map((function(e){return(0,r.tZ)(gt,{item:e,state:o,children:(0,ie.Z)(e.childNodes).map((function(e){return(0,r.tZ)(bt,{cell:e,state:o},e.key)}))},e.key)}))})]}))}var yt=function(e){var t=e.ariaTableProps,n=e.rows,i=e.columns;return(0,r.BX)(Zt,(0,tt.Z)((0,ae.Z)({},t),{children:[(0,r.tZ)(ot.xD,{columns:i,children:function(e){return(0,r.tZ)(ot.sg,{children:e.value})}}),(0,r.tZ)(ot.RM,{items:n,children:function(e){return(0,r.tZ)(ot.X2,{children:function(t){return(0,r.tZ)(ot.bL,{children:e[t]})}})}})]}))};function xt(e){var t=e.headerColumns,n=e.bodyData,i=e.ariaLabel,o=void 0===i?"Database Table":i,a=e.scrollRef,l=e.onRowAction,s=t.map((function(e,t){return{key:"string"===typeof e?e:"".concat(t),value:e}})),c=n.map((function(e,n){for(var r={id:n},i=0;i<e.length;i++){var o=t[i];r["string"===typeof o?o:"".concat(i)]=e[i]}return r}));return(0,r.tZ)(yt,{ariaTableProps:{selectionMode:"none","aria-label":o,onRowAction:l,scrollRef:a},columns:s,rows:c})}var wt=function(e,t){var n=(0,v.Z)().psql,r=(0,a.Z)(i.useState(),2),o=r[0],l=r[1],s=(0,a.Z)(i.useState(!1),2),c=s[0],u=s[1];return i.useEffect((function(){function r(){return(r=(0,je.Z)((function(){var r;return(0,Ne.__generator)(this,(function(i){switch(i.label){case 0:if(!e)return[2];i.label=1;case 1:return i.trys.push([1,,3,4]),u(!0),[4,n.run({query:e,connectionString:t})];case 2:return r=i.sent(),l(r),[3,4];case 3:return u(!1),[7];case 4:return[2]}}))}))).apply(this,arguments)}!function(){r.apply(this,arguments)}()}),[t,n,e]),{data:o,loading:c}},kt=function(e){var t=e.rows,n=e.columns;return!Array.isArray(t)||t.length<1?null:{headerColumns:null!==n&&void 0!==n?n:[],bodyData:t.map((function(e){return Object.values(e)}))}},Ct=n(91131),St=function(e){var t=e.connectionString;return wt("SELECT n.nspname as \"Schema\",\n  c.relname as \"Name\",\n  CASE c.relkind WHEN 'r' THEN 'table' WHEN 'v' THEN 'view' WHEN 'm' THEN 'materialized view' WHEN 'i' THEN 'index' WHEN 'S' THEN 'sequence' WHEN 's' THEN 'special' WHEN 'f' THEN 'foreign table' WHEN 'p' THEN 'partitioned table' WHEN 'I' THEN 'partitioned index' END as \"Type\",\n  pg_catalog.pg_get_userbyid(c.relowner) as \"Owner\",\n  pg_catalog.pg_size_pretty(pg_catalog.pg_table_size(c.oid)) as \"Size\",\n  pg_catalog.obj_description(c.oid, 'pg_class') as \"Description\"\nFROM pg_catalog.pg_class c\n     LEFT JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace\nWHERE c.relkind IN ('r','p','v','m','S','f','')\n      AND n.nspname <> 'pg_catalog'\n      AND n.nspname <> 'information_schema'\n      AND n.nspname !~ '^pg_toast'\n  AND pg_catalog.pg_table_is_visible(c.oid)\nORDER BY 1,2;",t)},_t=(0,Ct.cn)(void 0),Tt=(0,Ct.cn)((function(e){var t=e(_t);return null===t||void 0===t?void 0:t.rows.reduce((function(e,t){var n=t.table_name,r=t.column_name;return e[n]||(e[n]=[]),e[n].push(r),e}),{})})),Rt=n(40403),Bt=n(38630),Et=function(e){var t=e.headerTitle,n=e.onGoBack,i=e.children;return(0,r.BX)(p.G7,{css:[p.l0.flex.column,p.l0.height("100%")],children:[(0,r.BX)(p.G7,{css:[p.l0.flex.row,p.l0.py(16),p.l0.px(8),p.l0.align.center],children:[(0,r.tZ)(p.hU,{alt:"Go back",size:28,type:"button",onClick:n,children:(0,r.tZ)(Bt.Z,{})}),(0,r.tZ)(p.xv,{css:[p.l0.fontSize(16),p.l0.ml(8)],children:t})]}),(0,r.tZ)(p.G7,{css:[p.l0.overflow("auto"),p.l0.height("calc(100% - 60px)")],children:i})]})},Gt=n(60977),Dt=function(e){(0,Gt.j)(Gt.U3.DATABASE_USED,(0,ae.Z)({type:"PostgreSQL",provider:"neon"},e))},It=(0,Ct.cn)(["databaseManager"]),jt=(0,Ct.cn)(null,(function(e,t,n){var r=e(It);t(It,(0,ie.Z)(r).concat([n])),Dt({action:"pageNav",databasePage:n})})),Nt=(0,Ct.cn)(null,(function(e,t){var n=e(It);t(It,n.slice(0,n.length-1))})),Lt=(0,Ct.cn)((function(e){var t=e(It);return t[t.length-1]})),zt=function(){return(0,Ct.b9)(jt)},Pt=function(){return(0,Ct.b9)(Nt)},At=n(86503),Xt=n(90160),Ut=(0,Ct.cn)(""),Ft=(0,Ct.cn)(null),Mt=(0,Ct.cn)(null,(function(e,t,n){var r=n.query;r&&t(Ut,r);var i=e(Ft);i&&i.dispatch({changes:{from:0,to:i.state.doc.length,insert:r}})})),Wt=n(71171),Ot=n.n(Wt),Ht=n(18172),Vt=n(64824),qt=(0,Vt.O4)("replDatabasesQueryHistory",[]),$t=function(e,t){return!e.isPinned&&t.isPinned?1:e.isPinned&&!t.isPinned?-1:"number"===typeof e.pinnedTimestamp&&"number"===typeof t.pinnedTimestamp?e.pinnedTimestamp-t.pinnedTimestamp:t.timestamp-e.timestamp},Yt=function(){return(0,Vt.lV)(i.useCallback((function(e,t,n){if(n){var r={id:Ot()(),data:n,timestamp:Date.now()},i=e(qt),o=(0,Ht.ZP)(i,(function(e){!function(e,t){var n=e.findIndex((function(e){return!e.isPinned&&e.data===t.data}));-1!==n?e.splice(n,1,t):e.push(t),e.sort($t);var r=e.filter((function(e){return!e.isPinned})).length;if(r>=5){var i=r-5;e.splice(e.length-i,i)}}(e,r)}));t(qt,o)}}),[]))},Kt=n(7756),Jt=n(55100),Qt=n(43476),en=function(e){var t=e.id,n=e.data,o=e.isPinned,a=function(e){return(0,Vt.lV)(i.useCallback((function(t,n){var r=t(qt).find((function(t){return t.id===e})),i=(null===r||void 0===r?void 0:r.data)||"";i&&(n(Mt,{query:i}),Dt({action:"queryHistoryItemSelected"}))}),[e]))}(t),l=function(e){return(0,Vt.lV)(i.useCallback((function(t,n){var r=t(qt),i=(0,Ht.ZP)(r,(function(t){var n=t.find((function(t){return t.id===e}));n&&(n.isPinned=!n.isPinned,n.isPinned?n.pinnedTimestamp=Date.now():n.pinnedTimestamp=void 0),t.sort($t)}));n(qt,i),Dt({action:"queryHistoryItemPinned"})}),[e]))}(t);return(0,r.BX)(p.G7,{css:[{borderTop:"1px solid ".concat(p.TV.outlineDefault),":hover":{background:p.TV.backgroundHigher}},p.l0.flex.row,p.l0.p(8),p.l0.color.foregroundDimmer,p.l0.align.center,p.l0.cursor.pointer],onClick:a,children:[(0,r.tZ)(p.xv,{css:[p.l0.flex.growAndShrink(1)],children:n}),(0,r.tZ)(p.hU,{alt:"Pin query",onClick:l,children:o?(0,r.tZ)(Qt.Z,{fill:p.TV.accentPrimaryDefault}):(0,r.tZ)(Xt.Z,{})})]})},tn=function(){var e=(0,Ct.Dv)(qt);return(0,r.tZ)(p.Qd,{headerContent:(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(8),p.l0.align.center,p.l0.p(2)],children:[(0,r.tZ)(Rt.Z,{}),(0,r.tZ)(p.xv,{css:[p.l0.color.foregroundDimmest],children:"Query History"})]}),children:(0,r.tZ)(p.G7,{css:[p.l0.colWithGap(8),p.l0.height("100%")],children:0===e.length?(0,r.tZ)(p.G7,{css:[p.l0.p(8)],children:(0,r.tZ)(p.xv,{css:[p.l0.color.foregroundDimmer],children:"No query history"})}):(0,r.tZ)(p.G7,{children:e.map((function(e){return(0,r.tZ)(en,(0,ae.Z)({},e),e.id)}))})})})},nn=function(e){var t=e.queryResult,n=e.scrollRef;if(null===t||void 0===t?void 0:t.error)return(0,r.tZ)(p.G7,{css:p.l0.px(8),children:(0,r.tZ)(p.xv,{multiline:!0,css:[p.l0.color.accentNegativeDefault],children:null===t||void 0===t?void 0:t.error})});if(!(null===t||void 0===t?void 0:t.rows))return null;var i=kt(t);if(!i)return(0,r.tZ)(p.G7,{css:p.l0.px(8),children:(0,r.tZ)(p.xv,{multiline:!0,css:[p.l0.color.accentPositiveDefault],children:"Query successful, no rows returned"})});var o=i.headerColumns,a=i.bodyData;return(0,r.tZ)(p.G7,{css:p.l0.px(8),children:(0,r.tZ)(xt,{headerColumns:o,bodyData:a,scrollRef:n})})},rn=(0,He.iv)([p.l0.height("100%"),p.l0.position.relative,p.l0.overflow("auto")]),on=(0,He.iv)([p.l0.position.sticky,p.l0.top(0),p.l0.left(0),p.l0.zIndex(1),p.l0.backgroundColor.backgroundDefault]),an=(0,He.iv)([p.l0.position.sticky,p.l0.bottom(0),p.l0.left(0),p.l0.backgroundColor.backgroundDefault]),ln=function(e){var t=e.connectionString,n=(0,a.Z)((0,Ct.KO)(Ut),2),o=n[0],l=n[1],s=(0,Ve.Z)({initialDoc:o}),c=s.view,u=s.ref;i.useEffect((function(){return function(){var e;l(null!==(e=null===c||void 0===c?void 0:c.state.doc.toString())&&void 0!==e?e:"")}}),[l,null===c||void 0===c?void 0:c.state.doc]);var d=(0,Ct.b9)(Ft);i.useEffect((function(){d(c)}),[d,c]);var f=function(e){var t=e.view,n=(0,Ke.Z)({view:t}),o=i.useRef(null);return i.useEffect((function(){if(t){var e=document.createElement("div");return o.current=Ye.createPortal((0,r.tZ)("div",{css:[{fontFamily:p.TV.fontFamilyCode},p.l0.color.foregroundDimmest],children:"Type PostgreSQL queries here to use the database."}),e),t.dispatch({effects:n.reconfigure((0,$e.W$)(e))}),function(){t.dispatch({effects:n.reconfigure([])}),o.current=null}}}),[t,n]),o.current}({view:c});(0,Je.Z)({view:c}),function(e){var t=e.connectionString,n=wt("SELECT table_name, column_name, data_type FROM information_schema.columns WHERE table_schema = 'public';",t).data,r=(0,Ct.b9)(_t);i.useEffect((function(){r(n)}),[n,r])}({connectionString:t});var h=(0,Ct.Dv)(Tt);!function(e){var t=e.view,n=e.config,r=(0,Ke.Z)({view:t});i.useEffect((function(){if(t)return t.dispatch({effects:r.reconfigure([et.Wl.high((0,Qe.sql)((0,ae.Z)({dialect:Qe.PostgreSQL},n)))])}),function(){t.dispatch({effects:r.reconfigure([])})}}),[t,r,n])}({view:c,config:{schema:h}});var m=(0,Kt.Lh)();(0,Jt.Z)({view:c,filePath:"mark.sql",decorations:m});var g=(0,v.Z)().psql,b=(0,a.Z)(i.useState(),2),Z=b[0],y=b[1],x=(0,a.Z)(i.useState(!1),2),w=x[0],k=x[1],C=Yt(),S=i.useCallback((function(){function e(){return(e=(0,je.Z)((function(){var e,n;return(0,Ne.__generator)(this,(function(r){switch(r.label){case 0:if(!c)return[2];r.label=1;case 1:return r.trys.push([1,,3,4]),k(!0),e=null===c||void 0===c?void 0:c.state.doc.toString(),C(e),[4,g.run({query:e,connectionString:t})];case 2:return n=r.sent(),y(n),Dt({action:"queryRan"}),[3,4];case 3:return k(!1),[7];case 4:return[2]}}))}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t,g,C,c]),_=zt(),T=i.useCallback((function(){_("databaseManager")}),[_]),R=i.useCallback((function(){_("tableSchemas")}),[_]),B=i.useRef(null);return(0,r.tZ)(Et,{headerTitle:"Database Contents",onGoBack:T,children:(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8),rn],innerRef:B,children:[(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8),p.l0.px(8),p.l0.pb(8),on],children:[(0,r.BX)(p.G7,{css:[{border:"1px solid ".concat(p.TV.outlineDefault)},p.l0.borderRadius(2)],children:[(0,r.tZ)(p.G7,{css:[p.l0.backgroundColor.backgroundDefault,p.l0.borderRadius(8),p.l0.overflow("hidden")],innerRef:u}),f,(0,r.tZ)(tn,{})]}),(0,r.tZ)(p.zx,{text:"Run Query",iconLeft:w?(0,r.tZ)(me.Z,{}):(0,r.tZ)(qe.Z,{}),onClick:S,disabled:w})]}),(0,r.tZ)(nn,{queryResult:Z,scrollRef:B}),(0,r.tZ)(p.G7,{css:[p.l0.colWithGap(8),p.l0.px(8),p.l0.py(8),an],children:(0,r.tZ)(p.zx,{css:p.l0.backgroundColor.backgroundDefault,text:"Show All Contents",iconLeft:(0,r.tZ)(At.Z,{}),onClick:R})})]})})},sn=n(8527),cn=n(48506),un=n(58794),dn=n(37424),fn=function(e){var t=e.envVarKey,n=e.envVarValue,l=e.isSecret,c=(0,v.Z)().fs;i.useEffect((function(){function e(){return(e=(0,je.Z)((function(){var e,r,i,a,l;return(0,Ne.__generator)(this,(function(s){switch(s.label){case 0:return[4,c.readFile(".env")];case 1:if(e=s.sent(),r="",e.error){if(e.error!==k.Df.NotFound)throw new Error("Error getting .env");r=""}else r=e.content;return(i=cn.Z.parse(r.toString()))[t]===n?[2]:(a=(0,tt.Z)((0,ae.Z)({},i),(0,o.Z)({},t,n)),l=cn.Z.serialize(a),[4,c.writeFile(".env",un.Z.from(l))]);case 2:return s.sent(),[2]}}))}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[c,t,n]);var u=(0,dn.H)()("db-env-var-".concat(t)),d=(0,a.Z)(i.useState(!1),2),f=d[0],h=d[1],m=!l||f?"text":"password";return(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(8),p.l0.flex.wrap,p.l0.align.end,p.l0.pb(8)],children:[(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8),{flexBasis:250},p.l0.flex.grow(0),p.l0.flex.shrink(1)],children:[(0,r.tZ)("label",{css:p.l0.color.foregroundDimmer,htmlFor:u,children:t}),(0,r.tZ)(p.II,{id:u,type:m,readOnly:!0,value:n})]}),(0,r.tZ)(p.zx,{text:"Copy",iconLeft:(0,r.tZ)(sn.Z,{}),onClick:function(){(0,ve.Z)(n),Dt({action:"envVarCopied",envVarKey:t,envVarType:"value"})}}),l?(0,r.tZ)(p.zx,{text:"View",iconLeft:(0,r.tZ)(s.Z,{}),onClick:function(){return h((function(e){return!e}))}}):null]})},pn=function(e){var t=e.connectionString,n=e.databaseName,i=new URL(t.replace("postgres://","https://")),o=i.host,a=i.username,l=i.password;return(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8)],children:[(0,r.tZ)(fn,{envVarKey:"REPLIT_PG_DB_URL",envVarValue:t,isSecret:!0}),(0,r.tZ)(fn,{envVarKey:"PGDATABASE",envVarValue:n}),(0,r.tZ)(fn,{envVarKey:"PGHOST",envVarValue:o}),(0,r.tZ)(fn,{envVarKey:"PGPORT",envVarValue:"5432"}),(0,r.tZ)(fn,{envVarKey:"PGUSER",envVarValue:a}),(0,r.tZ)(fn,{envVarKey:"PGPASSWORD",envVarValue:l,isSecret:!0})]})},hn=n(90051),mn=n(21131),vn=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],gn=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];function bn(e,t){var n,r=t||{},i=r.signed,o=void 0!==i&&i,a=r.digitsNumber,l=void 0===a?2:a,s=r.isKib,c=void 0===s||s,u=r.isKibNotation,d=void 0!==u&&u;if(n=o?e<0?"-":"+":"",0===e)return"".concat(n,"0B");var f=c?1024:1e3,p=d?vn:gn,h=Math.floor(Math.log(Math.abs(e))/Math.log(f));return"".concat(n).concat(parseFloat(Math.abs(e/Math.pow(f,h)).toFixed(l))).concat(p[h])}var Zn=function(e){var t=e.tableData,n=e.scrollRef,o=t.headerColumns,a=t.bodyData,l=zt(),s=i.useCallback((function(e){var t=parseInt(String(e),10);if(!isNaN(t)){var n=a[t][o.indexOf("Name")];l("table/".concat(n))}}),[l,o,a]);return(0,r.tZ)(xt,{headerColumns:o,bodyData:a,onRowAction:s,scrollRef:n})},yn=function(e){var t=e.connectionString,n=e.scrollRef,i=St({connectionString:t}),o=i.data;if(i.loading)return(0,r.tZ)(p.G7,{css:[p.l0.flex.row,p.l0.justify.center,p.l0.p(32)],children:(0,r.tZ)(me.Z,{})});if(null===o||void 0===o?void 0:o.error)return(0,r.tZ)(p.G7,{css:[p.l0.flex.row,p.l0.justify.center,p.l0.p(32)],children:(0,r.tZ)(p.xv,{multiline:!0,css:[p.l0.color.accentNegativeDefault,p.l0.maxWidth("100%")],children:null===o||void 0===o?void 0:o.error})});var a=o?kt(o):null;return a?(0,r.tZ)(Zn,{tableData:a,scrollRef:n}):(0,r.tZ)(p.G7,{css:[p.l0.flex.row,p.l0.justify.center,p.l0.p(32)],children:(0,r.tZ)(p.xv,{multiline:!0,css:[p.l0.color.accentPositiveDefault,p.l0.maxWidth("100%")],children:"No tables found"})})},xn=function(e){var t=e.connectionString,n=Pt(),o=i.useRef(null);return(0,r.BX)(p.G7,{css:[p.l0.flex.column,p.l0.height("100%")],children:[(0,r.BX)(p.G7,{css:[p.l0.flex.row,p.l0.py(16),p.l0.px(8),p.l0.align.center],children:[(0,r.tZ)(p.hU,{alt:"Go back",size:28,type:"button",onClick:n,children:(0,r.tZ)(Bt.Z,{})}),(0,r.tZ)(p.xv,{css:[p.l0.fontSize(16),p.l0.ml(8)],children:"All tables"})]}),(0,r.tZ)(p.G7,{css:[p.l0.flex.growAndShrink(1),p.l0.overflow("auto"),p.l0.px(8)],innerRef:o,children:(0,r.tZ)(yn,{connectionString:t,scrollRef:o})})]})},wn="1px solid "+p.TV.outlineDefault,kn=(0,He.iv)([p.l0.p(8),p.l0.backgroundColor.backgroundDefault,p.l0.align.center,p.l0.borderRadius(0),{borderLeft:wn,borderRight:wn,borderBottom:wn},{":not([disabled])":{":focus":{boxShadow:"none",outline:"2px solid ".concat(p.TV.accentPrimaryDefault),outlineOffset:"-2px"},":hover":{backgroundColor:p.TV.backgroundHigher}}}]),Cn=function(e){var t=e.connectionString,n=St({connectionString:t}),o=n.data,l=n.loading,s=(0,a.Z)(i.useState(!1),2),c=s[0],u=s[1],d=i.useCallback((function(){u(!0)}),[]),f=o?kt(o):null,h=i.useRef(null);if(!f||l)return null;var m=f.bodyData.length,v=f.headerColumns,g=f.bodyData,b=m-5>0&&!c;return(0,r.tZ)(r.HY,{children:(0,r.BX)(p.G7,{css:[p.l0.overflow("auto"),p.l0.display.grid],innerRef:h,children:[(0,r.tZ)(Zn,{tableData:{headerColumns:v,bodyData:c?g:g.slice(0,5)},scrollRef:h}),b?(0,r.tZ)(p.zx,{text:"".concat(m-5," more"),css:kn,onClick:d}):null]})})},Sn=n(59247),_n=2*Math.pow(1024,3),Tn=Sn.z4["neon-database-preview"],Rn=(0,Sn.qJ)(Tn),Bn="".concat(Tn.toLocaleString()," Cycles (").concat(Rn,") / day"),En="http://docs.replit.com",Gn=function(e){var t=e.dbSize,n=e.totalSize,i=t,o=n,a=bn(t),l=bn(n),s=(0,mn.Z)((function(){return(0,Ct.cn)(i)}),[i]),c=(0,mn.Z)((function(){return(0,Ct.cn)(o)}),[o]);return(0,r.BX)(r.HY,{children:[(0,r.BX)(p.xv,{css:p.l0.color.foregroundDimmer,children:[a,"/",l]}),(0,r.tZ)(hn.h,{totalAtom:c,currentAtom:s,limitText:"".concat(a," / ").concat(l),inactive:!1})]})},Dn=function(e){var t,n,i=e.connectionString,o=wt("SELECT sum(pg_database_size(datname)) FROM pg_database;",i),a=o.data,l=o.loading,s=wt("SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' ORDER BY table_name;",i),c=s.data,u=s.loading,d=parseInt(null!==(n=null===(t=null===a||void 0===a?void 0:a.rows[0])||void 0===t?void 0:t.sum)&&void 0!==n?n:"0",10),f=null===c||void 0===c?void 0:c.rows.length;return(0,r.BX)(p.G7,{css:p.l0.rowWithGap(8),children:[u?null:(0,r.BX)(p.xv,{children:[f," ",1===f?"table":"tables"]}),l?null:(0,r.tZ)(Gn,{dbSize:d,totalSize:_n})]})},In=function(e){var t=e.connectionString,n=e.onOpenDatabaseViewerClick;return(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8)],children:[(0,r.tZ)(Dn,{connectionString:t}),(0,r.tZ)(Cn,{connectionString:t}),(0,r.tZ)(p.zx,{text:"See Database Contents",iconLeft:(0,r.tZ)(At.Z,{}),onClick:n})]})},jn=n(81183),Nn=function(e){var t=e.size,n=void 0===t?16:t;return(0,r.BX)("svg",{viewBox:"0 0 128 36",preserveAspectRatio:"xMidYMin",height:n,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 6.207A6.207 6.207 0 0 1 6.207 0h23.586A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36H6.207A6.207 6.207 0 0 1 0 29.793V6.207Zm6.207-1.241c-.686 0-1.241.555-1.241 1.24v23.587c0 .686.555 1.242 1.24 1.242h10.925c.343 0 .434-.278.434-.621V16.18c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V6.207c0-.686.064-1.241-.621-1.241H6.207Z",fill:"#12FFF7"}),(0,r.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 6.207A6.207 6.207 0 0 1 6.207 0h23.586A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36H6.207A6.207 6.207 0 0 1 0 29.793V6.207Zm6.207-1.241c-.686 0-1.241.555-1.241 1.24v23.587c0 .686.555 1.242 1.24 1.242h10.925c.343 0 .434-.278.434-.621V16.18c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V6.207c0-.686.064-1.241-.621-1.241H6.207Z",fill:"url(#a)"}),(0,r.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 6.207A6.207 6.207 0 0 1 6.207 0h23.586A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36H6.207A6.207 6.207 0 0 1 0 29.793V6.207Zm6.207-1.241c-.686 0-1.241.555-1.241 1.24v23.587c0 .686.555 1.242 1.24 1.242h10.925c.343 0 .434-.278.434-.621V16.18c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V6.207c0-.686.064-1.241-.621-1.241H6.207Z",fill:"url(#b)"}),(0,r.tZ)("path",{d:"M29.793 0A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36a.62.62 0 0 0 .62-.62v-19.2c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V1.241C31.035.556 30.479 0 29.793 0Z",fill:"#B9FFB3"}),(0,r.tZ)("path",{d:"M60.686 10.6v9.416l-9.13-9.416h-4.752V26h4.334V15.88L61.082 26h3.938V10.6h-4.334ZM73.054 22.568V19.84h9.702v-3.278h-9.702v-2.53h11.77V10.6H68.632V26h16.434v-3.432H73.054ZM96.583 26.506c6.094 0 10.054-2.992 10.054-8.206 0-5.214-3.96-8.206-10.054-8.206S86.551 13.086 86.551 18.3c0 5.214 3.938 8.206 10.032 8.206Zm0-3.652c-3.388 0-5.478-1.65-5.478-4.554 0-2.904 2.112-4.554 5.478-4.554 3.388 0 5.478 1.65 5.478 4.554 0 2.904-2.09 4.554-5.478 4.554ZM123.249 10.6v9.416l-9.13-9.416h-4.752V26h4.334V15.88L123.645 26h3.938V10.6h-4.334Z",fill:"#fff"}),(0,r.BX)("defs",{children:[(0,r.BX)("linearGradient",{id:"a",x1:"36",y1:"36",x2:"4.345",y2:"0",gradientUnits:"userSpaceOnUse",children:[(0,r.tZ)("stop",{stopColor:"#B9FFB3"}),(0,r.tZ)("stop",{offset:"1",stopColor:"#B9FFB3",stopOpacity:"0"})]}),(0,r.BX)("linearGradient",{id:"b",x1:"36",y1:"36",x2:"14.617",y2:"27.683",gradientUnits:"userSpaceOnUse",children:[(0,r.tZ)("stop",{stopColor:"#1A1A1A",stopOpacity:".9"}),(0,r.tZ)("stop",{offset:"1",stopColor:"#1A1A1A",stopOpacity:"0"})]})]})]})},Ln=(0,He.iv)([p.l0.color.foregroundDimmest,{textDecoration:"underline"}]),zn=function(){return(0,r.tZ)(p.G7,{css:[p.l0.colWithGap(8),p.l0.py(8),p.l0.width("100%")],children:(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(8),p.l0.align.center,p.l0.justify.spaceBetween],children:[(0,r.tZ)("a",{target:"_blank",href:En,css:Ln,children:"Docs"}),(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(8),p.l0.align.center],children:[(0,r.tZ)(p.xv,{css:[p.l0.fontSize(16)],children:"Powered by"}),(0,r.tZ)(Nn,{})]})]})})},Pn=n(88961),An=function(e){var t=e.tableName,n=e.connectionString,i=e.scrollRef,o=wt('SELECT * FROM "'.concat(t.replace(/"/g,'""'),'" LIMIT ').concat(Xn),n),a=o.data,l=o.loading,s=function(e){var t=e.tableName,n=e.connectionString,r=wt(function(e){return"SELECT table_name, column_name, data_type FROM information_schema.columns WHERE table_schema = 'public' AND table_name = '".concat(e.replace(/"/g,'""'),"';")}(t),n).data;return r}({tableName:t,connectionString:n});if(l)return(0,r.tZ)(p.G7,{css:[p.l0.flex.row,p.l0.justify.center,p.l0.p(32)],children:(0,r.tZ)(me.Z,{})});if(null===a||void 0===a?void 0:a.error)return(0,r.tZ)(p.G7,{css:[p.l0.flex.row,p.l0.justify.center,p.l0.p(32)],children:(0,r.tZ)(p.xv,{multiline:!0,css:[p.l0.color.accentNegativeDefault,p.l0.maxWidth("100%")],children:null===a||void 0===a?void 0:a.error})});var c=a?kt(a):null;if(!c)return(0,r.tZ)(p.G7,{css:[p.l0.flex.row,p.l0.justify.center,p.l0.p(32)],children:(0,r.tZ)(p.xv,{multiline:!0,css:[p.l0.color.accentPositiveDefault,p.l0.maxWidth("100%")],children:"No rows"})});var u=c.headerColumns,d=c.bodyData;return(0,r.tZ)(xt,{headerColumns:u.map((function(e,t){var n,i=null===s||void 0===s||null===(n=s.rows)||void 0===n?void 0:n.find((function(t){return t.column_name===e})),o=null===i||void 0===i?void 0:i.data_type,a=o?(0,r.tZ)(p.DR,{text:o}):null;return(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(8),p.l0.align.center],children:[(0,r.tZ)(p.xv,{children:e}),a]},t)})),bodyData:d,scrollRef:i})},Xn=1e4,Un=function(e){var t=e.tableName,n=e.connectionString,o=Pt(),a=i.useRef(null);return(0,r.BX)(p.G7,{css:[p.l0.flex.column,p.l0.height("100%")],children:[(0,r.BX)(p.G7,{css:[p.l0.flex.row,p.l0.py(16),p.l0.px(8),p.l0.align.center],children:[(0,r.tZ)(p.hU,{alt:"Go back",size:28,type:"button",onClick:o,children:(0,r.tZ)(Bt.Z,{})}),(0,r.tZ)(p.xv,{css:[p.l0.fontSize(16),p.l0.ml(8)],children:t})]}),(0,r.tZ)(p.G7,{css:[p.l0.flex.growAndShrink(1),p.l0.overflow("auto"),p.l0.px(8)],innerRef:a,children:(0,r.tZ)(An,{tableName:t,connectionString:n,scrollRef:a})})]})},Fn=function(e){var t=e.cyclesLow;return(0,r.BX)(r.HY,{children:[(0,r.tZ)(p.xv,{multiline:!0,css:[p.l0.fontSize(12),p.l0.color.foregroundDimmest],children:"You\u2019re paying ".concat(Bn)}),t?(0,r.tZ)(p.G7,{children:(0,r.tZ)(p.E_,{icon:(0,r.tZ)(Pn.Z,{}),colorway:"warning",text:"If your database use continues, you will be out of\n Cycles in [X] days and access to your database will be paused. \n Buy more Cycles or add a recurring Cycles subscription to prevent that from happening."})}):null]})},Mn=n(92002),Wn=n(79359),On=n(72533),Hn=function(e){var t=e.title,n=e.children,i=e.isAccordion,o=e.sectionStyles;return(0,r.tZ)(p.G7,{css:[p.l0.colWithGap(8),p.l0.pt(8),{borderTopWidth:1,borderTopStyle:"solid",borderTopColor:p.TV.outlineDefault},o],children:i?(0,r.tZ)(p.Qd,{headerContent:(0,r.tZ)(p.G7,{css:[p.l0.rowWithGap(8),p.l0.align.center],children:(0,r.tZ)(p.xv,{variant:"subheadDefault",children:t})}),children:(0,r.tZ)(p.G7,{css:[p.l0.p(12),p.l0.colWithGap(8),p.l0.height("100%")],children:n})}):(0,r.BX)(r.HY,{children:[(0,r.tZ)(p.xv,{css:[p.l0.fontSize(p.TV.fontSizeSubheadDefault),p.l0.fontWeight.medium],children:t}),n]})})},Vn=function(e){var t,n=e.neonDatabases,o=e.onDatabaseDeleted,l=n[0],s=(0,We.Z)().showError,c=(0,ge.Z)(),u=(0,Ct.Dv)(Lt),d=zt(),f=i.useCallback((function(){d("queryEditor")}),[d]),h=(0,a.Z)(function(e){var t=(0,ae.Z)({},Xe,e);return Le.D(Fe,t)}(),2),m=h[0],v=h[1].loading,g=i.useCallback((function(){x(!0)}),[]),b=i.useCallback((0,je.Z)((function(){var e,t,n;return(0,Ne.__generator)(this,(function(r){switch(r.label){case 0:return[4,m({variables:{input:{replId:c,databaseId:l.databaseId}}})];case 1:return e=r.sent(),t=e.data,n=e.errors,x(!1),n&&n.length>0?(s("Error when deleting Neon database: ".concat(null===n||void 0===n?void 0:n.join())),Dt({action:"removed",success:!1}),[2]):"DeleteNeonDatabaseResult"!==(null===t||void 0===t?void 0:t.deleteNeonDatabase.__typename)?(s("Error: ".concat(null===t||void 0===t?void 0:t.deleteNeonDatabase.message)),Dt({action:"removed",success:!1}),[2]):((null===t||void 0===t?void 0:t.deleteNeonDatabase.success)?(o(),Dt({action:"removed",success:!0})):(s("Error: Delete Neon Database failed."),Dt({action:"removed",success:!1})),[2])}}))})),[m,l.databaseId,o,c,s]),Z=(0,a.Z)(i.useState(!1),2),y=Z[0],x=Z[1],w=i.useCallback((function(){x(!1)}),[]),k=(0,a.Z)(i.useState(!1),2),C=k[0],S=k[1],_=i.useCallback((function(){S(!0)}),[]),T="".concat(l.connectionString,"/").concat(l.databaseName,"?sslmode=require&options=project%3D").concat(l.projectId);if("queryEditor"===u)return(0,r.tZ)(ln,{connectionString:T});if("tableSchemas"===u)return(0,r.tZ)(xn,{connectionString:T});if(u.startsWith("table/")){var R=u.slice(u.indexOf("/")+1);return(0,r.tZ)(Un,{tableName:R,connectionString:T})}return t=l.isFrozen?(0,r.BX)(r.HY,{children:[(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(8),p.l0.align.center],children:[(0,r.tZ)(p.G7,{css:[p.l0.width(8),p.l0.height(8),p.l0.backgroundColor.foregroundDimmer,p.l0.borderRadius("full")]}),(0,r.tZ)(p.xv,{css:[p.l0.color.foregroundDimmest],children:"Database paused"})]}),(0,r.BX)(p.xv,{multiline:!0,css:[p.l0.fontSize(12),p.l0.color.foregroundDimmest],children:["Databases cost ",Bn]}),(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8),p.l0.align.center],children:[(0,r.tZ)(q.Z,{size:32,fill:p.TV.foregroundDimmest,css:p.l0.mt(32)}),(0,r.tZ)(p.xv,{variant:"subheadDefault",css:[p.l0.my(16)],children:"You ran out of Cycles"}),(0,r.tZ)(p.xv,{multiline:!0,children:"Access to your databases will be paused until you refill your Cycles balance."}),(0,r.tZ)(p.zx,{css:p.l0.pt(8),iconLeft:(0,r.tZ)(Mn.Z,{}),onClick:_,text:"Buy Cycles",colorway:"primary"})]}),(0,r.tZ)(On.Z,{noPadding:!0,isOpen:C,maxWidth:Wn.f,onRequestClose:function(){return S(!1)},fitContent:!0,context:"workspace_postgresql_pane"})]}):(0,r.BX)(r.HY,{children:[(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(8),p.l0.align.center],children:[(0,r.tZ)(p.G7,{css:[p.l0.width(8),p.l0.height(8),p.l0.backgroundColor.accentPositiveStronger,p.l0.borderRadius("full")]}),(0,r.tZ)(p.xv,{css:[p.l0.color.accentPositiveStrongest],children:"Database connected"})]}),(0,r.tZ)(Fn,{}),(0,r.tZ)(Hn,{title:"Database Info",children:(0,r.tZ)(In,{connectionString:T,onOpenDatabaseViewerClick:f})}),(0,r.tZ)(Hn,{title:"Using the database",isAccordion:!0,children:(0,r.tZ)(p.xv,{children:"https://www.postgresql.org/"})}),(0,r.tZ)(Hn,{title:"Database env variable",isAccordion:!0,children:(0,r.tZ)(pn,{connectionString:T,databaseName:l.databaseName})})]}),(0,r.BX)(p.G7,{css:[p.l0.colWithGap(0),p.l0.height("100%"),p.l0.p(8)],children:[(0,r.tZ)(p.G7,{css:[p.l0.colWithGap(16),p.l0.flex.grow(1),p.l0.flex.shrink(0)],children:t}),(0,r.tZ)(p.G7,{css:[p.l0.pt(16)],children:y||v?(0,r.BX)(p.Tg,{css:[p.l0.p(8),p.l0.colWithGap(8)],elevated:!0,children:[(0,r.tZ)(p.xv,{multiline:!0,children:"Removing this database will remove access to the data for this Repl, and remove the daily Cycles subscription of ".concat(Bn,".")}),(0,r.tZ)(p.E_,{icon:(0,r.tZ)(Pn.Z,{}),colorway:"warning",text:"This action cannot be undone."}),(0,r.tZ)(p.zx,{text:"Yes, Remove Database",colorway:"negative",disabled:v,iconLeft:(0,r.tZ)(Oe.Z,{}),onClick:b}),(0,r.tZ)(p.zx,{text:"Cancel",disabled:v,onClick:w})]}):(0,r.tZ)(p.zx,{css:[p.l0.py(8)],text:"Remove Database",disabled:v,iconLeft:(0,r.tZ)(Oe.Z,{}),onClick:g})}),(0,r.tZ)(zn,{})]})},qn=n(18098),$n=n(4158),Yn=n(62913),Kn=n(46702),Jn=n(20861),Qn="Buy Cycles & Create a DB",er="Use Cycles to create a DB",tr='Press "'.concat(Qn,'" to initiate a daily Cycles subscription and activate a Neon Database. You will be redirected to our payment processor.\n'),nr='Press "'.concat(er,'" to initiate a daily Cycles subscription and activate a Neon Database.'),rr=function(e){var t=e.onDatabaseCreated,n=(0,ge.Z)(),o=(0,We.Z)().showError,l=(0,a.Z)(function(e){var t=(0,ae.Z)({},Xe,e);return Le.D(Ue,t)}(),2),s=l[0],c=l[1].loading,u=(0,Jn.Z)({forceFetch:!0}),d=u.cycles,f=u.loading,h=null!=d&&d>=Tn,m=f?"Loading Cycles Balance":h?er:Qn,v=h?nr:tr,g=i.useCallback((0,je.Z)((function(){var e,r,i,a,l,c,u,d,f;return(0,Ne.__generator)(this,(function(p){switch(p.label){case 0:return[4,s({variables:{input:{replId:n}}})];case 1:return e=p.sent(),r=e.data,(i=e.errors)&&i.length>0?(o("Error when creating Neon database: ".concat(null===i||void 0===i?void 0:i.join())),Dt({action:"created",success:!1}),[2]):"CreateNeonDatabaseResult"!==(null===r||void 0===r?void 0:r.createNeonDatabase.__typename)?(o("Error: ".concat(null===r||void 0===r?void 0:r.createNeonDatabase.message)),Dt({action:"created",success:!1}),[2]):(a=r.createNeonDatabase,l=a.databaseId,c=a.databaseName,u=a.connectionString,d=a.projectId,f=a.isFrozen,t({databaseId:l,databaseName:c,connectionString:u,projectId:d,isFrozen:f}),Dt({action:"created",success:!0}),[2])}}))})),[s,n,o,t]),b=(0,a.Z)(i.useState(!1),2),Z=b[0],y=b[1],x=i.useCallback((0,je.Z)((function(){return(0,Ne.__generator)(this,(function(e){return y(!0),[2]}))})),[]),w=i.useCallback((0,je.Z)((function(){return(0,Ne.__generator)(this,(function(e){return y(!1),[2]}))})),[]),k=i.useCallback((0,je.Z)((function(){return(0,Ne.__generator)(this,(function(e){switch(e.label){case 0:return[4,g()];case 1:return e.sent(),y(!1),[2]}}))})),[g]);return(0,r.BX)(p.G7,{css:[p.l0.colWithGap(0),p.l0.height("100%"),p.l0.align.center,p.l0.p(8)],children:[(0,r.BX)(p.G7,{css:[p.l0.colWithGap(16),p.l0.flex.grow(1),p.l0.flex.shrink(0),p.l0.maxWidth(600)],children:[(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8),p.l0.align.center],children:[(0,r.tZ)(p.G7,{css:[p.l0.p(16)],children:(0,r.tZ)(Yn.Z,{src:"/public/images/db_illustration.png",width:"144px",height:"144px",alt:"FPO visual"})}),(0,r.tZ)(p.xv,{css:[p.l0.fontSize(16),p.l0.fontWeight.bold],children:"Fully-managed PostgreSQL database"}),(0,r.tZ)(p.xv,{css:[p.l0.fontSize(14)],children:"2GB of fast read/write storage"}),(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(8),p.l0.align.center],children:[(0,r.tZ)(p.xv,{css:[p.l0.fontSize(14)],children:Bn}),(0,r.tZ)(p.hU,{alt:"PLACEHOLDER pricing info",size:24,children:(0,r.tZ)($n.Z,{})})]})]}),(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8),p.l0.mb(8)],children:[(0,r.tZ)(p.zx,{text:m,colorway:"primary",iconLeft:(0,r.tZ)(re.Z,{}),disabled:f||c,onClick:x}),(0,r.tZ)(p.ZP,{css:{border:"none"},outlined:!0,href:En,target:"_blank",text:"Learn More",iconRight:(0,r.tZ)(Kn.Z,{})})]}),(0,r.tZ)("hr",{css:[p.l0.my(16),{borderColor:p.TV.outlineDefault}]}),(0,r.tZ)(p.xv,{multiline:!0,css:[p.l0.fontSize(12),p.l0.color.foregroundDimmest],children:v}),(0,r.tZ)(qn.Z,{isOpen:Z,onRequestClose:w,onRequestPowerUp:k,uponPurchaseGoTo:"workspace",context:"workspace_postgresql_pane",powerUp:"neon-database-preview"})]}),(0,r.tZ)(zn,{})]})},ir=(0,Ct.cn)([]),or=function(){var e=(0,ge.Z)(),t=(0,We.Z)().showError,n=(0,v.Z)().psql,o=function(e){var t=(0,ae.Z)({},Xe,e);return ce.a(Me,t)}({variables:{input:{replId:e}},fetchPolicy:"no-cache"}),l=o.data,s=o.loading,c=(0,a.Z)((0,Ct.KO)(ir),2),u=c[0],d=c[1];i.useEffect((function(){"GetNeonDatabasesResult"===(null===l||void 0===l?void 0:l.getNeonDatabases.__typename)&&d(l.getNeonDatabases.databases),"UnauthorizedError"!==(null===l||void 0===l?void 0:l.getNeonDatabases.__typename)&&"UserError"!==(null===l||void 0===l?void 0:l.getNeonDatabases.__typename)||t("Error: ".concat(null===l||void 0===l?void 0:l.getNeonDatabases.message))}),[null===l||void 0===l?void 0:l.getNeonDatabases,d,t]);var f=i.useCallback(function(){var e=(0,je.Z)((function(e){return(0,Ne.__generator)(this,(function(t){switch(t.label){case 0:return[4,n.ensureNixPsqlPackageInstalled(!0)];case 1:return t.sent(),d([e]),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),[n,d]),h=i.useCallback((function(){d([])}),[d]);return s?(0,r.tZ)(p.G7,{css:[p.l0.flex.row,p.l0.justify.center,p.l0.p(32)],children:(0,r.tZ)(me.Z,{})}):u.length>0?(0,r.tZ)(Vn,{neonDatabases:u,onDatabaseDeleted:h}):(0,r.tZ)(rr,{onDatabaseCreated:f})},ar=n(53202),lr={Content:function(){return(0,r.tZ)(or,{})},Icon:function(e){var t=e.size;return(0,r.tZ)(ar.PostgresUi,{size:t})},getTitle:function(){return"PostgreSQL"}};function sr(){var e=(0,le.Z)(["\n  query ReplAuth($replID: String!) {\n    repl(id: $replID) {\n      ... on Repl {\n        id\n        config {\n          isServer\n        }\n      }\n    }\n    currentUser {\n      id\n      isLoggedIn\n    }\n  }\n"]);return sr=function(){return e},e}var cr={},ur=(0,se.Ps)(sr());var dr=n(6625),fr=n(48287),pr=n(40705),hr=n(59916),mr="Import HTML package",vr=[{title:"Get user info",content:[{type:"code",value:'<script type="module">const user = await getUserInfo() <\/script>'}]}],gr=[{title:mr,content:[{type:"code",value:'<script src="https://replit.com/public/js/repl-auth-v2.js"><\/script>'}]}],br=[{title:"Insert custom button",content:[{type:"code",value:'<button onclick="LoginWithReplit()"> Login </button>'}]}],Zr="Import Node package",yr=[{title:"Get user info",content:[{type:"code",value:"const user = getUserInfo("},{type:"input",placeholder:"req"},{type:"code",value:")"}]}],xr=[{title:Zr,content:[{type:"code",value:'const { getUserInfo } = require("@replit/repl-auth")'}]}],wr=function(e){var t=e.title,n=e.content,o=e.activeFile,l=(0,a.Z)(i.useState(n),2),s=l[0],c=l[1];return(0,r.BX)(p.G7,{css:[p.l0.colWithGap(4)],children:[(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(4),p.l0.align.center],children:[(0,r.tZ)(p.xv,{css:{fontWeight:p.TV.fontWeightMedium},multiline:!0,children:t}),"Get user info"===t&&(0,r.BX)(p.u,{tooltip:"User object contains 'id', 'name', 'roles', and 'teams'",placement:"top",children:[" ",(0,r.tZ)($n.Z,{})]})]}),(0,r.BX)(p.G7,{css:[p.l0.colWithGap(4),{width:"fit-content",wordBreak:"break-word"}],children:[(0,r.tZ)(p.G7,{css:[p.l0.rowWithGap(4),p.l0.backgroundColor.backgroundRoot,p.l0.borderRadius(4),p.l0.p(4),p.l0.align.center],children:n.map((function(e,n){return"input"===e.type?(0,r.tZ)(p.II,{onChange:function(e){var t=(0,ie.Z)(s);t[n].value=e.target.value,c(t)},placeholder:e.placeholder,value:e.value||"",css:[p.l0.width(64),p.l0.height(24),p.l0.zIndex(1)]},"".concat(t,"-").concat(n)):(0,r.tZ)(p.G7,{css:[p.l0.borderRadius(4),p.l0.backgroundColor.backgroundRoot],children:(0,r.tZ)(p.xv,{css:[p.l0.font.code,p.l0.color.greyStronger,p.l0.pb(4),p.l0.pt(4)],children:e.value})},"".concat(t,"-").concat(n))}))}),(0,r.tZ)(kr,{code:s.reduce((function(e,t){return"input"===t.type?e+(t.value||t.placeholder):e+t.value}),""),activeFile:o,packageImport:t===Zr||t===mr})]})]})},kr=function(e){var t=e.code,n=e.activeFile,i=e.packageImport,o=(0,be.Z)(n),a=(0,v.Z)().fs;return o?(0,r.tZ)(p.Tg,{background:"default",children:(0,r.tZ)(p.zx,{small:!0,outlined:!0,onClick:function(){if(i&&n&&a)return"html"!==(0,x.r6)(n)?void o({code:t,insertAt:0}):void a.readFile(n).then((function(e){if(e.error)throw e.error;var n=un.Z.from(e.content).toString(),r=n.indexOf("</head>")-1;-1===r&&(r=n.indexOf("<script")),-1===r&&(r=n.indexOf("</body>")),-1===r&&(r=n.length),o({code:t,insertAt:r})}));o({code:t})},text:i?"Auto add":"Insert",iconRight:(0,r.tZ)(ye.Z,{}),css:{width:"fit-content"}})}):(0,r.tZ)(p.Tg,{background:"default",children:(0,r.tZ)(p.zx,{small:!0,outlined:!0,onClick:function(){return(0,ve.Z)(t)},text:"Copy",iconLeft:(0,r.tZ)(Ze.Z,{}),css:{width:"fit-content"}})})},Cr=function(e){var t=e.examples,n=e.activeFile;return(0,r.tZ)(p.G7,{css:[p.l0.colWithGap(16)],children:t.map((function(e,t){return(0,r.tZ)(wr,{title:e.title,content:e.content,activeFile:n},t)}))})},Sr=function(e){var t=e.activeFile,n=null;switch(e.langKey){case"html":n=gr;break;case"nodejs":n=xr}return n?(0,r.tZ)(p.G7,{css:[p.l0.colWithGap(8)],children:(0,r.tZ)(Cr,{examples:n,activeFile:t})}):null},_r=n(76832),Tr=[{title:"Fetch from client",content:[{type:"code",value:"CURL /__replauthuser"}]},{title:"Or access server request headers",content:[{type:"code",value:"X-Replit-User-Id"}]},{title:"",content:[{type:"code",value:"X-Replit-User-Name"}]},{title:"",content:[{type:"code",value:"X-Replit-User-Teams"}]},{title:"",content:[{type:"code",value:"X-Replit-User-Roles"}]}],Rr=function(){var e=(0,C.Z)();return(0,r.tZ)(r.HY,{children:(0,r.tZ)(p.G7,{css:[p.l0.colWithGap(16)],children:Tr.map((function(t,n){return(0,r.tZ)(wr,{title:t.title,content:t.content,activeFile:e},n)}))})})},Br=function(e){var t=e.activeFile,n=e.langKey,i=(0,r.tZ)(Rr,{});switch(n){case"html":i=(0,r.tZ)(Cr,{examples:vr,activeFile:t});break;case"nodejs":i=(0,r.tZ)(Cr,{examples:yr,activeFile:t})}return(0,r.tZ)(p.G7,{css:[p.l0.colWithGap(8)],children:i})},Er=function(e){var t=e.activeFile,n=e.langKey;return(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8)],children:[" ","html"!==n&&(0,r.tZ)(Cr,{examples:gr,activeFile:t}),(0,r.tZ)(Cr,{examples:br,activeFile:t})]})},Gr=n(25497),Dr=n(49012);function Ir(){var e,t,n,o,l,s=(0,ge.Z)(),c=(0,v.Z)(),u=c.dotReplit,d=c.fs,f=(0,C.Z)(),h=(0,pr.x)(),m=(0,dr.Z)(),g=(0,_r.Z)(),b=(0,We.Z)().showError,Z=(0,a.Z)(i.useState(!1),2),y=Z[0],w=Z[1],k=(0,a.Z)(i.useState(!1),2),S=k[0],_=k[1],T=(0,a.Z)(i.useState(!0),2),R=T[0],B=T[1],E=(0,a.Z)(i.useState(!0),2),G=E[0],D=E[1],I=(0,a.Z)(i.useState(null!==(o=null===h||void 0===h?void 0:h.language)&&void 0!==o?o:""),2),j=I[0],N=I[1],L=f?(0,x.r6)(f):null,z=function(e){var t=(0,ae.Z)({},cr,e);return ce.a(ur,t)}({variables:{replID:s}}),P=z.data,A=z.error,X=z.loading,U="Repl"===(null===P||void 0===P?void 0:P.repl.__typename)&&(null===P||void 0===P||null===(e=P.repl)||void 0===e||null===(t=e.config)||void 0===t?void 0:t.isServer);A&&(l="Couldn't load auth data");var F=null===P||void 0===P||null===(n=P.currentUser)||void 0===n?void 0:n.isLoggedIn,M=y||S,W=i.useCallback((0,je.Z)((function(){var e,t,n,r,i,o,a,l,s=arguments;return(0,Ne.__generator)(this,(function(c){switch(c.label){case 0:if(e=s.length>0&&void 0!==s[0]&&s[0],!m)return[2];B(!0),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,u.getConfig({bypassCache:!0})];case 2:if((l=c.sent()).error){if(l.error===Gr.Yt.NotFound)return D(!1),B(!1),[2];throw b("Couldn't load auth data"),B(!1),new Error(l.errorMessage)}return e&&(null===l||void 0===l||null===(t=l.config)||void 0===t||null===(n=t.auth)||void 0===n?void 0:n.pageEnabled)!==S&&g(),w(Boolean(null===l||void 0===l||null===(r=l.config)||void 0===r||null===(i=r.auth)||void 0===i?void 0:i.buttonEnabled)),_(Boolean(null===l||void 0===l||null===(o=l.config)||void 0===o||null===(a=o.auth)||void 0===a?void 0:a.pageEnabled)),B(!1),[3,4];case 3:return c.sent(),b("Couldn't load auth data"),B(!1),[3,4];case 4:return[2]}}))})),[m,u,b,g]);function O(){return H.apply(this,arguments)}function H(){return(H=(0,je.Z)((function(){return(0,Ne.__generator)(this,(function(e){switch(e.label){case 0:return B(!0),(0,Gt.j)(Gt.U3.AUTH_SIDEBAR_USED,{action:"Login Page Enabled"}),[4,u.updateDotReplit([(0,fr.$0)(!0),(0,fr.Jk)(!1)])];case 1:return e.sent().error&&m&&(b("Couldn't enable login page, please try again"),B(!1)),[2]}}))}))).apply(this,arguments)}function V(){return q.apply(this,arguments)}function q(){return(q=(0,je.Z)((function(){return(0,Ne.__generator)(this,(function(e){switch(e.label){case 0:return B(!0),(0,Gt.j)(Gt.U3.AUTH_SIDEBAR_USED,{action:"Login Button Enabled"}),[4,u.updateDotReplit([(0,fr.$0)(!1),(0,fr.Jk)(!0)])];case 1:return e.sent().error&&m&&(b("Couldn't enable login button, please try again"),B(!1)),[2]}}))}))).apply(this,arguments)}function $(){return Y.apply(this,arguments)}function Y(){return(Y=(0,je.Z)((function(){return(0,Ne.__generator)(this,(function(e){switch(e.label){case 0:return B(!0),(0,Gt.j)(Gt.U3.AUTH_SIDEBAR_USED,{action:"Repl auth disabled"}),[4,u.updateDotReplit([(0,fr.$0)(!1),(0,fr.Jk)(!1)])];case 1:return e.sent().error&&(b("Couldn't disable Log in with Replit, please try again"),B(!1)),[2]}}))}))).apply(this,arguments)}i.useEffect((function(){var e=function(){var e=(0,je.Z)((function(){return(0,Ne.__generator)(this,(function(e){switch(e.label){case 0:return d&&m?[4,W()]:[2];case 1:return e.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}();e()}),[d,m,W]),i.useEffect((function(){if(d&&m){var e=d.watchTextFile(hr.l,{onChange:(0,je.Z)((function(){return(0,Ne.__generator)(this,(function(e){switch(e.label){case 0:return m?[4,W(!0)]:[2];case 1:return e.sent(),[2]}}))}))});return function(){e(),m&&(_(!1),w(!1),B(!1))}}}),[m,d,_,W]),i.useEffect((function(){"react"!==j&&("jsx"!==L&&"tsx"!==L?h&&N(h.language):N("react"))}),[L,j,N,h]);var K=function(){var e="html"===j||"nodejs"===j,t=(0,r.tZ)(p.xv,{multiline:!0,color:"dimmer",children:"You can use Log in with Replit with all web Repls. We have language clients for Nodejs and HTML - switch to a Repl that uses that language to see how to use it."});return y?(0,r.BX)(r.HY,{children:[(0,r.BX)(p.xv,{multiline:!0,color:"dimmer",children:["Your users can log in to your Repl using a custom button. Start by importing the package below"," ",(0,r.BX)("span",{onClick:O,css:[p.l0.color.blueStronger,p.l0.cursor.pointer],onKeyDown:O,role:"button",tabIndex:0,children:[" ","or use a prebuilt login page."]})]}),!e&&t]}):S?(0,r.BX)(r.HY,{children:[(0,r.BX)(p.xv,{multiline:!0,color:"dimmer",children:["Your Repl will automatically direct users to a prebuilt login page. Start by importing the package below"," ",(0,r.BX)("span",{onClick:V,css:[p.l0.color.blueStronger,p.l0.cursor.pointer],onKeyDown:V,role:"button",tabIndex:0,children:[" ","or use your own custom button."]})]})," ",!e&&t]}):(0,r.BX)(p.xv,{multiline:!0,css:[p.l0.mb(32),p.l0.pl(8),p.l0.pr(8)],children:["Let users log in to your Repl. Use a prebuilt login page or customize your own button."," ",(0,r.tZ)("a",{href:"https://docs.replit.com/hosting/repl-auth-sidebar",target:"_blank",rel:"noopener",css:[p.l0.color.accentPrimaryStronger,p.l0.pr(4)],children:"Learn more"})]})},J=function(){return R||X?(0,r.tZ)(p.G7,{css:[p.l0.align.center],children:(0,r.tZ)(me.Z,{})}):F?l?(0,r.tZ)(p.xv,{multiline:!0,css:[p.l0.color.accentNegativeStronger],children:l}):G?"html"===j||U?M?(0,r.BX)(p.G7,{children:[(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8),p.l0.pl(8),p.l0.pr(8)],children:[(0,r.tZ)(p.G7,{css:[p.l0.colWithGap(8)]}),(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8)],children:["nodejs"===j&&y?null:(0,r.tZ)(Sr,{activeFile:f,langKey:j}),y?(0,r.tZ)(Er,{activeFile:f,langKey:j}):null]})]}),(0,r.BX)(p.G7,{css:[p.l0.pl(8),p.l0.pr(8)],children:[(0,r.tZ)(p.xv,{variant:"small",css:[p.l0.mb(8),p.l0.mt(24),{textTransform:"uppercase",fontWeight:p.TV.fontWeightMedium}],children:"Usage"}),(0,r.tZ)(p.RX,{css:[p.l0.backgroundColor.backgroundHigher]}),(0,r.tZ)(p.G7,{css:[p.l0.mt(16)],children:(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8)],children:[" ","nodejs"===j&&y?(0,r.tZ)(Sr,{activeFile:f,langKey:j}):null,(0,r.tZ)(Br,{activeFile:f,langKey:j})]})})," "]}),(0,r.tZ)(p.G7,{css:[p.l0.pr(8),p.l0.pl(8),p.l0.mt(24),p.l0.mb(8)],children:(0,r.tZ)(p.zx,{onClick:$,text:"Disable Auth",colorway:"negative",outlined:!0})})]}):(0,r.BX)(p.G7,{css:[p.l0.pr(8),p.l0.pl(8)],children:[(0,r.tZ)(p.zx,{colorway:"primary",onClick:O,text:"Enable Login Page",iconLeft:(0,r.tZ)(Dr.Z,{})}),(0,r.BX)(p.xv,{multiline:!0,css:[p.l0.textAlign.center,p.l0.mt(8),p.l0.fontSize(12),p.l0.color],children:["Automatically redirect users to a prebuilt login page"," ",(0,r.tZ)("span",{onClick:V,css:[p.l0.color.blueStronger,p.l0.cursor.pointer],onKeyDown:V,role:"button",tabIndex:0,children:"or use your own custom button."})]})]}):(0,r.BX)(p.G7,{css:[p.l0.textAlign.center],children:[(0,r.tZ)(p.E_,{colorway:"warning",text:"Please start your web app to use Log in with Replit"}),(0,r.tZ)(p.xv,{multiline:!0,css:[p.l0.mt(4)],children:(0,r.tZ)("a",{href:"https://docs.replit.com/hosting/deploying-http-servers",target:"_blank",rel:"noopener",children:"Learn how to start a web app"})})]}):(0,r.BX)(p.G7,{css:[p.l0.textAlign.center],children:[(0,r.tZ)(p.E_,{colorway:"warning",text:"Please create a .replit file to use Log in with Replit"}),(0,r.tZ)(p.xv,{multiline:!0,css:[p.l0.mt(4)],children:(0,r.tZ)("a",{href:"https://docs.replit.com/programming-ide/configuring-repl#replit",target:"_blank",rel:"noopener",children:"Learn more about the .replit file"})})]}):(0,r.tZ)(p.G7,{css:[p.l0.align.center],children:(0,r.tZ)(jr,{})})};return(0,r.BX)(p.G7,{css:[p.l0.colWithGap(16),p.l0.backgroundColor.backgroundDefault,p.l0.p(8),p.l0.borderRadius(0,4,4,0)],children:[(0,r.tZ)(p.h4,{level:2,variant:"subheadBig",children:"Log in with Replit"}),(0,r.BX)(p.G7,{css:[p.l0.colWithGap(16),{overflowY:"auto",width:"100%",flex:"1"}],children:[(0,r.tZ)(K,{}),(0,r.tZ)(J,{})]})]})}var jr=function(){return(0,r.BX)(p.G7,{css:[p.l0.colWithGap(16)],children:[(0,r.BX)(p.xv,{multiline:!0,children:[(0,r.tZ)("a",{href:"https://docs.replit.com/hosting/repl-auth-sidebar",target:"_blank",rel:"noopener",css:[p.l0.color.accentPrimaryStronger,p.l0.pr(4)],children:"Replit Authentication"}),"is the fastest and easiest way to set up authentication in your Repl. Try it out by logging in or signing up."]}),(0,r.tZ)(p.ZP,{href:"/signup",colorway:"primary",text:"Sign up",iconLeft:(0,r.tZ)(oe.Z,{})})]})},Nr={Content:function(){return(0,r.tZ)(p.G7,{css:[p.l0.height("100%"),p.l0.overflowY("auto"),H.F3],children:(0,r.tZ)(Ir,{})})},Icon:function(e){var t=e.size;return(0,r.tZ)(Dr.Z,{size:t})},getTitle:function(){return"Authentication"}},Lr=n(82947),zr={Content:function(){return null},Icon:function(){return null},getTitle:function(){return""}},Pr=n(34467),Ar=n(24337),Xr={Content:function(){return(0,r.tZ)(Ur,{})},Icon:function(e){var t=e.size;return(0,r.tZ)(Pr.Z,{size:t})},getTitle:function(){return"Output"}};function Ur(){var e=(0,v.Z)(),t=e.fs,n=e.container;return(0,r.tZ)(p.G7,{css:[p.l0.flex.growAndShrink(1)],children:(0,r.tZ)(Ar.Z,{fs:t,container:n})})}var Fr=n(72092),Mr=n(39715),Wr=n(87653),Or=n(34054);function Hr(e){var t=e.pane,n=e.label,r=e.icon,i=e.action;return(0,Mr.fA)({type:"paneAction",label:n,icon:r,action:i,pane:t},{match:Mr.pl})}var Vr={Content:function(e){var t=e.options;return(0,r.tZ)(qr,{visible:!t.isHidden})},Icon:function(e){var t=e.size;return(0,r.tZ)(Or.Z,{size:t})},getTitle:function(){return"Shell"},getActions:function(e){return function(){return[Hr({label:"Clear",icon:(0,r.tZ)(Oe.Z,{}),action:{type:"clear"},pane:e}),Hr({label:"Search",icon:(0,r.tZ)(Wr.Z,{}),action:{type:"search"},pane:e})]}}};function qr(e){var t=e.visible,n=(0,v.Z)(),i=n.container,o=n.fs;return(0,r.tZ)(Fr.Z,{container:i,fs:o,autoFocus:t})}var $r=n(58979),Yr=n(64080),Kr=n(29830),Jr={Content:function(e){var t=e.pane,n=e.options.replacePane;return(0,r.tZ)(Qr,{path:t.data.path,replacePane:n})},Icon:function(e){var t=e.size;return(0,r.tZ)(Yr.Z,{size:t})},getTitle:function(e){return e.data.path}};function Qr(e){var t=e.path,n=e.replacePane,i=(0,v.Z)(),o=i.fs,a=i.broadcast,l=i.presence;return(0,r.BX)(r.HY,{children:[(0,r.tZ)(Kr.HK,{path:t,replacePane:n}),(0,r.tZ)(Kr.VY,{children:(0,r.tZ)($r.Z,{fs:o,broadcast:a,presence:l,filePath:t})})]})}var ei=n(63872),ti=n(63736),ni={Content:function(e){var t=e.pane,n=e.options;return(0,r.tZ)(ri,{path:t.data.path,replacePane:n.replacePane})},Icon:function(e){var t=e.pane,n=e.size;return(0,r.tZ)(ti.Z,{path:t.data.path,size:n})},getTitle:function(e){return e.data.path}};function ri(e){var t=e.path,n=e.replacePane,i=(0,v.Z)().fs;return(0,r.BX)(r.HY,{children:[(0,r.tZ)(Kr.HK,{path:t,replacePane:n}),(0,r.tZ)(Kr.VY,{centered:!0,children:(0,r.tZ)(ei.Z,{filePath:t,fs:i})})]})}var ii=n(83074),oi=n(56464),ai=n(23053);function li(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=(0,i.useState)(null),r=n[0],o=n[1],a=(0,mn.Z)((function(){return e}),(0,ie.Z)(t)),l=(0,v.Z)().git;return(0,i.useEffect)((function(){var e=!1;return a(l).then((function(t){e||o(t)})).catch((function(){e||o({error:ai.a.UNKNOWN_NOT_GIT})})),function(){e=!0,o(null)}}),[a,l]),r}var si,ci,ui=n(1439),di=n(48505),fi=n(93373),pi=n(83117);function hi(e){var t=e.mode,n=e.remote,o=e.branch,a=e.current,l=e.switchMode,s=e.onSearchOpen,c=e.onSearchClose,u=e.onSearchChange,d=e.onSwitchBranch,f=(0,i.useState)(!1),h=f[0],m=f[1],v=(0,i.useCallback)((function(){m(!0),null===s||void 0===s||s()}),[s]),g=(0,i.useCallback)((function(){m(!1),null===c||void 0===c||c()}),[c]),b=null,Z=null;if(h)b=(0,r.tZ)(xi,{mode:t,onSearchChange:u,closeSearch:g}),Z=(0,r.tZ)(yi,{closeSearch:g});else switch(t){case si.DASHBOARD:b=(0,r.BX)(r.HY,{children:[(0,r.tZ)(ui.Z,{size:16}),(0,r.tZ)(p.xv,{variant:"subheadDefault",children:"All Branches"})]}),Z=(0,r.BX)(r.HY,{children:[(0,r.tZ)(Zi,{openSearch:v}),n!==ci.GITHUB?null:(0,r.tZ)(bi,{})]});break;case si.BRANCH:b=(0,r.BX)(r.HY,{children:[(0,r.tZ)(vi,{switchMode:l}),(0,r.tZ)(mi,{branch:o,current:a})]}),Z=(0,r.BX)(r.HY,{children:[o===a?null:(0,r.tZ)(gi,{branch:o,onSwitchBranch:d}),(0,r.tZ)(Zi,{openSearch:v}),n!==ci.GITHUB?null:(0,r.tZ)(bi,{})]})}return(0,r.BX)(p.G7,{css:[p.l0.px(8),p.l0.py(4),p.l0.rowWithGap(8),p.l0.align.center,p.l0.justify.spaceBetween,{borderBottom:"1px solid ".concat(p.TV.outlineDimmer)}],children:[(0,r.tZ)(p.G7,{css:[p.l0.rowWithGap(8),p.l0.align.center,p.l0.flex.grow(1)],children:b}),(0,r.tZ)(p.G7,{css:[p.l0.rowWithGap(8),p.l0.align.center],children:Z})]})}function mi(e){var t=e.branch,n=e.current;if(!t)throw new Error("Tried to show header for a null branch");return(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(8),p.l0.align.baseline],children:[(0,r.tZ)(p.xv,{variant:"subheadDefault",children:t}),t===n?(0,r.BX)(r.HY,{children:[(0,r.tZ)(p.xv,{color:"dimmest",children:"\u2022"}),(0,r.tZ)(p.xv,{color:"dimmest",children:"Current"})]}):null]})}function vi(e){var t=e.switchMode;return(0,r.tZ)(p.hU,{alt:"Back to dashboard",size:18,onClick:function(){t({mode:si.DASHBOARD})},children:(0,r.tZ)(di.Z,{})})}function gi(e){var t=e.branch,n=e.onSwitchBranch;return(0,r.tZ)(p.hU,{alt:'Switch to branch "'.concat(t,'"'),size:24,onClick:n,children:(0,r.tZ)(pi.Z,{})})}function bi(){return(0,r.tZ)(p.hU,{alt:"Open GitHub settings",size:24,children:(0,r.tZ)(fi.Z,{})})}function Zi(e){var t=e.openSearch;return(0,r.tZ)(p.hU,{alt:"Start search",size:24,onClick:t,children:(0,r.tZ)(Wr.Z,{})})}function yi(e){var t=e.closeSearch;return(0,r.tZ)(p.zx,{css:[p.l0.p(4),{background:"none"}],text:"Cancel",onClick:t})}function xi(e){var t=e.mode,n=e.onSearchChange,i=e.closeSearch,o=t===si.DASHBOARD?"Search for branches...":"Search for commits...";return(0,r.BX)("div",{css:[p.l0.position.relative,p.l0.flex.grow(1)],children:[(0,r.tZ)(Wr.Z,{css:[p.l0.position.absolute,p.l0.left(8),p.l0.top(8)],color:p.TV.foregroundDimmest}),(0,r.tZ)(p.II,{css:[p.l0.width("100%"),p.l0.pl(32),p.l0.py(4),p.l0.borderRadius(4),{border:"none"}],autoFocus:!0,placeholder:o,onBlur:function(e){e.target.value.trim()||i()},onChange:function(e){return t=e.target.value,void(null===n||void 0===n||n(t));var t},onKeyDown:function(e){"Escape"===e.key&&i()}})]})}function wi(){return(0,r.tZ)(p.G7,{css:[p.l0.p(8),p.l0.colWithGap(8)],children:(0,r.tZ)(p.xv,{children:"Branch mode!"})})}!function(e){e.DASHBOARD="DASHBOARD",e.BRANCH="BRANCH"}(si||(si={})),function(e){e.NO_REMOTE="NO_REMOTE",e.GITHUB="GITHUB"}(ci||(ci={}));var ki=n(48869),Ci=n(56124),Si=n(79803),_i=n(50289),Ti=n(65617),Ri=n(99086);function Bi(e){var t=e.name,n=e.avatar,i=void 0===n?null:n,o=e.color,a=void 0===o?"default":o,l=e.small,s=void 0!==l&&l,c=e.flip,u=void 0!==c&&c;return(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(4),p.l0.align.baseline,u?p.l0.flex.rowReverse:p.l0.flex.row],children:[i?(0,r.tZ)(p.qE,{css:{alignSelf:"center"},username:t,src:i,size:s?12:16}):null,(0,r.tZ)(p.xv,{css:[p.l0.fontWeight.medium],color:a,variant:s?"small":"text",children:t})]})}function Ei(e){var t=e.branch,n=e.current,i=void 0!==n&&n,o=e.onPreview;return(0,r.BX)(p.G7,{css:[p.l0.p(4),p.l0.flex.row,p.l0.align.center,p.l0.justify.spaceBetween],children:[(0,r.BX)(p.G7,{css:[p.l0.colWithGap(4),p.l0.flex.shrink(1)],children:[(0,r.tZ)(Di,{branch:t,current:i,onPreview:o}),(0,r.tZ)(ji,{branch:t})]}),(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(12),p.l0.flex.shrink(0)],children:[(0,r.tZ)(Ni,{onPreview:o,current:i}),(0,r.tZ)(Li,{})]})]})}function Gi(e){var t=e.children;return(0,r.tZ)("span",{css:[p.l0.color.foregroundDimmest,p.l0.fontSize("small")],children:t})}function Di(e){var t=e.branch,n=e.current,i=e.onPreview;return(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(4),p.l0.align.center,p.l0.textAlign.center,p.l0.flex.shrink(1),p.l0.fontWeight.medium],children:[n?(0,r.tZ)(Ri.Z,{size:12}):(0,r.tZ)(ui.Z,{size:12}),(0,r.BX)(p.xv,{css:[p.l0.rowWithGap(4),p.l0.align.baseline,p.l0.flex.shrink(1)],children:[(0,r.tZ)(Gi,{css:{alignSelf:"center"},children:t.type===Si.H.REMOTE?t.remote:null}),(0,r.tZ)(Ii,{name:t.name,onClick:i}),n?(0,r.BX)(r.HY,{children:[(0,r.tZ)(Gi,{children:"\u2022"}),(0,r.tZ)(Gi,{children:"Current"})]}):null]})]})}function Ii(e){var t=e.name,n=e.onClick;return(0,r.tZ)("span",{role:"button",tabIndex:-1,"aria-label":"View branch",css:{cursor:"pointer","&:hover":{textDecoration:"underline"}},onClick:n,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||null===n||void 0===n||n()},children:t})}function ji(e){var t=e.branch;return(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(8),p.l0.align.baseline,p.l0.flex.shrink(1)],children:[(0,r.tZ)(_i.Z,{css:{alignSelf:"center"},color:p.TV.foregroundDimmest,size:12}),(0,r.tZ)(Bi,{name:t.commit.author.name,email:t.commit.author.email,color:"dimmest",small:!0,flip:!0}),(0,r.tZ)(p.EK,{date:t.commit.author.date,textColor:"dimmest",textVariant:"small"})]})}function Ni(e){var t=e.onPreview,n=e.current,i=void 0!==n&&n?"View current branch":"Preview branch";return(0,r.tZ)(p.hU,{alt:i,onClick:t,children:(0,r.tZ)(s.Z,{})})}function Li(){return(0,r.tZ)(p.hU,{alt:"Actions for branch",children:(0,r.tZ)(Ti.Z,{})})}function zi(e){var t=e.name,n=e.branches,o=e.current,a=void 0===o?null:o,l=e.switchMode,s=e.foldable,c=void 0!==s&&s,u=e.folded,d=void 0!==u&&u,f=(0,i.useState)(!!c&&d),h=f[0],m=f[1],v=(0,i.useMemo)((function(){return n.map((function(e){return(0,r.tZ)(Ei,{branch:e,current:null!==a&&e.name===a.name,onPreview:function(){return l({mode:si.BRANCH,branch:e.name})}},e.name)}))}),[n,a,l]);return h?(0,r.tZ)(p.zx,{css:[p.l0.justify.spaceBetween,{verticalAlign:"middle"}],text:(0,r.tZ)(p.xv,{variant:"subheadDefault",children:t}),iconRight:(0,r.tZ)(ki.Z,{}),onClick:function(){return m(!1)}}):(0,r.BX)(p.G7,{css:[p.l0.display.flex],children:[(0,r.BX)(p.G7,{css:[p.l0.p(4),p.l0.flex.row,p.l0.align.center,p.l0.justify.spaceBetween],children:[(0,r.tZ)(p.xv,{variant:"subheadDefault",children:t}),c?(0,r.tZ)(p.hU,{alt:"Hide list",onClick:function(){return m(!0)},children:(0,r.tZ)(Ci.Z,{})}):null]}),(0,r.tZ)(p.Tg,{css:[p.l0.p(8),p.l0.colWithGap(16),p.l0.borderRadius(8)],elevated:!0,children:v})]})}function Pi(e){var t=e.switchMode,n=li(function(){var e=(0,je.Z)((function(e){var t,n,r,i,o,a,l,s;return(0,Ne.__generator)(this,(function(c){switch(c.label){case 0:return[4,e.listBranches()];case 1:return(t=c.sent()).error?[2,t]:[4,e.status()];case 2:return(n=c.sent()).error?[2,n]:(r=n.branch,o=r&&null!==(i=t.branches.find((function(e){return e.name===r})))&&void 0!==i?i:null,a=Date.now()-5184e6,l=t.branches.filter((function(e){return e.commit.author.date>a})),s=t.branches.filter((function(e){return e.commit.author.date<=a})),[2,{current:o,active:l,stale:s,error:null}])}}))}));return function(t){return e.apply(this,arguments)}}());if(!n)return(0,r.tZ)("div",{children:"Loading..."});if(n.error)return(0,r.tZ)("div",{children:n.error});var i=n.current,o=n.active,a=n.stale;return(0,r.BX)(p.G7,{css:[p.l0.p(8),p.l0.colWithGap(16)],children:[i?(0,r.tZ)(zi,{branches:[i],current:i,name:"Current",switchMode:t}):null,(0,r.tZ)(zi,{branches:o,current:i,name:"Active",switchMode:t,foldable:!0}),(0,r.tZ)(zi,{branches:a,current:i,name:"Stale",switchMode:t,foldable:!0,folded:!0})]})}function Ai(){var e,t=(0,i.useState)(si.DASHBOARD),n=t[0],o=t[1],a=(0,i.useState)(null),l=a[0],s=a[1],c=li((function(e){return e.status()}));if(!c)return(0,r.tZ)("div",{children:"Loading..."});if(c.error)return(0,r.tZ)("div",{children:(0,r.BX)(p.xv,{children:["Error: ",c.error]})});var u=null!==(e=c.branch)&&void 0!==e?e:null,d=c.upstream?ci.GITHUB:ci.NO_REMOTE,f=function(e){switch(e.mode){case si.DASHBOARD:o(si.DASHBOARD),s(null);break;case si.BRANCH:s(e.branch),o(si.BRANCH)}};return(0,r.BX)(p.G7,{children:[(0,r.tZ)(hi,{mode:n,remote:d,branch:l,current:u,switchMode:f}),n===si.DASHBOARD?(0,r.tZ)(Pi,{switchMode:f}):(0,r.tZ)(wi,{})]})}var Xi=n(23384),Ui={Content:function(){return(0,Xi.D)({controlName:"flag-git-gud"})?(0,r.tZ)(Fi,{}):(0,r.tZ)(oi.z,{})},Icon:function(e){var t=e.size;return(0,r.tZ)(ii.Z,{size:t})},getTitle:function(){return"Git"}};function Fi(){var e=(0,a.Z)(i.useState(!1),2),t=e[0],n=e[1];return(0,r.BX)(r.HY,{children:[t?(0,r.tZ)(Ai,{}):(0,r.tZ)(oi.z,{}),(0,r.tZ)(p.zx,{css:{position:"absolute",bottom:"16px",right:"16px",opacity:"0.5"},text:t?"Swap to Git1":"Swap to Git2",onClick:function(){return n(!t)}})]})}var Mi=n(55183),Wi=n(48732);function Oi(e){var t=e.reversed,n=void 0!==t&&t,o=e.hideName,l=void 0!==o&&o,s=e.color,c=void 0===s?"default":s,u=(0,a.Z)((0,Mi.bA)(),1)[0],d=(0,i.useMemo)((function(){return[n?p.l0.rowReverseWithGap(4):p.l0.rowWithGap(4),p.l0.align.center]}),[n]);if(!u)return null;if(0===u.count)return(0,r.BX)(p.G7,{css:d,children:[(0,r.tZ)(Ri.Z,{size:24}),(0,r.tZ)(p.xv,{color:c,children:"Server Authored"})]});var f=u.changes[u.version],h=u.users[f.userId];return h?(0,r.BX)(p.G7,{css:d,children:[(0,r.tZ)(p.qE,{size:24,src:h.image,username:h.username}),l?null:(0,r.tZ)(p.xv,{color:c,children:h.username})]}):f.timestamp>16546464e5?(0,r.BX)(p.G7,{css:d,children:[(0,r.tZ)(Ri.Z,{size:24}),l?null:(0,r.tZ)(p.xv,{color:c,children:"Server Authored"})]}):(0,r.BX)(p.G7,{css:d,children:[(0,r.tZ)(p.qE,{size:24,src:"/public/images/ghost.svg",username:"Unknown"}),l?null:(0,r.tZ)(p.xv,{color:c,children:"Unknown"})]})}var Hi=n(93456),Vi=n(87138),qi=n(92876),$i=n(75815),Yi=n(90132),Ki=n(60018),Ji=n(48270),Qi=function(e){(0,Yi.Z)(n,e);var t=(0,Ji.Z)(n);function n(e){var r;return(0,$i.Z)(this,n),(r=t.call(this,e)).name="UserError",r}return n}((0,Ki.Z)(Error));function eo(e,t,n){return new Promise((function(r,i){try{var o=e.watchTextFile(t,{onReady:function(){var e=(0,je.Z)((function(e){var t,a;return(0,Ne.__generator)(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,n(e)];case 1:return t=l.sent(),r(t),[3,3];case 2:return a=l.sent(),i(a),[3,3];case 3:return o(),[2]}}))}));return function(t){return e.apply(this,arguments)}}()})}catch(a){i(a)}}))}function to(e,t){return no.apply(this,arguments)}function no(){return no=(0,je.Z)((function(e,t){var n,r,i,o,a,l,s,c,u,d,f,p,h,m,v,g,b,Z;return(0,Ne.__generator)(this,(function(y){switch(y.label){case 0:n=new Set,r=!0,i=!1,o=void 0;try{for(a=t[Symbol.iterator]();!(r=(l=a.next()).done);r=!0)0!==(s=l.value).userId&&n.add(s.userId)}catch(x){i=!0,o=x}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return 0===n.size?[2,{}]:[4,e.query({query:Vi.bD,variables:{ids:Array.from(n)}})];case 1:if(c=y.sent(),u=c.data,d=c.error)throw d;f=u.currentUser?[u.currentUser].concat((0,ie.Z)(u.usersByIds)):u.usersByIds,p={},h=!0,m=!1,v=void 0;try{for(g=f[Symbol.iterator]();!(h=(b=g.next()).done);h=!0)Z=b.value,p[Z.id]={id:Z.id,username:Z.username,image:Z.image}}catch(x){m=!0,v=x}finally{try{h||null==g.return||g.return()}finally{if(m)throw v}}return[2,p]}}))})),no.apply(this,arguments)}function ro(){return ro=(0,je.Z)((function(e,t,n){var r,i,o;return(0,Ne.__generator)(this,(function(a){switch(a.label){case 0:return[4,eo(e,n,function(){var e=(0,je.Z)((function(e){var t,n;return(0,Ne.__generator)(this,(function(r){return t=e.fetchChanges,0===(n=e.version)?[2,{isDisposed:!1,result:[]}]:[2,t(1,n,"")]}))}));return function(t){return e.apply(this,arguments)}}())];case 1:return(r=a.sent()).isDisposed?[2,{data:null,handledError:"File deleted or removed."}]:(i=r.result,[4,to(t,i)]);case 2:return o=a.sent(),[2,{data:{changes:i,users:o},handledError:null}]}}))})),ro.apply(this,arguments)}function io(e,t,n){return eo(e,t,function(){var t=(0,je.Z)((function(t){var r,i,o,a,l,s,c,u,d;return(0,Ne.__generator)(this,(function(f){switch(f.label){case 0:if(r=t.fetchChanges,i=t.writeChange,o=t.version,n>o)throw new Error("Cannot restore to a version that does not exist");if(n===o)return[2];a=null,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,r(1,o,"")];case 2:if((l=f.sent()).isDisposed)throw new Qi("File deleted or removed.");return a=l.result,[3,4];case 3:throw f.sent(),new Qi("Something went wrong while restoring the file. It is possible that a bad connection is to blame. Please try again.");case 4:s=(0,Hi.Z)(a.slice(n,a.length).reverse()),c=s[0],u=s.slice(1),d=u.reduce((function(e,t){return e.compose(t.invertedChanges)}),c.invertedChanges);try{i(d)}catch(p){throw qi.Tb(p),new Qi("Something went wrong while restoring the file. Maybe the file changed while you were restoring it? Please try again.")}return[4,e.flush()];case 5:return f.sent(),[2]}}))}));return function(e){return t.apply(this,arguments)}}())}var oo=n(96929),ao=(0,He.iv)({display:"grid",gridTemplateColumns:"auto 1fr",rowGap:"0.5rem",columnGap:"1rem","> dt":{display:"flex",alignItems:"center",fontWeight:"bold"}});function lo(){var e=(0,We.Z)().showError,t=(0,i.useState)(!1),n=t[0],o=t[1],l=(0,i.useState)(!1),s=l[0],c=l[1],u=(0,i.useContext)(Mi.ox).closeHistory,d=(0,v.Z)().fs,f=(0,a.Z)((0,Mi.bA)(),1)[0],h=(0,oo.j)(),m="Restore",g=!0;function b(){return(b=(0,je.Z)((function(){var t,n,r;return(0,Ne.__generator)(this,(function(i){switch(i.label){case 0:if(!f||!d||s)return[2];i.label=1;case 1:return i.trys.push([1,3,4,5]),c(!0),(0,oo.p)("versionRestored"),t=f.filePath,n=f.version,[4,io(d,t,n+1)];case 2:return i.sent(),null===u||void 0===u||u(),[3,5];case 3:return r=i.sent(),(0,Wi.Z)(r,Qi)?(e(r.message),[2]):(h(r,"restore"),[3,5]);case 4:return o(!1),c(!1),[7];case 5:return[2]}}))}))).apply(this,arguments)}return f?0===f.count?(m="No history",g=!0):s||n?(m="Restoring...",g=!0):f.playing?(m="Playing...",g=!0):f.version===f.count-1?(m="Viewing latest",g=!0):(m="Restore to here",g=!1):(m="Loading...",g=!0),(0,r.BX)(r.HY,{children:[(0,r.tZ)(p.zx,{text:m,disabled:g,onClick:function(){return o(!0)},colorway:"primary",iconLeft:(0,r.tZ)(Rt.Z,{})}),f&&0!==f.count&&(0,r.tZ)(p.u_,{isOpen:n,onRequestClose:function(){s||o(!1)},children:(0,r.BX)(p.G7,{css:p.l0.colWithGap(24),children:[(0,r.tZ)(p.h4,{variant:"headerDefault",level:2,children:"Restore file version"}),(0,r.tZ)(p.Tg,{elevated:!0,css:[p.l0.px(16),p.l0.py(12),p.l0.borderRadius(8)],children:(0,r.BX)("dl",{css:ao,children:[(0,r.tZ)("dt",{children:"File"}),(0,r.tZ)("dd",{children:f.filePath}),(0,r.tZ)("dt",{children:"Version"}),(0,r.BX)("dd",{children:[f.version+1,(0,r.BX)("span",{css:[p.l0.color.foregroundDimmest],children:[(0,r.tZ)("span",{css:p.l0.mx(8),children:"/"}),f.count]})]}),(0,r.tZ)("dt",{children:"Date"}),(0,r.tZ)("dd",{children:(0,r.tZ)(p.EK,{date:f.changes[f.version].timestamp,dateFormat:"absolute"})}),(0,r.tZ)("dt",{children:"Author"}),(0,r.tZ)("dd",{children:(0,r.tZ)(Oi,{})})]})}),(0,r.tZ)(p.E_,{icon:(0,r.tZ)(ar.Info,{}),colorway:"positive",text:"Restoring is non-destructive. The restored content will become a new version at the end of history. You can always go back to the version you just had."}),(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(8),p.l0.justify.end],children:[(0,r.tZ)(p.zx,{text:"Cancel",disabled:s,onClick:function(){return o(!1)}}),(0,r.tZ)(p.zx,{text:s?"Restoring Version...":"Restore Version",disabled:s,colorway:"primary",onClick:function(){return b.apply(this,arguments)},iconLeft:(0,r.tZ)(Rt.Z,{})})]})]})})]})}var so=function(){function e(){(0,$i.Z)(this,e),this.map=new Map}var t=e.prototype;return t.getOrInit=function(e){var t=this.map.get(e);return t||(t=new Map,this.map.set(e,t)),t},t.add=function(e,t,n){this.getOrInit(e).set(t,n)},t.flush=function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.map[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=(0,a.Z)(r.value,2),l=o[0],s=o[1];if(l&&"current"in l&&(l=l.current),l){var c=!0,u=!1,d=void 0;try{for(var f,p=s[Symbol.iterator]();!(c=(f=p.next()).done);c=!0){var h=(0,a.Z)(f.value,2),m=h[0],v=h[1];l.style.setProperty(m,v)}}catch(g){u=!0,d=g}finally{try{c||null==p.return||p.return()}finally{if(u)throw d}}}}}catch(g){t=!0,n=g}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this.map.clear()},e}(),co=new so,uo=!1;function fo(e,t,n){if(null!==e){if("string"===typeof t){if(void 0===n)throw new Error("value is undefined when prop is string");co.add(e,t,n)}else for(var r in t)co.add(e,r,t[r]);uo||(uo=!0,requestAnimationFrame((function(){co.flush(),uo=!1})))}}function po(e,t){var n=(0,a.Z)((0,Mi.bA)(),1)[0],o=(0,i.useRef)(null);(0,i.useImperativeHandle)(t,(function(){return o.current})),n&&o.current&&(o.current.setAttribute("aria-valuemin","1"),o.current.setAttribute("aria-valuemax",String(n.count)),o.current.setAttribute("aria-valuenow",String(n.version+1)));var l=(0,i.useMemo)((function(){return(0,r.tZ)("div",{ref:o,role:"slider",tabIndex:0,css:{position:"absolute",top:"0",left:"calc((100% - 16px) * var(--scrubber-progress, 0))",width:"16px",height:"16px",backgroundColor:p.TV.accentPrimaryDefault,borderRadius:"100%",outline:"none",cursor:"pointer",transition:"left var(--scrubber-transition-time, 100ms) ease-out",willChange:"left, transition",":focus":{boxShadow:"0 0 0 1px ".concat(p.TV.foregroundDefault," inset")}}})}),[]);return n&&n.count>1?l:null}var ho=(0,i.forwardRef)(po);function mo(e,t){var n=(0,a.Z)((0,Mi.bA)(),1)[0],o=(0,i.useMemo)((function(){return(0,r.BX)(r.HY,{children:[(0,r.tZ)("div",{ref:t,"aria-hidden":!0,css:{position:"relative",top:"0",width:"100%",height:"16px",margin:"0",cursor:"pointer"}}),(0,r.tZ)("div",{"aria-hidden":!0,css:{position:"absolute",top:"6px",left:"0",width:"100%",height:"4px",margin:"0",overflow:"hidden",pointerEvents:"none",backgroundColor:p.TV.backgroundHighest,borderRadius:"2px"},children:(0,r.tZ)("div",{"aria-hidden":!0,css:{position:"absolute",top:"0",left:"0",width:"100%",height:"4px",margin:"0",pointerEvents:"none",backgroundColor:p.TV.accentPrimaryDefault,transformOrigin:"left",transform:"scaleX(var(--scrubber-progress, 0))",transition:"transform var(--scrubber-transition-time, 100ms) ease-out",willChange:"transform, transition"}})})]})}),[t]),l=(0,i.useMemo)((function(){return(0,r.tZ)("div",{ref:t,"aria-hidden":!0,css:{width:"100%",height:"16px",pointerEvents:"none"},children:(0,r.tZ)("div",{css:{position:"absolute",width:"100%",height:"4px",top:"6px",left:"0",backgroundColor:p.TV.backgroundHighest,borderRadius:"2px"}})})}),[t]);return n&&n.count>1?o:l}var vo,go=(0,i.forwardRef)(mo),bo=["ArrowLeft","ArrowRight","Home","End"];function Zo(){var e=(0,a.Z)((0,Mi.bA)(),2),t=e[0],n=e[1],o=(0,i.useState)(!1),l=o[0],s=o[1],c=(0,i.useRef)(null),u=(0,i.useRef)(null),d=(0,i.useRef)(null),f=function(e){fo(c,"--scrubber-transition-time",e)},h=function(e){fo(c,"--scrubber-progress",e.toString())};if(t&&!l){var m=t.version/(t.count-1);h(m),t.playing?f("50ms"):f("100ms")}return(0,i.useEffect)((function(){if(t&&u.current&&d.current&&!l){var e=u.current,r=d.current,i=function(i){if(0===i.button){s(!0),r.focus();var o=e.getBoundingClientRect(),a=r.getBoundingClientRect(),l=o.width,c=a.width,u=i.target===e?c/2:i.clientX-a.left,d=null,p=function(e){var r=e-o.left-u,i=Math.max(0,Math.min(1,r/(l-c)));i!==d&&(d=i,h(i),n({version:Math.round(i*(t.count-1)),playing:!1}))};p(i.clientX);var m=function(e){f("0ms"),p(e.clientX),e.preventDefault(),e.stopPropagation()},v=function(){window.removeEventListener("pointermove",m),window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",v),f("100ms"),s(!1)};window.addEventListener("pointermove",m),window.addEventListener("pointerup",v),window.addEventListener("pointercancel",v),i.preventDefault(),i.stopPropagation()}};return e.addEventListener("pointerdown",i),r.addEventListener("pointerdown",i),function(){e.removeEventListener("pointerdown",i),r.removeEventListener("pointerdown",i)}}}),[t,n,l]),(0,i.useEffect)((function(){if(t&&d.current&&!l){var e=d.current,r=function(e){if(t&&bo.includes(e.key)){var r=e.shiftKey?10:1,i=t.version,o=t.count-1,a=Math.max(0,i-r),l=Math.min(o,i+r),s=null;switch(e.key){case"ArrowLeft":s=a;break;case"ArrowRight":s=l;break;case"Home":s=0;break;case"End":s=o}null!==s&&(n({version:s,playing:!1}),e.preventDefault(),e.stopPropagation())}};return e.addEventListener("keydown",r),function(){e.removeEventListener("keydown",r)}}}),[t,n,l]),(0,i.useMemo)((function(){return(0,r.BX)(p.G7,{innerRef:c,css:{position:"relative",height:"16px",width:"100%",touchAction:"none","--scrubber-progress":1,"--scrubber-transition-time":"100ms",":hover, :focus-within":{filter:"brightness(1.1)"},":hover:focus-within":{filter:"brightness(1.2)"}},children:[(0,r.tZ)(go,{ref:u}),(0,r.tZ)(ho,{ref:d})]})}),[])}!function(e){e.None="0ms",e.Normal="100ms",e.Fast="50ms"}(vo||(vo={}));var yo=n(66252);function xo(e){var t=(0,i.useState)({data:null,loading:!0,error:null,handledError:null}),n=t[0],r=t[1],o=(0,v.Z)().fs,a=(0,yo.x)();return(0,i.useEffect)((function(){if(e){r({data:null,loading:!0,error:null,handledError:null});var t=!1;return function(e,t,n){return ro.apply(this,arguments)}(o,a,e).then((function(e){var n=e.data,i=e.handledError;t||r(i?{data:null,loading:!1,error:null,handledError:i}:{data:n,loading:!1,error:null,handledError:null})})).catch((function(e){t||((0,Wi.Z)(e,Error)||(e=new Error(e)),r({data:null,loading:!1,error:e,handledError:null}))})),function(){t=!0}}r({data:null,loading:!1,error:null,handledError:null})}),[e,o,a]),n}var wo=n(11163);function ko(){var e=(0,i.useContext)(Mi.ox).closeHistory;if(!e)throw new Error("history pane context not found");return(0,r.tZ)(p.zx,{text:"Cancel",onClick:function(){(0,oo.p)("historyExplicitlyClosed"),e()}})}var Co=n(519),So=(0,He.iv)({filter:"grayscale(100%) opacity(0.5)",pointerEvents:"none"});function _o(){var e,t="/replEnvironmentMobile"===(0,wo.useRouter)().pathname,n=(0,a.Z)((0,Mi.bA)(),2),i=n[0],o=n[1],l=(0,dn.H)(),s=!i||0===i.count;return(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(8),p.l0.align.center,s?So:null],children:[(0,r.tZ)(Co.Z,{id:l("diffButton"),isOn:null!==(e=null===i||void 0===i?void 0:i.comparing)&&void 0!==e&&e,onChange:function(e){if(!s){var t=e.target.checked;o({comparing:t})}}}),(0,r.tZ)("label",{css:[{cursor:"pointer",userSelect:"none"},p.l0.flex.column,p.l0.align.center],htmlFor:l("diffButton"),children:(0,r.tZ)(p.xv,{children:t?"Compare":"Compare Latest"})})]})}var To=n(8941);function Ro(){var e=(0,a.Z)((0,Mi.bA)(),1)[0],t=0,n=0;e&&0!==e.count&&(t=e.version+1,n=e.count);var i=e?"default":"dimmer";return(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(4),p.l0.justify.spaceBetween],children:[(0,r.tZ)(p.xv,{css:{minWidth:"2ch",textAlign:"right"},color:i,children:t}),(0,r.tZ)(p.xv,{css:{width:"1ch",textAlign:"center"},color:"dimmer",children:"/"}),(0,r.tZ)(p.xv,{css:{minWidth:"2ch",textAlign:"left"},color:"dimmer",children:n})]})}function Bo(e){if(e<0)throw new Error('Require at least zero ops to compute pace, got "'+e+'"');return 1/Math.log(e+2)*100}function Eo(){var e,t,n,o,l=(0,a.Z)((0,Mi.bA)(),2),s=l[0],c=l[1],u=(null!==(t=null===s||void 0===s||null===(e=s.changes)||void 0===e?void 0:e.length)&&void 0!==t?t:1)-1,d=null!==(n=null===s||void 0===s?void 0:s.version)&&void 0!==n?n:0,f=null!==(o=null===s||void 0===s?void 0:s.playing)&&void 0!==o&&o,h=!s||0===s.count,m=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Bo,o=(0,i.useState)(!1),a=o[0],l=o[1],s=(0,i.useCallback)((function(){t(1)}),[t]),c=(0,i.useCallback)((function(){e+1>n?l(!1):t(e+1)}),[t,e,n]),u=function(){l(!0)},d=function(){l(!1)};return(0,i.useEffect)((function(){if(a){var e=setTimeout((function(){c()}),r(n));return function(){return clearTimeout(e)}}}),[a,c,r,n]),{isPlaying:a,start:u,stop:d,reset:s}}(d,(function(e){return c({version:e})}),u),v=m.isPlaying,g=m.start,b=m.stop;(0,i.useEffect)((function(){v&&!f?b():!v&&f&&g()}),[f,v,g,b]);var Z="Loading...";return s&&(v?Z="Pause":s.version===s.count-1?Z="Play file history from beginning":0===s.version?Z="Play file history":s.version>0&&(Z="Play file history from here")),(0,r.tZ)(p.hU,{alt:Z,size:24,disabled:h,onClick:function(){c(d===u?{version:0,playing:!0}:{playing:!f})},children:v?(0,r.tZ)(ar.Pause,{}):(0,r.tZ)(ar.PlayFilled,{})})}function Go(){return(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(4),p.l0.align.center],children:[(0,r.tZ)(Eo,{}),(0,r.tZ)(Do,{}),(0,r.tZ)(Ro,{}),(0,r.tZ)(Io,{})]})}function Do(){var e=(0,a.Z)((0,Mi.bA)(),2),t=e[0],n=e[1],i=!t||0===t.version||0===t.count;return(0,r.tZ)(p.hU,{alt:"Move backwards one version",size:24,disabled:i,onClick:function(){t&&t.version>0&&n({version:t.version-1})},children:(0,r.tZ)(di.Z,{})})}function Io(){var e=(0,a.Z)((0,Mi.bA)(),2),t=e[0],n=e[1],i=!t||t.version===t.count-1||0===t.count;return(0,r.tZ)(p.hU,{alt:"Move forwards one version",size:24,disabled:i,onClick:function(){t&&t.version<t.count-1&&n({version:t.version+1})},children:(0,r.tZ)(To.Z,{})})}function jo(){var e=(0,a.Z)((0,Mi.bA)(),1)[0];if(!e||0===e.count)return null;var t=e.changes[e.version].timestamp;return(0,r.tZ)(p.EK,{textColor:"dimmer",dateFormat:"switch",date:t})}function No(e){var t=e.filePath,n="/replEnvironmentMobile"===(0,wo.useRouter)().pathname,o=n?p.l0.borderRadius(0):p.l0.borderRadius(0,0,8,8),l=(0,a.Z)((0,Mi.bA)(),2),s=l[0],c=l[1],u=(0,oo.j)(),d=xo(t),f=d.data,h=d.loading,m=d.error;return(0,i.useEffect)((function(){if(m)u(m,"history2-index",{filePath:t});else if(f&&!h)return c({filePath:t,changes:f.changes,users:f.users}),(0,oo.p)("historyLoaded"),function(){c(null)}}),[t,f,h,m,c,u]),(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8),p.l0.p(8),p.l0.zIndex(3),p.l0.overflow("hidden"),o,p.l0.backgroundColor.backgroundDefault,{borderTop:"2px solid ".concat(p.TV.backgroundHigher),boxShadow:"rgba(2, 2, 3, 0.125) 0px -16px 32px 0px"}],children:[(0,r.BX)(p.Tg,{css:[p.l0.position.relative,p.l0.colWithGap(4),p.l0.px(12),p.l0.pt(8),p.l0.pb(8),p.l0.align.center,p.l0.borderRadius(8),p.l0.overflow("hidden")],elevated:!0,children:[(0,r.tZ)(Zo,{}),(0,r.BX)(p.G7,{css:[p.l0.display.flex,p.l0.flex.row,p.l0.align.center,p.l0.justify.spaceBetween,p.l0.width("100%")],children:[(0,r.tZ)(Go,{}),s&&s.count>0?(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(4),p.l0.align.center],children:[(0,r.tZ)(jo,{}),h||n?null:(0,r.tZ)(p.xv,{color:"dimmer",children:"\u2022"}),(0,r.tZ)(Oi,{color:"dimmer",hideName:n,reversed:!0})]}):null]})]}),(0,r.BX)(p.G7,{css:[p.l0.display.flex,p.l0.flex.row],children:[(0,r.tZ)(Lo,{justify:"flex-start",children:(0,r.tZ)(_o,{})}),(0,r.BX)(Lo,{justify:"flex-end",children:[(0,r.tZ)(ko,{}),(0,r.tZ)(lo,{})]})]})]})}function Lo(e){var t=e.children,n=e.justify;return(0,r.tZ)("div",{css:{display:"flex",flexGrow:1,flexBasis:0,alignItems:"center",justifyContent:n,columnGap:p.TV.space8,minWidth:0},children:t})}var zo=n(2581),Po=n(52916),Ao=n(4010),Xo=n(68928),Uo=n(11143),Fo=n(18352),Mo=function(){function e(t){(0,$i.Z)(this,e),this.changes=[],this.forward=[],this.inverted=[],this.locations=[];var n=!0,r=!1,i=void 0;try{for(var o,a=this,l=function(){var e=o.value,t=e.changes,n=e.invertedChanges,r=null,i=!1;t.iterChangedRanges((function(e,t,n,o){i||(r||(r=o),n!==o&&(i=!0))})),a.forward.push(t),a.inverted.push(n),a.locations.push(r)},s=t[Symbol.iterator]();!(n=(o=s.next()).done);n=!0)l()}catch(c){r=!0,i=c}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}}var t=e.prototype;return t.slice=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;if(e>this.length||t>this.length||e<0||t<0)throw new Error("Invalid version range");if(e===t){if(0===this.length)return[et.as.empty(0),null];var n=this.forward[e].newLength;return[et.as.empty(n),null]}var r,i=Wo(e<t?this.forward.slice(e,t):this.inverted.slice(t,e).reverse()),o=e<t?e:t-1,a=null!==(r=this.locations[o])&&void 0!==r?r:null;return null!==a&&a>i.newLength&&(a=i.newLength),[i,a]},t.get=function(e){if(e>this.length||e<0)throw new Error("Invalid version");return this.changes[e]},t.documentFor=function(e){if(e>this.length||e<0)throw new Error("Invalid version");if(0===this.length)return"";var t=(0,a.Z)(this.slice(0,e),1)[0],n=et.xv.of([""]);return t.apply(n).sliceString(0)},(0,Fo.Z)(e,[{key:"length",get:function(){return this.forward.length}}]),e}();function Wo(e){if(0===e.length)return et.as.empty(0);if(1===e.length)return e[0];var t=(0,Hi.Z)(e),n=t[0],r=t.slice(1),i=n,o=!0,a=!1,l=void 0;try{for(var s,c=r[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value;i=i.compose(u)}}catch(d){a=!0,l=d}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}return i}var Oo=n(59119),Ho=n(35524),Vo=n(27585),qo=n(99094),$o=(0,Vo.B)();function Yo(e){if((0,Wi.Z)(e,et.YW)){var t=e.state.field($o.state,!1);return{compareTo:t,changed:e.startState.field($o.state,!1)!==t}}return{compareTo:e.field($o.state,!1),changed:!1}}function Ko(e,t){e.state.field($o.state,!1)!==t&&e.dispatch({effects:$o.effect.of(t)})}var Jo,Qo,ea=et.QQ.define({create:function(){return null},update:function(e,t){var n=Yo(t),r=n.compareTo,i=n.changed;if(!r)return null;if(!t.docChanged&&!i)return e;var o=t.state.doc.toString();return new qo.PO(o,r)}}),ta=null!==(Jo=globalThis.requestIdleCallback)&&void 0!==Jo?Jo:globalThis.requestAnimationFrame,na=null!==(Qo=globalThis.cancelIdleCallback)&&void 0!==Qo?Qo:globalThis.cancelAnimationFrame,ra=$e.p.line({class:"cm-diff-deleted"}),ia=function(e){(0,Yi.Z)(n,e);var t=(0,Ji.Z)(n);function n(e,r){var i;return(0,$i.Z)(this,n),(i=t.call(this)).insertion=e,i.highlight=r,i}var r=n.prototype;return r.destroy=function(){this.pendingHighlight&&na(this.pendingHighlight)},r.toDOM=function(){var e=document.createElement("div");return e.className="cm-diff-inserted cm-line",this.updateDOM(e),e},r.eq=function(e){return!e.pendingHighlight&&this.insertion===e.insertion},r.updateDOM=function(e){var t=this;return this.pendingHighlight&&(na(this.pendingHighlight),this.pendingHighlight=null),this.insertion.length?e.textContent=this.insertion:e.innerHTML="&nbsp;",this.highlight&&this.insertion.length&&(this.pendingHighlight=ta((function(){if(t.highlight){t.pendingHighlight=null;try{var n=t.highlight();e.innerHTML="",e.append(n)}catch(r){}}}))),!0},n}($e.l9),oa=et.QQ.define({create:function(){return $e.p.none},update:function(e,t){var n=t.state.field(ea,!1);if(!n)return $e.p.none;var r=Yo(t).changed;if(!t.docChanged&&!r)return e.map(t.changes);var i=[],o=function(e,t){i.push({from:e,to:e,value:t})},a=n.startInsertions();if(a){var l=!0,s=!1,c=void 0;try{for(var u,d=function(){var e=u.value,n=new ia(e.content,(function(){return aa(t.state,e.content)}));o(0,$e.p.widget({widget:n,side:-1,block:!0}))},f=a[Symbol.iterator]();!(l=(u=f.next()).done);l=!0)d()}catch(Z){s=!0,c=Z}finally{try{l||null==f.return||f.return()}finally{if(s)throw c}}}var p=!0,h=!1,m=void 0;try{for(var v,g=function(){var e=v.value;if(e.isDeleted&&o(e.from,ra),e.insertions){var n=!0,r=!1,i=void 0;try{for(var a,l=function(){var n=a.value,r=new ia(n.content,(function(){return aa(t.state,n.content)}));o(e.to,$e.p.widget({widget:r,side:1,block:!0}))},s=e.insertions[Symbol.iterator]();!(n=(a=s.next()).done);n=!0)l()}catch(Z){r=!0,i=Z}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}}},b=n.lines()[Symbol.iterator]();!(p=(v=b.next()).done);p=!0)g()}catch(Z){h=!0,m=Z}finally{try{p||null==b.return||b.return()}finally{if(h)throw m}}return $e.p.set(i,!0)},provide:function(e){return $e.tk.decorations.from(e)}});function aa(e,t){var n,r=document.createDocumentFragment(),i=null===(n=e.facet(Oo.dK))||void 0===n?void 0:n.parser;if(!i){var o=document.createElement("span");return o.textContent=t,r.append(o),r}var a=i.parse(t),l={style:function(t){return(0,Oo.QN)(e,t)}},s=0;if((0,Ho.bW)(a,l,(function(e,n,i){if(e>s){var o=document.createElement("span");o.textContent=t.slice(s,e),r.append(o)}var a=document.createElement("span");a.className=i,a.textContent=t.slice(e,n),r.append(a),s=n})),s<t.length){var c=document.createElement("span");c.textContent=t.slice(s),r.append(c)}return r}var la=function(e){(0,Yi.Z)(n,e);var t=(0,Ji.Z)(n);function n(e){var r;return(0,$i.Z)(this,n),(r=t.call(this)).line=e,r}var r=n.prototype;return r.eq=function(e){return this.line===e.line},r.toDOM=function(){var e=document.createElement("div");return e.className="cm-diff-gutter-element-fallback",e.innerText=this.line.toString(),e},n}($e.SJ),sa=function(e){(0,Yi.Z)(n,e);var t=(0,Ji.Z)(n);function n(e,r){var i;return(0,$i.Z)(this,n),(i=t.call(this)).elementClass="cm-diff-gutter-block",i.lines=e,r&&(i.preceding=r),i}var r=n.prototype;return r.eq=function(e){var t,n,r,i;if((null===(t=this.lines)||void 0===t?void 0:t.length)!==(null===e||void 0===e||null===(n=e.lines)||void 0===n?void 0:n.length))return!1;if((null===(r=this.preceding)||void 0===r?void 0:r.length)!==(null===e||void 0===e||null===(i=e.preceding)||void 0===i?void 0:i.length))return!1;if(this.preceding&&e.preceding)for(var o=0;o<this.preceding.length;o++){var a=this.preceding[o],l=e.preceding[o];if(a.height!==l.height||a.left!==l.left||a.right!==l.right)return!1}if(this.lines&&e.lines)for(var s=0;s<this.lines.length;s++){var c=this.lines[s],u=e.lines[s];if(c.height!==u.height||c.left!==u.left||c.right!==u.right)return!1}return!0},r.toDOM=function(){var e,t=this,n=document.createElement("div");if(this.preceding){var r=this.preceding.slice().reverse(),i=0,o=!0,a=!1,l=void 0;try{for(var s,c=r[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value;i+=u.height;var d=this.piece(u);d.style.position="absolute",d.style.top="-".concat(i,"px"),n.prepend(d)}}catch(p){a=!0,l=p}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}}var f=this.lines.map((function(e){return t.piece(e)}));return(e=n).append.apply(e,(0,ie.Z)(f)),n},r.piece=function(e){var t=e.height,n=e.left,r=e.right,i=document.createElement("span");i.className="cm-diff-gutter-part",null!==n&&(i.innerText=n.toString());var o=document.createElement("span");o.className="cm-diff-gutter-part",null!==r&&(o.innerText=r.toString());var a=document.createElement("div");return a.className="cm-diff-gutter-element",a.style.height="".concat(t,"px"),a.append(i,o),null!==n&&null!==r||(null===r&&a.classList.add("cm-diff-gutter-deleted"),null===n&&a.classList.add("cm-diff-gutter-inserted")),a},n}($e.SJ),ca=(0,$e.v5)({class:"cm-lineNumbers cm-diff-gutter",markers:function(e){var t=e.viewportLineBlocks,n=[],r=Yo(e.state).compareTo,i=e.state.field(ea,!1),o=function(e,t){n.push({from:e,to:e,value:t})};if(!r||!i){var a=!0,l=!1,s=void 0;try{for(var c,u=t[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d=c.value,f=e.state.doc.lineAt(d.from).number;if(d.type===$e.kH.Text)o(d.from,new la(f));else if(Array.isArray(d.type)){var p=!0,h=!1,m=void 0;try{for(var v,g=d.type[Symbol.iterator]();!(p=(v=g.next()).done);p=!0){var b=v.value;if(b.type===$e.kH.Text){o(b.from,new la(f));break}}}catch(ie){h=!0,m=ie}finally{try{p||null==g.return||g.return()}finally{if(h)throw m}}}}}catch(ie){l=!0,s=ie}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}return et.Xs.of(n,!0)}var Z=!0,y=!1,x=void 0;try{for(var w,k=t[Symbol.iterator]();!(Z=(w=k.next()).done);Z=!0){var C=w.value,S=[],_=e.state.doc.lineAt(C.from).number,T=i.line(_);if(T){var R,B=e.defaultLineHeight,E=T.offset,G=T.isDeleted,D=T.insertions,I=1===_?i.startInsertions():null,j=I?I.length:0,N=I?[]:null;if(Array.isArray(C.type)&&C.type.length>=j+(null!==(R=null===D||void 0===D?void 0:D.length)&&void 0!==R?R:0)+1){for(var L=0;L<C.type.length;L++){var z=C.type[L];if((null===z||void 0===z?void 0:z.type)===$e.kH.Text){if(I&&N)for(var P=0;P<I.length;P++){var A,X=I[P],U=C.type[L-P-1];N.push({height:null!==(A=null===U||void 0===U?void 0:U.height)&&void 0!==A?A:B,left:null,right:X.number})}if(S.push({height:z.height,left:_,right:G?null:_+E}),D)for(var F=0;F<D.length;F++){var M,W=D[F],O=C.type[L+F+1];S.push({height:null!==(M=null===O||void 0===O?void 0:O.height)&&void 0!==M?M:B,left:null,right:W.number})}break}}o(C.from,new sa(S,N))}else{if(I&&N){var H=!0,V=!1,q=void 0;try{for(var $,Y=I[Symbol.iterator]();!(H=($=Y.next()).done);H=!0){var K=$.value;N.push({height:B,left:null,right:K.number})}}catch(ie){V=!0,q=ie}finally{try{H||null==Y.return||Y.return()}finally{if(V)throw q}}}if(S.push({height:C.height,left:_,right:G?null:_+E}),D){var J=!0,Q=!1,ee=void 0;try{for(var te,ne=D[Symbol.iterator]();!(J=(te=ne.next()).done);J=!0){var re=te.value;S.push({height:B,left:null,right:re.number})}}catch(ie){Q=!0,ee=ie}finally{try{J||null==ne.return||ne.return()}finally{if(Q)throw ee}}}o(C.from,new sa(S,N))}}}}catch(ie){y=!0,x=ie}finally{try{Z||null==k.return||k.return()}finally{if(y)throw x}}return et.Xs.of(n,!0)},lineMarkerChange:function(e){if(e.docChanged)return!0;var t=!0,n=!1,r=void 0;try{for(var i,o=e.transactions[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){if(Yo(i.value).changed)return!0}}catch(a){n=!0,r=a}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return!1},initialSpacer:function(e){return new la(e.state.doc.lines)},updateSpacer:function(e,t){var n=t.state.doc.lines;return Yo(t.state).compareTo?new sa([{height:0,left:n,right:n}]):new la(n)}}),ua="#0053A644",da="#c93c3733",fa=[$e.tk.baseTheme({".cm-diff-inserted":{backgroundColor:ua},".cm-diff-deleted":{backgroundColor:da},".cm-diff-gutter .cm-diff-gutter-block":{position:"relative",padding:"0"},".cm-diff-gutter-element":{display:"flex",width:"100%",alignItems:"center",columnGap:"8px",padding:"0 6px",borderLeft:"4px solid transparent"},".cm-diff-gutter-part":{display:"inline-block",height:"100%",width:"50%",textAlign:"center"},".cm-diff-gutter-inserted":{backgroundColor:ua,borderLeftColor:"#0053A6"},".cm-diff-gutter-deleted":{backgroundColor:da,borderLeftColor:"#c93c37"},".cm-diff-gutter + .cm-foldGutter":{width:"0",transform:"translateX(-12px)",overflow:"visible"},".cm-diff-gutter .cm-diff-gutter-element":{paddingRight:"16px"},".cm-diff-gutter .cm-diff-gutter-element-fallback":{paddingRight:"12px"}}),$o.state,ea,oa,ca,(0,Oo.mi)({openText:"\u25bc",closedText:"\u25b6\ufe0e"})];function pa(e,t){var n=(0,i.useMemo)((function(){return(null===t||void 0===t?void 0:t.changes)?new Mo(t.changes):null}),[null===t||void 0===t?void 0:t.changes]),r=(0,i.useMemo)((function(){return n?n.documentFor(n.length):null}),[n]),o=(0,i.useRef)({current:-1,next:0,pending:!1});(0,i.useEffect)((function(){if(e)return function(){o.current.pending=!1,o.current={current:-1,next:0,pending:!1}}}),[e]),(0,i.useEffect)((function(){if(e&&t&&n){t.comparing?Ko(e,r):Ko(e,null);var i=o.current;i.next=t.version,i.pending||i.current===i.next||(i.pending=!0,requestAnimationFrame((function(){!1!==i.pending&&(i.pending=!1,e&&n&&i.current!==i.next&&(!function(e,t,n,r){var i=(0,a.Z)(t.slice(n+1,r+1),2),o=i[0],l=i[1];if(o.length!==e.state.doc.length){var s=(0,a.Z)(t.slice(0,r+1),1)[0];if(s.length!==e.state.doc.length)throw new Error("Unresolvable mismatch between changes and document");return e.dispatch({changes:{from:0,to:e.state.doc.length}}),void e.dispatch({changes:s})}e.dispatch({changes:o,effects:l?$e.tk.scrollIntoView(l,{yMargin:10}):void 0})}(e,n,i.current,i.next),i.current=i.next))})))}}),[e,t,n,r])}var ha,ma=function(){function e(t){var n=this;(0,$i.Z)(this,e),this.view=t,this.overlay=document.createElement("div"),this.overlay.className="cm-overlay-generic",this.overlay.style.pointerEvents="none",this.overlay.style.contain="size style",this.overlay.setAttribute("aria-hidden","true"),this.view.scrollDOM.appendChild(this.overlay),this.elements=new Map,this.measureRequest={key:this,read:function(){var e=[],t=n.view.scrollDOM.getBoundingClientRect(),r=n.view.scrollDOM.scrollTop,i=n.view.scrollDOM.scrollLeft,o=!0,a=!1,l=void 0;try{for(var s,c=n.elements.values()[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value,d=u.dom,f=u.pos,p=u.offsetX,h=u.offsetY,m=n.view.coordsAtPos(f),v=n.view.lineBlockAt(f);if(m){var g=v.top-r+t.top+n.view.documentPadding.top,b=Math.round((m.top-g)/n.view.defaultLineHeight)*n.view.defaultLineHeight+g,Z=i+m.left-t.left+p,y=r+b-t.top+h;e.push({dom:d,x:Z,y:y})}else e.push({dom:d,x:null,y:null})}}catch(x){a=!0,l=x}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}return e},write:function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=function(){var e=i.value,t=e.dom,n=e.x,r=e.y;if(null===n||null===r)return t.style.visibility="hidden",t.style.transition="none","continue";t.style.visibility="",t.style.transform="translate(".concat(n,"px, ").concat(r,"px)"),t.style.transition.startsWith("none")&&requestAnimationFrame((function(){t.style.transition=""}))},a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0)o()}catch(l){n=!0,r=l}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}}}var t=e.prototype;return t.destroy=function(){this.view.scrollDOM.removeChild(this.overlay)},t.map=function(e){if(e.geometryChanged||e.viewportChanged){if(e.docChanged){var t=Array.from(this.elements.values()),n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value,s=e.changes.mapPos(l.pos,-1,et.gc.TrackDel);s?l.pos=s:this.removeElement(l.dom)}}catch(c){r=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}}this.view.requestMeasure(this.measureRequest)}},t.addElement=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!this.elements.has(e)){var i={dom:e,pos:t,offsetX:n,offsetY:r};return this.elements.set(e,i),this.overlay.appendChild(e),e.style.visibility="hidden",e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.willChange="transform",e.style.transition="none",this.view.requestMeasure(this.measureRequest),i}},t.removeElement=function(e){this.elements.has(e)&&(this.elements.delete(e),e.parentNode===this.overlay&&this.overlay.removeChild(e))},t.updateElement=function(e,t){var n=t.pos,r=t.offsetX,i=t.offsetY,o=this.elements.get(e);o&&(void 0!==n&&(o.pos=n),void 0!==r&&(o.offsetX=r),void 0!==i&&(o.offsetY=i),this.view.requestMeasure(this.measureRequest))},t.clear=function(){this.elements.clear(),this.overlay.innerHTML=""},e}();!function(e){e[e.Insertion=0]="Insertion",e[e.Deletion=1]="Deletion"}(ha||(ha={}));var va=Symbol.iterator,ga=function(){function e(t){(0,$i.Z)(this,e),this.map=new Map,this.duration=t}var t=e.prototype;return t.set=function(e,t,n,r,i){var o=this.map.get(e);o||(o=new Map,this.map.set(e,o)),o.set(t,{from:e,to:t,time:n,type:r,cursor:i})},t.get=function(e,t){var n=this.map.get(e);if(n)return n.get(t)},t.update=function(t){var n=Date.now(),r=new e(this.duration),i=!0,o=!1,a=void 0;try{for(var l,s=this[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;if(!(n-c.time>this.duration)){var u=t.changes.mapPos(c.from,-1,et.gc.TrackDel),d=t.changes.mapPos(c.to,-1,et.gc.TrackDel);if(null!==u&&null!==d){var f=c.cursor;t.docChanged&&(f=!1),r.set(u,d,c.time,c.type,f)}}}}catch(p){o=!0,a=p}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}return t.changes.iterChangedRanges((function(e,t,i,o){var a=i!==o?ha.Insertion:ha.Deletion;r.set(i,o,n,a,!0)}),!0),r},t.cursors=function(){var e,t,n,r,i,o,a;return(0,Ne.__generator)(this,(function(l){switch(l.label){case 0:e=!0,t=!1,n=void 0,l.label=1;case 1:l.trys.push([1,6,7,8]),r=this[Symbol.iterator](),l.label=2;case 2:return(e=(i=r.next()).done)?[3,5]:(o=i.value).cursor?[4,{type:o.type,pos:o.to}]:[3,4];case 3:l.sent(),l.label=4;case 4:return e=!0,[3,2];case 5:return[3,8];case 6:return a=l.sent(),t=!0,n=a,[3,8];case 7:try{e||null==r.return||r.return()}finally{if(t)throw n}return[7];case 8:return[2]}}))},t[va]=function(){var e=[],t=!0,n=!1,r=void 0;try{for(var i,o=this.map.values()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value,l=!0,s=!1,c=void 0;try{for(var u,d=a.values()[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f=u.value;e.push(f)}}catch(p){s=!0,c=p}finally{try{l||null==d.return||d.return()}finally{if(s)throw c}}}}catch(p){n=!0,r=p}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return e[Symbol.iterator]()},e}(),ba=1e3,Za="cm-flash-insertion",ya="cm-flash-deletion",xa="cm-flash-element",wa=$e.tk.theme((0,o.Z)({},".".concat(Za,", .").concat(ya),{display:"inline-block"}));function ka(e){return $e.p.mark({class:ya,tagName:xa,attributes:{"data-time":e.toString()}})}function Ca(e,t){var n=e===ha.Insertion?"rgba(0, 100, 255, 1)":"rgba(255, 32, 32, 1)",r=document.createElement("div");return r.style.width="3px",r.style.height=t,r.style.borderRadius="1px",r.style.backgroundColor=n,r.animate&&r.animate({opacity:[1,0]},{duration:500,delay:400,fill:"forwards"}),r}var Sa=function(e){(0,Yi.Z)(n,e);var t=(0,Ji.Z)(n);function n(){return(0,$i.Z)(this,n),t.apply(this,arguments)}var r=n.prototype;return r.isNested=function(){for(var e=this.parentElement;e&&!e.classList.contains("cm-line");){if((0,Wi.Z)(e,n)&&e.type===this.type)return!0;e=e.parentElement}return!1},r.stop=function(){var e,t;null===(e=this.animation)||void 0===e||null===(t=e.cancel)||void 0===t||t.call(e)},r.play=function(){var e=this.isPlaying;if(this.stop(),!this.isNested()){var t=Date.now()-parseInt(this.getAttribute("data-time")||"0",10);if(!(t>ba)){var n=this.type===ha.Insertion?"rgba(100, 255, 0, 0.3)":"rgba(255, 32, 32, 0.25)",r={backgroundColor:e?[n,n,"transparent"]:["transparent",n,"transparent"],offset:[0,.05,1]},i={id:"cm-flash-anim",duration:ba,easing:"ease-in-out",delay:-t};this.animate&&(this.animation=this.animate(r,i))}}},r.connectedCallback=function(){this.play()},r.attributeChangedCallback=function(e,t,n){"data-time"===e&&n&&this.play()},(0,Fo.Z)(n,[{key:"type",get:function(){return this.classList.contains(Za)?ha.Insertion:ha.Deletion}},{key:"isPlaying",get:function(){var e;return"running"===(null===(e=this.animation)||void 0===e?void 0:e.playState)}}],[{key:"observedAttributes",get:function(){return["data-time"]}}]),n}((0,Ki.Z)(HTMLElement));customElements.get(xa)||customElements.define(xa,Sa);var _a=function(){function e(t){(0,$i.Z)(this,e),this.view=t,this.prevFlashes=new ga(ba),this.decorations=$e.p.set([]),this.hasRenderedOnce=!1,this.overlay=new ma(t)}var t=e.prototype;return t.destroy=function(){this.overlay.destroy()},t.update=function(e){if(this.hasRenderedOnce){var t,n=this.prevFlashes.update(e),r=[],i=!0,o=!1,a=void 0;try{for(var l,s=n[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;switch(c.type){case ha.Insertion:r.push({from:c.from,to:c.to,value:(t=c.time,$e.p.mark({class:Za,tagName:xa,attributes:{"data-time":t.toString()}}))});break;case ha.Deletion:var u=e.state.wordAt(c.from);u&&r.push({from:u.from,to:c.to,value:ka(c.time)})}}}catch(x){o=!0,a=x}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}this.overlay.clear();var d=this.view.defaultLineHeight.toString()+"px",f=!0,p=!1,h=void 0;try{for(var m,v=n.cursors()[Symbol.iterator]();!(f=(m=v.next()).done);f=!0){var g=m.value,b=g.type,Z=g.pos,y=Ca(b,d);this.overlay.addElement(y,Z)}}catch(x){p=!0,h=x}finally{try{f||null==v.return||v.return()}finally{if(p)throw h}}this.prevFlashes=n,this.decorations=$e.p.set(r,!0)}else e.docChanged&&(this.hasRenderedOnce=!0)},e}(),Ta=$e.lg.fromClass(_a,{decorations:function(e){return e.decorations}}),Ra=[et.Wl.lowest([wa,Ta]),fa];function Ba(e){var t=e.filePath,n=(0,a.Z)((0,Mi.bA)(),1)[0],i=(0,oo.j)(),o=(0,Ve.Z)({filePath:t,noHistory:!0,readOnly:!0,hideGutter:!0,extensions:Ra,onException:function(e){i(e,"viewer-codemirror")}}),l=o.view,s=o.ref;return(0,zo.VD)(l),(0,Ao.ZP)({view:l}),(0,Po.Y)({view:l}),pa(l,n),(0,r.tZ)("div",{css:Uo.ev,children:(0,r.BX)("div",{css:Uo.ac,children:[!n&&(0,r.tZ)("div",{css:Uo.ov,children:(0,r.tZ)(Xo.Z,{})}),n&&0!==n.count?(0,r.tZ)("div",{css:Uo.ac,children:(0,r.tZ)("div",{ref:s,css:Uo.Mp})}):(0,r.tZ)(Ea,{})]})})}function Ea(){return(0,r.tZ)("div",{css:[Uo.ac,{display:"flex",alignItems:"center",justifyContent:"center"}],children:(0,r.tZ)("span",{children:"This file has no history."})})}var Ga={Content:function(e){var t=e.pane,n=e.options;return(0,r.tZ)(Da,(0,tt.Z)((0,ae.Z)({},t.data),{replacePane:n.replacePane}))},Icon:function(e){var t=e.size;return(0,r.tZ)(Rt.Z,{size:t})},getTitle:function(e){return e.data.path?"History - ".concat(e.data.path):"History - no file open"}};function Da(e){var t=e.path,n=e.replacePane,i=(0,Mi.EI)(t,n);return t?(0,r.tZ)(Ct.zt,{scope:zo.d8,children:(0,r.tZ)(Mi.ox.Provider,{value:i,children:(0,r.BX)("div",{css:{position:"relative",display:"flex",flexDirection:"column",overflowY:"hidden",height:"100%",width:"100%"},children:[(0,r.tZ)(Kr.HK,{path:t,replacePane:n}),(0,r.tZ)(Ba,{filePath:t}),(0,r.tZ)(No,{filePath:t})]})})}):null}var Ia=n(34837),ja=n.n(Ia),Na=n(1879),La=n(7835),za=n(28497),Pa=n(76818);function Aa(e){var t=e.activeFile,n=i.useRef(null),o=i.useRef(null),l=(0,v.Z)().fs,s=(0,We.Z)(),c=s.showError,d=s.showConfirm,p=(0,f.Z)(),h=(0,a.Z)(i.useState(!1),2),m=h[0],g=h[1],Z=(0,b.Z)((function(){var e=n.current;if(!e)return null;e.width=e.offsetWidth,e.height=e.offsetHeight;var t=e.getContext("2d");t&&(t.imageSmoothingEnabled=!1)}),{type:"debounce",wait:100});return i.useEffect((function(){var e=function(){if(!s)throw new Error("Tried to export png but peditCtxRef was null");var e=window.prompt("Export as:");if(e){var t="".concat(e,".png"),n=s.curFrame().toPNG();l.writeFile(t,un.Z.from(n)).then((function(){d("Successfully exported to ".concat(t))}))}},r=!1;if(t&&n.current){var i=n.current,a=t,s=null,u=a.endsWith(".kbmsprite");return function(){f.apply(this,arguments)}(),function(){r=!0,s&&(s.cleanUp(),s=null),o.current&&(o.current=null)}}function f(){return(f=(0,je.Z)((function(){var t,n,d;return(0,Ne.__generator)(this,(function(f){switch(f.label){case 0:return[4,l.readFile(a)];case 1:return t=f.sent(),r?[2]:t.error?(c("failed to read ".concat(a)),[2]):(n=t.content.toString(),d=n&&JSON.parse(n),i.width=i.offsetWidth,i.height=i.offsetHeight,(s=ja()(d?d.fromKaboom?{canvas:i,width:d.width,height:d.height}:{canvas:i,data:u?(0,za.C)(d):d}:{canvas:i,width:64,height:64})).on("change",p),s.on("save",p),s.on("export",e),o.current=s.save,i.focus(),[2])}}))}))).apply(this,arguments)}function p(){return h.apply(this,arguments)}function h(){return(h=(0,je.Z)((function(){var e;return(0,Ne.__generator)(this,(function(t){switch(t.label){case 0:if(r)return[2];if(!s)throw new Error("Expected peditCtx");return e=s.save(),u?[4,(0,za.u)(e)]:[3,2];case 1:e=t.sent(),t.label=2;case 2:return[4,l.writeFile(a,un.Z.from(JSON.stringify(e)))];case 3:return t.sent().error&&r&&c("Failed to save ".concat(a,", please try again")),[2]}}))}))).apply(this,arguments)}}),[l,t,n]),(0,r.BX)("div",{className:u().dynamic([["c86cb3d51fed2583",[p?"0 3px 0 3px ".concat(p):"0"]]])+" pedit",children:[(0,r.tZ)(u(),{id:"c86cb3d51fed2583",dynamic:[p?"0 3px 0 3px ".concat(p):"0"],children:".pedit.__jsx-style-dynamic-selector{width:100%;height:100%;position:relative;z-index:3;-webkit-box-shadow:".concat(p?"0 3px 0 3px ".concat(p):"0",";-moz-box-shadow:").concat(p?"0 3px 0 3px ".concat(p):"0",";box-shadow:").concat(p?"0 3px 0 3px ".concat(p):"0","}canvas.__jsx-style-dynamic-selector{width:100%;height:100%;outline:none;position:absolute;top:0;left:0}.upgrade-button.__jsx-style-dynamic-selector{position:absolute;bottom:0;left:0;z-index:100;padding:var(--space-4);border:solid 2px var(--foreground-default);background:var(--background-default);font-weight:700;outline:none}.upgrade-button.__jsx-style-dynamic-selector:hover{cursor:pointer;background:var(--background-higher)}.upgrade-modal.__jsx-style-dynamic-selector{background:var(--background-default);padding:var(--space-32)}")}),(0,r.tZ)("canvas",{ref:function(e){n.current=e,Z(e)},tabIndex:0,className:u().dynamic([["c86cb3d51fed2583",[p?"0 3px 0 3px ".concat(p):"0"]]])},t),t&&t.endsWith(".kbmsprite")?(0,r.tZ)("button",{onClick:function(){return g(!0)},className:u().dynamic([["c86cb3d51fed2583",[p?"0 3px 0 3px ".concat(p):"0"]]])+" upgrade-button",children:"Upgrade"}):null,(0,r.tZ)(Na.Z,{isOpen:m,onRequestClose:function(){return g(!1)},children:(0,r.tZ)(La.Z,{prompt:"Upgrade to '.pedit'?",desc:"You\u2019re using '.kbmsprite' which is recently deprecated. Do you want to upgrade to the new '.pedit' format? It\u2019ll create a new '.pedit' file with the same content. If you\u2019re using it with Kaboom, the new '.pedit' format won't work with kaboom before v0.4.0.",onCancel:function(){return g(!1)},confirmText:"Upgrade",icon:(0,r.tZ)(Pa.Z,{}),onConfirm:function(){if(o.current)if(t){var e=t.replace(/\.kbmsprite$/,".pedit"),n=un.Z.from(JSON.stringify(o.current()));l.writeFile(e,n).then((function(t){t.error?c("Failed to write to ".concat(e)):d("Successfully written to ".concat(e))})),g(!1)}else c("failed to get active file");else c("Please try again after the file loads")}})})]})}var Xa={Content:function(e){var t=e.pane,n=e.options.replacePane;return(0,r.tZ)(Ua,{path:t.data.path,replacePane:n})},Icon:function(e){var t=e.size;return(0,r.tZ)(Yr.Z,{size:t})},getTitle:function(e){return e.data.path}};function Ua(e){var t=e.path,n=e.replacePane;return(0,r.BX)(r.HY,{children:[(0,r.tZ)(Kr.HK,{path:t,replacePane:n}),(0,r.BX)(Kr.VY,{children:[(0,r.tZ)(Aa,{activeFile:t}),";"]})]})}var Fa=n(42325),Ma=n(64576),Wa=n(33773),Oa=n(54168),Ha=et.q6.define();function Va(e){var t=e.editorRef,n=e.onChange,o=e.placeholder,a=e.skeleton,l=e.language,s=e.skeletonClosingBracket,c=e.indentSize,d=void 0===c?2:c,f=(0,Ve.Z)({language:l,indentIsSpaces:!0,indentSize:2,fontSize:14}),p=f.view,h=f.ref,m=i.useRef(a?"".concat(a,"\n"):""),v=s?"\n".concat(s):"",g=" ".repeat(d);return i.useEffect((function(){if(p&&p.state.doc.length){var e=m.current;m.current=a?"".concat(a,"\n"):"",p.dispatch({changes:{from:0,to:e.length-1,insert:a},annotations:[et.YW.addToHistory.of(!1),Ha.of(!0)]})}}),[p,a]),i.useEffect((function(){if(p){var e=et.yy.changeFilter.of((function(e){return!!e.annotation(Ha)||[-1,m.current.length,e.startState.doc.length-v.length,e.startState.doc.length+1]})),r=$e.tk.updateListener.of((function(e){var t=e.state.doc.slice(m.current.length,e.state.doc.toString().length-v.length).toString();if(t!=="".concat(g).concat(o,"\n").concat(g)?n(t):n(""),e.docChanged&&e.state.doc.length===m.current.length+v.length){var r="\n"+g;p.dispatch({changes:{from:m.current.length-1,insert:"\n"+g},selection:{anchor:m.current.length+r.length-1},annotations:[Ha.of(!0)]})}})),i="".concat(m.current).concat(g).concat(o,"\n").concat(v);p.dispatch({changes:{from:0,to:p.state.doc.length,insert:i},effects:et.Py.appendConfig.of([e,r]),selection:{anchor:i.length},annotations:et.YW.addToHistory.of(!1)}),t({setValue:function(e){if(e){var t=p.state.doc.toString().length;p.dispatch({changes:{from:m.current.length,to:t-v.length,insert:e},annotations:et.YW.addToHistory.of(!1)})}},focus:function(){return p.focus()}})}}),[n,l,p,v,t,o,g]),(0,r.BX)("div",{className:"jsx-c0a72647b9c20ef editor",children:[(0,r.tZ)("div",{ref:h,className:"jsx-c0a72647b9c20ef"}),(0,r.tZ)(u(),{id:"c0a72647b9c20ef",children:".editor.jsx-c0a72647b9c20ef{overflow:auto;position:absolute;width:100%;height:100%}.loader.jsx-c0a72647b9c20ef{height:100%;width:100%;z-index:5}"})]})}function qa(e){var t,n,o,l,s=e.isOpen,c=e.meta,u=e.language,d=e.hasMetadata,f=e.onClose,h=(0,ge.Z)(),m=(0,We.Z)().showConfirm,v=(0,a.Z)(i.useState(null),2),g=v[0],b=v[1],Z=(0,a.Z)(i.useState(!0),2),y=Z[0],x=Z[1],w=(0,a.Z)(i.useState((null===c||void 0===c?void 0:c.initialization)||""),2),k=w[0],C=w[1],S=(0,a.Z)(i.useState((null===c||void 0===c?void 0:c.imports)||""),2),_=S[0],T=S[1],R=(0,a.Z)(i.useState((null===c||void 0===c?void 0:c.setup)||""),2),B=R[0],E=R[1],G=(0,a.Z)(i.useState((null===c||void 0===c?void 0:c.tearDown)||""),2),D=G[0],I=G[1],j=(0,a.Z)((0,Ma.rU)({onError:function(e){return b(e.message)},update:function(e,t){var n,r=null===(n=t.data)||void 0===n?void 0:n.createReplUnitTestMeta;r&&("UserError"===r.__typename?b(r.message):"ReplUnitTestMeta"===r.__typename&&(e.modify({id:e.identify({__typename:"Repl",id:h}),fields:{unitTests:function(t){var n=e.writeFragment({data:r,fragment:Ma.aA});return t?(0,tt.Z)((0,ae.Z)({},t),{meta:(0,ae.Z)({},n)}):{__typename:"ReplUnitTestsWithMeta",meta:n,tests:[]}}}}),m("Setup saved!"),f()))}}),2),N=j[0],L=j[1],z=(0,a.Z)((0,Ma.AF)({onError:function(e){return b(e.message)},onCompleted:function(e){var t=e.updateReplUnitTestMeta;t&&("UserError"===t.__typename?b(t.message):"ReplUnitTestMeta"===t.__typename&&(m("Imports updated!"),f()))}}),2),P=z[0],A=z[1],X=(0,Oa.x)(u),U=_!==(null===c||void 0===c?void 0:c.imports)||k!==(null===c||void 0===c?void 0:c.initialization)||B!==(null===c||void 0===c?void 0:c.setup)||D!==(null===c||void 0===c?void 0:c.tearDown),F=L.loading||A.loading;return(0,r.tZ)(p.u_,{isOpen:s,onRequestClose:f,maxWidth:872,children:(0,r.BX)(p.G7,{css:[p.l0.colWithGap(24)],children:[(0,r.tZ)(p.h4,{level:1,variant:"headerDefault",children:"Setup"}),(0,r.tZ)($a,{unitTestsLib:X,onChange:T,language:u,initialValue:null!==(t=null===c||void 0===c?void 0:c.imports)&&void 0!==t?t:""}),(0,r.tZ)(p.G7,{onClick:function(){return x(!y)},css:{cursor:"pointer"},children:(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(8),p.l0.align.center],children:[(0,r.tZ)(p.h4,{level:2,variant:"headerDefault",children:"Advanced"}),(0,r.tZ)(Wa.Z,{color:"var(--foreground-default)",size:20,rotate:y?270:0})]})}),y?null:(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8)],children:[(0,r.tZ)(Ya,{unitTestsLib:X,onChange:C,language:u,initialValue:null!==(n=null===c||void 0===c?void 0:c.initialization)&&void 0!==n?n:""}),(0,r.tZ)(Ka,{unitTestsLib:X,onChange:E,language:u,initialValue:null!==(o=null===c||void 0===c?void 0:c.setup)&&void 0!==o?o:""}),(0,r.tZ)(Ja,{unitTestsLib:X,onChange:I,language:u,initialValue:null!==(l=null===c||void 0===c?void 0:c.tearDown)&&void 0!==l?l:""})]}),(0,r.BX)(p.G7,{css:[p.l0.flex.row,p.l0.justify.spaceBetween],children:[(0,r.tZ)(p.xv,{css:[p.l0.color.accentNegativeStronger],multiline:!0,children:g}),(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(12)],children:[(0,r.tZ)(p.zx,{disabled:F,onClick:f,text:"Cancel"}),(0,r.tZ)(p.zx,{colorway:"primary",disabled:!U||F,onClick:function(){(0,Gt.j)(Gt.U3.REPL_UNIT_TEST_USED,{action:"modifiedSetup"}),d?P({variables:{input:{initialization:k,imports:_,setup:B,tearDown:D,replId:h}}}):N({variables:{input:{initialization:k,imports:_,setup:B,tearDown:D,replId:h}}})},iconLeft:(0,r.tZ)(qe.Z,{}),text:"".concat(F?"Saving...":"Save")})]})]})]})})}function $a(e){var t=e.unitTestsLib,n=e.onChange,o=e.language,l=e.initialValue,s=(0,a.Z)(i.useState(null),2),c=s[0],u=s[1];i.useEffect((function(){c&&(c.setValue(l),c.focus())}),[c,l]);var d=t.defaultImports().trim();return(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8)],children:[(0,r.BX)(p.G7,{css:[p.l0.flex.row,p.l0.justify.spaceBetween,p.l0.align.center],children:[(0,r.tZ)(p.h4,{level:2,variant:"subheadDefault",children:"Imports"}),(0,r.tZ)(p.ZP,{iconLeft:(0,r.tZ)(O.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",outlined:!0})]}),(0,r.tZ)(p.G7,{css:[p.l0.backgroundColor.backgroundDefault,p.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,r.tZ)(p.G7,{css:[p.l0.borderRadius(8),p.l0.height(200),p.l0.position.relative],children:(0,r.tZ)(Va,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add imports here"),editorRef:u,language:o,skeleton:d,skeletonClosingBracket:"",indentSize:0})})})]})}function Ya(e){var t=e.unitTestsLib,n=e.onChange,o=e.language,l=e.initialValue,s=(0,a.Z)(i.useState(null),2),c=s[0],u=s[1];i.useEffect((function(){c&&c.setValue(l)}),[c,l]);var d=t.classConstructorName();return(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8)],children:[(0,r.BX)(p.G7,{css:[p.l0.flex.row,p.l0.justify.spaceBetween,p.l0.align.center],children:[(0,r.tZ)(p.h4,{level:2,variant:"subheadDefault",children:"Initialization"}),(0,r.tZ)(p.ZP,{iconLeft:(0,r.tZ)(O.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",outlined:!0})]}),d?(0,r.BX)(p.xv,{multiline:!0,children:["Hint: constructor name is ",(0,r.tZ)("code",{children:d}),"."]}):null,(0,r.tZ)(p.G7,{css:[p.l0.backgroundColor.backgroundDefault,p.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,r.tZ)(p.G7,{css:[p.l0.borderRadius(8),p.l0.height(200),p.l0.position.relative],children:(0,r.tZ)(Va,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add initialization code here"),editorRef:u,language:o,skeleton:"",skeletonClosingBracket:"",indentSize:0})})})]})}function Ka(e){var t=e.unitTestsLib,n=e.onChange,o=e.language,l=e.initialValue,s=(0,a.Z)(i.useState(null),2),c=s[0],u=s[1];i.useEffect((function(){c&&c.setValue(l)}),[c,l]);var d=t.setupIntro().trim();return(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8)],children:[(0,r.BX)(p.G7,{css:[p.l0.flex.row,p.l0.justify.spaceBetween,p.l0.align.center],children:[(0,r.tZ)(p.h4,{level:2,variant:"subheadDefault",children:"Setup"}),(0,r.tZ)(p.ZP,{iconLeft:(0,r.tZ)(O.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",outlined:!0})]}),(0,r.tZ)(p.G7,{css:[p.l0.backgroundColor.backgroundDefault,p.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,r.tZ)(p.G7,{css:[p.l0.borderRadius(8),p.l0.height(200),p.l0.position.relative],children:(0,r.tZ)(Va,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add setup code here"),editorRef:u,language:o,skeleton:d,skeletonClosingBracket:t.hasClosingBrackets()?t.getClosingBrackets():""})})})]})}function Ja(e){var t=e.unitTestsLib,n=e.onChange,o=e.language,l=e.initialValue,s=(0,a.Z)(i.useState(null),2),c=s[0],u=s[1];i.useEffect((function(){c&&c.setValue(l)}),[c,l]);var d=t.tearDownIntro().trim();return(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8)],children:[(0,r.BX)(p.G7,{css:[p.l0.flex.row,p.l0.justify.spaceBetween,p.l0.align.center],children:[(0,r.tZ)(p.h4,{level:2,variant:"subheadDefault",children:"Teardown"}),(0,r.tZ)(p.ZP,{iconLeft:(0,r.tZ)(O.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",outlined:!0})]}),(0,r.tZ)(p.G7,{css:[p.l0.backgroundColor.backgroundDefault,p.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,r.tZ)(p.G7,{css:[p.l0.borderRadius(8),p.l0.height(200),p.l0.position.relative],children:(0,r.tZ)(Va,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add teardown code here"),editorRef:u,language:o,skeleton:d,skeletonClosingBracket:t.hasClosingBrackets()?t.getClosingBrackets():""})})})]})}var Qa=function(e){var t=e.language,n=e.meta,o=(0,a.Z)(i.useState(!1),2),l=o[0],s=o[1];return(0,r.BX)(r.HY,{children:[(0,r.tZ)(p.zx,{iconLeft:(0,r.tZ)(J.Z,{}),onClick:function(){return s(!0)},text:"Setup"}),(0,r.tZ)(qa,{language:t,isOpen:l,onClose:function(){return s(!1)},hasMetadata:Boolean(null===n||void 0===n?void 0:n.id),meta:n})]})},el=n(90317),tl=n(77836),nl=n(67629),rl=n(43530),il=n(30992),ol=n(51995),al=n(83160),ll="\x1b[0;31m",sl="\x1b[0m",cl=["\u28fe","\u28fd","\u28fb","\u28bf","\u287f","\u28df","\u28ef","\u28f7","\u2801","\u2802","\u2804","\u2840","\u2880","\u2820","\u2810","\u2808"];function ul(e){var t=e.name,n=e.failureMessage,r=e.stack;return"\u274c\t".concat(ll).concat(t).concat(sl,"\r").concat(n?"\nMessage: ".concat(n,"\r"):"","\nStack Trace:\r\n").concat(r.replace(/\n/g,"\r\n"),"\n\r\n\r\n")}var dl=function(e){var t=e.language,n=e.unitTests,o=e.onResult,l=e.trackingContext,s=function(e){m.writeToTerminal(e)},c=function(){m.clearTerminal(),s("\r\n")},u=(0,a.Z)(i.useState(!1),2),d=u[0],f=u[1],h=(0,v.Z)(),m=h.session,g=h.container,b=h.packager,Z=h.fs,y=null,x=function(){f(!1),(0,al.WT)(Z),y&&(y.stopLogSpinner(),y=null)},w=function(){var e=(0,je.Z)((function(){var e,r,i,a,u,p,h,m,v,w,k,C,S,_,T,R,B,E,G,D,I,j;return(0,Ne.__generator)(this,(function(N){switch(N.label){case 0:if(d)return[2];if(e=null,y={startLogSpinner:function(t){if(e)throw new Error("A spinner is already active! call stopSpinner first or use the update callback to update the active spinner's message.");var n=t,r=0;return e=setInterval((function(){r++;var e=cl[r%cl.length];if(!y)throw new Error("Expected logger");y.clearLine(),y.logMessage(e+" "+n)}),100),function(e){n=e}},stopLogSpinner:function(){e&&clearInterval(e),e=null},logMessage:s,clearLogs:c,clearLine:function(){if(!y)throw new Error("Expected logger");y.logMessage("\x1b[1K\r")}},!n)throw new Error("Run button should not be active if there are no tests");return f(!0),(0,Gt.j)(Gt.U3.REPL_UNIT_TEST_USED,{trackingData:{context:l},action:"ranTests"}),y.clearLogs(),[4,(r=(0,Oa.x)(t)).buildAndRunTests((0,ae.Z)({container:g,fs:Z,packager:b,logger:y},n))];case 1:if(i=N.sent(),y.stopLogSpinner(),y.clearLine(),y.clearLogs(),null!==i.error)return y.logMessage("".concat(ll).concat(i.error).concat(sl,"\r\n")),x(),n.tests.map((function(e){return{testId:e.id,didPass:!1}})),[2];if(a=i.result.passed?[]:i.result.failures.map((function(e){return r.parseTestResultName(e.name)})),u=[],p=n.tests.map((function(e){return r.getProperTestName(e.name)})),h=a.filter((function(e){return!p.includes(e)})),h.length)v=h[0],w=i.result.failures[0].stack,y.logMessage(ul({name:v,failureMessage:"The following error occurred but was not related to a single unit test",stack:w})),(m=u).push.apply(m,(0,ie.Z)(n.tests.map((function(e){return{testId:e.id,didPass:!1}}))));else{k=!0,C=!1,S=void 0;try{for(_=n.tests[Symbol.iterator]();!(k=(T=_.next()).done);k=!0)R=T.value,B=r.getProperTestName(R.name),E=a.indexOf(B),G=-1===E,u.push({testId:R.id,didPass:G}),G?y.logMessage((L=B,"\u2705\t".concat("\x1b[0;32m").concat(L).concat(sl,"\r\n\r\n"))):(D=i.result.failures[E].stack,y.logMessage(ul({name:B,failureMessage:R.failureMessage,stack:D})))}catch(z){C=!0,S=z}finally{try{k||null==_.return||_.return()}finally{if(C)throw S}}}return o(u),I=n.tests.length,i.result.passed?(y.logMessage("".concat("\x1b[48;5;22m","  All tests have passed ").concat(I,"/").concat(I,"  ").concat(sl,"\r\n")),x(),[2]):(j=I-i.result.failures.length,y.logMessage("".concat("\x1b[48;5;88m","  ").concat(j,"/").concat(I," passed, see errors above  ").concat(sl)),x(),[2])}var L}))}));return function(){return e.apply(this,arguments)}}(),k=function(){var e=(0,je.Z)((function(){return(0,Ne.__generator)(this,(function(e){try{w()}catch(t){qi.$e((function(e){e.setTag("unittestsrun","true"),qi.Tb(t)})),y&&y.logMessage("\r\n".concat(ll," Sorry, we have failed to run your tests. Please try again or contact support. ").concat(sl,"\r\n")),x()}return[2]}))}));return function(){return e.apply(this,arguments)}}();return Boolean(n&&n.tests.length>0)?(0,r.tZ)(p.G7,{children:(0,r.tZ)(p.zx,{disabled:d,colorway:"primary",iconLeft:(0,r.tZ)(ol.Z,{}),onClick:k,text:d?"Running tests...":"Run tests"})}):null},fl=n(70804);function pl(e){var t=e.isOpen,n=e.test,o=e.language,l=e.onClose,s=e.trackingContext,c=(0,ge.Z)(),u=(0,We.Z)().showConfirm,d=(0,a.Z)(i.useState(null),2),f=d[0],h=d[1],m=(0,a.Z)(i.useState(""),2),v=m[0],g=m[1],b=(0,a.Z)(i.useState(""),2),Z=b[0],y=b[1],x=(0,a.Z)(i.useState(""),2),w=x[0],k=x[1],C=(0,a.Z)((0,Ma.Hd)({onError:function(e){return k(e.message)},update:function(e,t){var n,r=null===(n=t.data)||void 0===n?void 0:n.createReplUnitTest;r&&("UserError"===r.__typename?k(r.message):"ReplUnitTest"===r.__typename&&(e.modify({id:e.identify({__typename:"Repl",id:c}),fields:{unitTests:function(t){var n=e.writeFragment({data:r,fragment:Ma.Rb});return t?(0,tt.Z)((0,ae.Z)({},t),{tests:(0,ie.Z)(t.tests).concat([n])}):{__typename:"ReplUnitTestsWithMeta",meta:null,tests:[n]}}}}),u("Test created!"),l()))}}),2),S=C[0],_=C[1],T=(0,a.Z)((0,Ma.kO)({onError:function(e){return k(e.message)},onCompleted:function(e){var t=e.updateReplUnitTest;t&&("UserError"===t.__typename?k(t.message):"ReplUnitTest"===t.__typename&&(u("Test updated!"),l()))}}),2),R=T[0],B=T[1],E=(0,il.Y)("",(function(e){return e.length<=0?{message:"Must include test name"}:e.trim().split(" ").length>1?{message:"Test name must only be one word"}:void 0}));i.useEffect((function(){E.setValue((null===n||void 0===n?void 0:n.name)||"",{preventTouch:!0}),y((null===n||void 0===n?void 0:n.failureMessage)||""),g((null===n||void 0===n?void 0:n.code)||""),f&&f.setValue((null===n||void 0===n?void 0:n.code)||"")}),[n,f]),i.useEffect((function(){k("")}),[v,k]);var G=(0,Oa.x)(o),D="".concat(G.getCommentChar()," Enter code here"),I=!n||n.name!==E.value||n.code!==v||n.failureMessage!==Z,j=_.loading||B.loading,N=G.testIntro(E.value||""),L=G.hasClosingBrackets()?G.getClosingBrackets():"",z=(0,a.Z)(i.useState(!1),2),P=z[0],A=z[1],X=function(){f&&(f.setValue("  "+G.exampleTest.code),f.focus()),g(G.exampleTest.code)};return(0,r.tZ)(p.u_,{isOpen:t,onRequestClose:l,maxWidth:872,children:(0,r.BX)(p.G7,{css:[p.l0.colWithGap(24)],children:[(0,r.tZ)(p.h4,{level:1,variant:"headerDefault",children:"New unit test"}),(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8)],children:[(0,r.tZ)("label",{htmlFor:"name",children:(0,r.tZ)(p.h4,{level:2,variant:"subheadDefault",children:"Name"})}),(0,r.tZ)(p.Zl,{id:"name",label:"Test name",status:null,autoFocus:!0,required:!0,value:E.value,isValid:E.isValid,error:E.error,warning:E.warning,touched:E.touched,onChange:function(e){E.setValue(e.target.value)},placeholder:"Enter test name here"})]}),(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8)],children:[(0,r.BX)(p.G7,{css:[p.l0.flex.row,p.l0.align.center,p.l0.justify.spaceBetween],children:[(0,r.tZ)(p.h4,{level:2,variant:"subheadDefault",children:"Code"}),(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(4)],children:[(0,r.BX)(fl.Z,{isOpen:P,onClickOutside:function(){return A(!1)},placement:"bottom-end",children:[(0,r.tZ)(p.zx,{iconLeft:(0,r.tZ)(tl.Z,{}),small:!0,outlined:!0,text:"View an example",onClick:function(){[D,G.exampleTest.code].includes(v.trim())?X():A(!0)}}),(0,r.BX)(p.G7,{children:["This will overwrite your current test. Are you sure?",(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(4),p.l0.pt(8)],children:[" ",(0,r.tZ)(p.zx,{text:"No, go back",small:!0,iconLeft:(0,r.tZ)(nl.Z,{}),onClick:function(){A(!1)}}),(0,r.tZ)(p.zx,{text:"Yes, delete test",colorway:"negative",small:!0,iconLeft:(0,r.tZ)(qe.Z,{}),onClick:function(){X(),A(!1)}})]})]})]}),(0,r.tZ)(p.ZP,{iconLeft:(0,r.tZ)(rl.Z,{}),small:!0,outlined:!0,text:"View docs",target:"_blank",href:"https://docs.replit.com/teams-edu/unit-testing"})]})]}),(0,r.tZ)(p.G7,{css:[p.l0.backgroundColor.backgroundDefault,p.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,r.tZ)(p.G7,{css:[p.l0.borderRadius(8),p.l0.height(200),p.l0.position.relative],children:(0,r.tZ)(Va,{skeleton:N,skeletonClosingBracket:L,language:o,editorRef:h,onChange:g,placeholder:D})})})]}),(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8)],children:[(0,r.tZ)(p.h4,{level:2,variant:"subheadDefault",children:"Failure message"}),(0,r.tZ)(p.II,{value:Z,onChange:function(e){return y(e.target.value)},placeholder:"This will be displayed on test failure"})]}),(0,r.BX)(p.G7,{css:[p.l0.flex.row,p.l0.align.center,p.l0.justify.spaceBetween],children:[(0,r.tZ)(p.xv,{css:[p.l0.color.accentNegativeStronger],children:w}),(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(12)],children:[(0,r.tZ)(p.zx,{text:"Cancel",onClick:l}),(0,r.tZ)(p.zx,{text:"".concat(j?"Creating test...":"Create test"),iconLeft:(0,r.tZ)(Mn.Z,{}),colorway:"primary",disabled:!I||j,onClick:function(){E.validate()||(v.length<=0?k("Test cannot be empty"):n?(R({variables:{input:{name:E.value,code:v,failureMessage:Z,testId:n.id}}}),(0,Gt.j)(Gt.U3.REPL_UNIT_TEST_USED,{trackingData:{context:s},action:"modifiedTest"})):(S({variables:{input:{name:E.value,code:v,failureMessage:Z,replId:c}}}),(0,Gt.j)(Gt.U3.REPL_UNIT_TEST_USED,{trackingData:{context:s},action:"addedTest"})))}})]})]})]})})}function hl(e){var t=e.testId,n=e.onClose,o=(0,We.Z)().showConfirm,l=(0,ge.Z)(),s=(0,a.Z)((0,Ma.IV)({onError:function(e){return h(e.message)},update:function(e,r){var i,a=null===(i=r.data)||void 0===i?void 0:i.deleteReplUnitTest;a&&("UserError"===a.__typename?h(a.message):"ReplUnitTest"===a.__typename&&t&&(e.modify({id:e.identify({__typename:"Repl",id:l}),fields:{unitTests:function(e,n){var r=n.readField,i=e.tests.filter((function(e){return r("id",e)!==t}));return(0,tt.Z)((0,ae.Z)({},e),{tests:(0,ie.Z)(i)})}}}),(0,Gt.j)(Gt.U3.REPL_UNIT_TEST_USED,{action:"removedTest"}),o("Test deleted!"),n()))}}),2),c=s[0],u=s[1],d=(0,a.Z)(i.useState(""),2),f=d[0],h=d[1];return(0,r.tZ)(p.u_,{isOpen:Boolean(t),onRequestClose:n,children:(0,r.BX)(p.G7,{css:[p.l0.colWithGap(24)],children:[(0,r.tZ)(p.h4,{level:1,variant:"headerDefault",children:"Delete test?"}),(0,r.tZ)(p.xv,{multiline:!0,children:"Are you sure you want to delete this test? This cannot be undone."}),(0,r.BX)(p.G7,{css:[p.l0.flex.row,p.l0.justify.spaceBetween,p.l0.align.center],children:[(0,r.tZ)(p.xv,{multiline:!0,css:[p.l0.color.accentNegativeStronger],children:f}),(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(12),p.l0.justify.end],children:[(0,r.tZ)(p.zx,{text:"Cancel",disabled:u.loading,onClick:n}),(0,r.tZ)(p.zx,{text:"Yes, delete this test",colorway:"negative",iconLeft:(0,r.tZ)(Oe.Z,{}),disabled:u.loading,onClick:function(){if(!t)throw new Error("Expected a testId");c({variables:{testId:t}})}})]})]})]})})}var ml=function(e){var t=e.unitTests,n=e.isAddingTest,o=e.onClose,l=e.language,s=e.canWrite,c=e.trackingContext,d=void 0===c?"default":c,f=(0,a.Z)(i.useState(n),2),h=f[0],m=f[1],v=(0,a.Z)(i.useState(null),2),g=v[0],b=v[1],Z=(0,a.Z)(i.useState(null),2),y=Z[0],x=Z[1],w=(0,ge.Z)(),k=(0,a.Z)((0,Ma.lQ)(),1)[0],C=(null===t||void 0===t?void 0:t.tests)||[];return(0,r.BX)(p.G7,{css:[p.l0.colWithGap(16)],children:[(0,r.tZ)(dl,{language:l,unitTests:t,onResult:function(e){k({variables:{input:{replId:w,results:e},replId:w}})},trackingContext:d}),C.length>0?(0,r.tZ)(p.G7,{css:[p.l0.colWithGap(8),p.l0.align.center],children:C.map((function(e){var t,n;return"ReplUnitTestLastRun"===(null===(t=e.lastRun)||void 0===t?void 0:t.__typename)&&(e.lastRun.status===el.$I.Passed?n="passed-test":e.lastRun.status===el.$I.Failed&&(n="failed-test")),(0,r.tZ)(p.G7,{className:"test ".concat(n),css:{width:"100%"},children:(0,r.BX)(p.G7,{css:[p.l0.flex.row,p.l0.justify.spaceBetween,p.l0.align.center,p.l0.p(8),p.l0.borderRadius(8),{border:"1px solid var(--background-highest);"}],children:[(0,r.tZ)(p.xv,{children:e.name}),s?(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(8)],children:[(0,r.tZ)(p.hU,{onClick:function(){b(e)},alt:"Edit",children:(0,r.tZ)(Yr.Z,{})}),(0,r.tZ)(p.hU,{onClick:function(){x(e.id)},alt:"Delete",children:(0,r.tZ)(Oe.Z,{})})]}):null]})},e.id)}))}):(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8),p.l0.align.center],children:[(0,r.tZ)(p.xv,{multiline:!0,css:[p.l0.textAlign.center],children:"Looks like you don\u2019t have any tests yet!"}),s?(0,r.tZ)(p.zx,{text:"Add test",onClick:function(){return m(!0)},iconLeft:(0,r.tZ)(Mn.Z,{})}):null]}),(0,r.tZ)(pl,{isOpen:h||Boolean(g)||n,test:g,language:l,onClose:function(){b(null),m(!1),o&&o()},trackingContext:d}),(0,r.tZ)(hl,{testId:y,onClose:function(){return x(null)}}),(0,r.tZ)(u(),{id:"a2df1ed8108a6cad",children:".tests-wrapper.jsx-a2df1ed8108a6cad{-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:var(--space-16)0;width:100%}.test.jsx-a2df1ed8108a6cad{padding:var(--space-8)var(--space-8);border:1px solid var(--outline-dimmest);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4)}.passed-test.jsx-a2df1ed8108a6cad{border-color:var(--accent-positive-default);background:var(--accent-positive-dimmer)}.failed-test.jsx-a2df1ed8108a6cad{border-color:var(--accent-negative-default);background:var(--accent-negative-dimmer)}"})]})},vl=n(6951);var gl=function(e){var t=e.onClick,n=e.hasTests,i=n?{"aria-label":"Delete all tests to switch test type","data-microtip-position":"bottom","data-microtip-size":"medium",role:"tooltip"}:{};return(0,r.BX)("div",(0,tt.Z)((0,ae.Z)({},i),{className:"jsx-44786ca38dd3aa42 "+(i&&null!=i.className&&i.className||"back-button"),children:[(0,r.tZ)(vl.Z,{filled:!1,border:!1,size:"small",Icon:pi.Z,onClick:t,disabled:n,children:"Switch test type"}),(0,r.tZ)(u(),{id:"44786ca38dd3aa42",children:".back-button.jsx-44786ca38dd3aa42{width:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}"})]}))},bl=n(69128);var Zl=function(e){var t,n,o,l,s=e.onBack,c=(0,ge.Z)(),u=(0,a.Z)(i.useState(!1),2),d=u[0],f=u[1],h=(0,bl.Z)(),m=h.language,v=h.isLoading,g=(0,Fa.CH)({variables:{replId:c}}),b=null===(t=g.data)||void 0===t?void 0:t.repl;if(g.loading||v)return(0,r.tZ)(p.G7,{css:[p.l0.backgroundColor.backgroundDefault,p.l0.flex.row,p.l0.align.center,p.l0.justify.center,p.l0.p(16)],children:(0,r.tZ)(me.Z,{})});if(!b||"Repl"!==b.__typename)return(0,r.tZ)(p.G7,{css:[p.l0.p(16)],children:(0,r.tZ)(p.xv,{multiline:!0,css:{textAlign:"center"},children:"Unable to fetch tests, please try again."})});if(!m)return(0,r.tZ)(p.G7,{css:[p.l0.p(16)],children:(0,r.tZ)(p.xv,{multiline:!0,css:{textAlign:"center"},children:"Unit tests are currently only supported in Java, Python, and Node.js Repls."})});var Z="default";(null===b||void 0===b?void 0:b.isProject)?Z="project_repl":(null===b||void 0===b?void 0:b.isProjectFork)&&(Z="submission_repl");var y=Boolean((null===(n=b.unitTests)||void 0===n?void 0:n.tests)&&b.unitTests.tests.length>0);return(null===b||void 0===b||null===(o=b.currentUserPermissions)||void 0===o?void 0:o.writeTests)?(0,r.BX)(p.G7,{css:[p.l0.colWithGap(16),p.l0.align.center],children:[(0,r.BX)(p.G7,{css:[p.l0.flex.row,p.l0.justify.spaceBetween,p.l0.align.center,{width:"100%"}],children:[(0,r.tZ)(W.Z,{truncate:!0,level:4,children:"Unit tests"}),(0,r.tZ)(p.hU,{alt:"Add test",size:32,onClick:function(){return f(!0)},children:(0,r.tZ)(Mn.Z,{})})]}),(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8),p.l0.maxWidth(256),{width:"80%"}],children:[(0,r.tZ)(Qa,{language:m,meta:(null===(l=b.unitTests)||void 0===l?void 0:l.meta)||null}),(0,r.tZ)(ml,{isAddingTest:d,unitTests:(null===b||void 0===b?void 0:b.unitTests)||null,onClose:function(){return f(!1)},language:m,canWrite:!0,trackingContext:Z}),s?(0,r.tZ)(gl,{hasTests:y,onClick:s}):null]})]}):(0,r.BX)(p.G7,{css:[p.l0.colWithGap(16)],children:[(0,r.tZ)(p.h4,{level:1,variant:"headerDefault",children:"Unit tests"}),(0,r.tZ)(p.G7,{css:{width:"100%",overflowY:"auto"},children:(0,r.tZ)(ml,{unitTests:(null===b||void 0===b?void 0:b.unitTests)||null,language:m,isAddingTest:!1,canWrite:!1,trackingContext:Z})})]})},yl={Content:function(){return(0,r.tZ)(p.G7,{css:[p.l0.p(8),H.F3],children:(0,r.tZ)(Zl,{})})},Icon:function(e){var t=e.size;return(0,r.tZ)(qe.Z,{size:t})},getTitle:function(){return"Unit Tests"}},xl=n(94184),wl=n.n(xl),kl=n(44781),Cl=n(19526),Sl=n(44747),_l=n(19050),Tl=n(27206),Rl=n(16449),Bl=n(42941),El=n(29245),Gl=i.forwardRef((function(e,t){var n,o,l,s=e.label,c=e.id,d=e.description,f=e.onChange,p=e.fontFamily,h=void 0===p?"sans-serif":p,m=e.fontSize,v=void 0===m?"medium":m,g=e.fontWeight,b=void 0===g?"regular":g,Z=e.foreground,y=void 0===Z?1:Z,x=e.placeholder,w=void 0===x?"":x,k=e.validationResults,C=e.value,S=(0,Sl.Z)(e,["label","id","description","onChange","fontFamily","fontSize","fontWeight","foreground","placeholder","validationResults","value"]),_=(0,Rl.Z)().ref,T=(0,dn.H)(),R=c||T("input"),B=d?T("input-description"):void 0,E=(0,a.Z)(i.useState(!1),2),G=E[0],D=E[1];(null===k||void 0===k?void 0:k.some((function(e){return"loading"===e.state})))?n="loading":(null===k||void 0===k?void 0:k.some((function(e){return"error"===e.state})))?(n="error",l="var(--accent-negative-default)",o=(0,r.tZ)(Pn.Z,{})):(null===k||void 0===k?void 0:k.every((function(e){return"success"===e.state})))?(n="success",l="var(--accent-positive-default)",o=(0,r.tZ)(qe.Z,{})):n="default";var I=Tl.P3[n],j=(S.className?S.className+" ":"")+I;return(0,r.BX)("div",{className:u().dynamic([["48c1334c65fd9e51",[l,El.Z.fontSize[v],El.Z.fontFamily[h],El.Z.fontWeight[b],El.Z.foreground[y],El.Z.lineHeight[v]]]])+" container",children:[s?(0,r.BX)(r.HY,{children:[S.required?(0,r.BX)(Cl.Ug,{spacing:"2px",children:[(0,r.tZ)(kl.Z,{tag:"label",foreground:G?1:2,size:"large"===v?"small":"xsmall",htmlFor:R,children:s}),(0,r.tZ)("span",{className:u().dynamic([["48c1334c65fd9e51",[l,El.Z.fontSize[v],El.Z.fontFamily[h],El.Z.fontWeight[b],El.Z.foreground[y],El.Z.lineHeight[v]]]])+" required",children:"*"})]}):(0,r.tZ)(kl.Z,{tag:"label",foreground:G?1:2,size:"large"===v?"small":"xsmall",htmlFor:R,children:s}),(0,r.tZ)(Bl.Z,{height:"4px"})]}):null,(0,r.BX)("div",{className:u().dynamic([["48c1334c65fd9e51",[l,El.Z.fontSize[v],El.Z.fontFamily[h],El.Z.fontWeight[b],El.Z.foreground[y],El.Z.lineHeight[v]]]])+" textarea-container",children:[(0,r.tZ)("textarea",(0,tt.Z)((0,ae.Z)({id:R,placeholder:w,value:C,onChange:f,"aria-busy":"loading"===n,"aria-invalid":"error"===n,"aria-describedby":B},S),{ref:function(e){_(e),t&&("function"!==typeof t?t.current=e:t(e))},onFocus:function(e){D(!0),S.onFocus&&S.onFocus(e)},onBlur:function(e){D(!1),S.onBlur&&S.onBlur(e)},className:u().dynamic([["48c1334c65fd9e51",[l,El.Z.fontSize[v],El.Z.fontFamily[h],El.Z.fontWeight[b],El.Z.foreground[y],El.Z.lineHeight[v]]]])+" "+(j||"")})),o?(0,r.tZ)("div",{onMouseEnter:function(){return D(!0)},onMouseLeave:function(){return D(!1)},className:u().dynamic([["48c1334c65fd9e51",[l,El.Z.fontSize[v],El.Z.fontFamily[h],El.Z.fontWeight[b],El.Z.foreground[y],El.Z.lineHeight[v]]]])+" icon-container right",children:o}):null]}),d?(0,r.BX)(r.HY,{children:[(0,r.tZ)(Bl.Z,{height:"4px"}),(0,r.tZ)(kl.Z,{id:B,tag:"span",foreground:3,size:v,children:d})]}):null,k&&G?(0,r.tZ)(Tl.QE,{validationResults:k}):null,(0,r.tZ)(u(),{id:"48c1334c65fd9e51",dynamic:[l,El.Z.fontSize[v],El.Z.fontFamily[h],El.Z.fontWeight[b],El.Z.foreground[y],El.Z.lineHeight[v]],children:".container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;position:relative;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;width:100%}.textarea-container.__jsx-style-dynamic-selector{position:relative}.required.__jsx-style-dynamic-selector{color:var(--accent-negative-default);font-size:var(--font-size-small)}.icon-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;position:absolute;top:var(--space-8);right:var(--space-8);background-color:var(--background-default);-webkit-border-radius:100%;-moz-border-radius:100%;border-radius:100%;padding:var(--space-4)}.icon-container.right.__jsx-style-dynamic-selector{right:var(--space-8);color:".concat(l,"}textarea.__jsx-style-dynamic-selector{resize:none;font-size:").concat(El.Z.fontSize[v],";font-family:").concat(El.Z.fontFamily[h],";font-weight:").concat(El.Z.fontWeight[b],";color:").concat(El.Z.foreground[y],";line-height:").concat(El.Z.lineHeight[v],";background-color:transparent;padding:var(--space-8);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);outline:none;width:100%;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-transition:.1s;-moz-transition:.1s;-o-transition:.1s;transition:.1s;line-height:1.4}textarea.__jsx-style-dynamic-selector:disabled{opacity:.5}textarea.default.__jsx-style-dynamic-selector:hover{border-color:var(--accent-primary-dimmer)}textarea.success.__jsx-style-dynamic-selector{border-color:var(--accent-positive-default)}textarea.success.__jsx-style-dynamic-selector:hover{border-color:var(--accent-positive-dimmer)}textarea.negative.__jsx-style-dynamic-selector{border-color:var(--accent-negative-default)}textarea.negative.__jsx-style-dynamic-selector:hover{border-color:var(--accent-negative-dimmer)}textarea.__jsx-style-dynamic-selector:active,textarea.__jsx-style-dynamic-selector:focus{border-color:var(--accent-primary-default)}")})]})})),Dl=Gl,Il=n(34193);function jl(e){switch(e){case el.Fl.Match:return"The test passes if the expected output is in the actual output.";case el.Fl.Exact:return"The test passes if the expected output is equal to the actual output.";case el.Fl.Regex:return"The test passes if the actual output matches the regex expression for the expected output.";case el.Fl.Compatibility:return"The test passes if the expected output is in the actual output; some characters are removed for backwards compatibility."}}var Nl=function(e){(0,Yi.Z)(n,e);var t=(0,Ji.Z)(n);function n(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];var o;return(0,$i.Z)(this,n),(o=t.call.apply(t,[this].concat((0,ie.Z)(r)))).name=o.constructor.name,o}return n}((0,Ki.Z)(Error));function Ll(e){var t={id:e.id},n={id:-e.id,input:{input:e.input?e.input+"\n":""}};switch(e.type){case"compatibility":t.output={compatibility:{expected:e.output}};break;case"match":t.output={match:{expected:e.output,ignoreTrailingWhitespace:!0}};break;case"exact":t.output={exact:{expected:e.output,allowTrailingNewline:!0}};break;case"regex":t.output={regex:{expression:e.output}}}return{id:e.id,instructions:[n,t]}}function zl(e){var t=e.args,n=e.env,r=t.indexOf("--ps1"),i=t.indexOf("--ps2"),o=t.indexOf("-i");return-1!==r&&null!=t[r+1]&&(t[r+1]=""),-1!==i&&null!=t[i+1]&&(t[i+1]=""),-1!==o&&t.splice(o,1),t.includes("-q")||t.unshift(t.shift(),"-q"),n.PS1="",n.PS2="",{args:t,env:n}}function Pl(e){return Al.apply(this,arguments)}function Al(){return Al=(0,je.Z)((function(e){var t,n,r,i,o,a,l,s,c,u;return(0,Ne.__generator)(this,(function(d){switch(d.label){case 0:return[4,e.getRunConfig()];case 1:if(!(n=d.sent()))throw new Nl("unable to fetch dotreplit run config");if(n.interp){if("stderred"===(null===(i=null===(r=n.interp)||void 0===r?void 0:r.command)||void 0===i?void 0:i.args[0])&&("--"===i.args[1]?i.args.splice(0,2):i.args.shift()),!i||i.args.length<1)throw o=new Nl("received interp without command"),qi.Tb(o,(function(e){return e.setExtra("runInfo",u)})),o;return i.args[0].match(/(^|\/)prybar/i)?[2,{execCommand:zl(i)}]:[2,{execCommand:{args:i.args,env:i.env}}]}if(!(null===(t=n.run)||void 0===t?void 0:t.run))throw a=new Nl("Bad repl run config received"),qi.Tb(a,(function(e){return e.setExtra("runConfig",n)})),a;return l=n.run,s=l.run,c=l.compile,s.env.PS1="",s.env.PS2="",u={execCommand:{args:s.args,env:s.env}},c&&(c.env.PS1="",c.env.PS2="",u.buildCommand={args:c.args,env:c.env}),[2,u]}}))})),Al.apply(this,arguments)}var Xl,Ul=function(e){var t=e.test,n=e.onSubmit,l=e.onCancel,s=e.isOpen,c=e.onRequestClose,d=(0,a.Z)(i.useState({}),2),f=d[0],p=d[1],h=function(e){return{name:(null===e||void 0===e?void 0:e.name)||"",type:(null===e||void 0===e?void 0:e.type)||el.Fl.Match,input:(null===e||void 0===e?void 0:e.input)||"",output:(null===e||void 0===e?void 0:e.output)||""}},m=(0,We.Z)().showError,v=(0,a.Z)(i.useState(h(t)),2),g=v[0],b=v[1];i.useEffect((function(){b(h(t)),p({})}),[t,b]);var Z=function(e,t){p((function(n){return(0,tt.Z)((0,ae.Z)({},n),(0,o.Z)({},e,t?void 0:[{message:e+" expected but not provided.",state:"error"}]))}))};return(0,r.tZ)(Il.Z,{isOpen:s,onRequestClose:c,children:(0,r.BX)("div",{className:u().dynamic([["550654d38c65c62e",[""===g.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-tests-view",children:[(0,r.tZ)("div",{className:u().dynamic([["550654d38c65c62e",[""===g.type?"--foreground-dimmer":"--foreground-default"]]])+" header-row",children:(0,r.tZ)(W.Z,{level:4,align:"center",children:t?"Edit test: ":"Create test"})}),(0,r.tZ)("div",{className:u().dynamic([["550654d38c65c62e",[""===g.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-test-row",children:(0,r.tZ)(Tl.ZP,{label:"Test name",placeholder:"The name of the test",value:(null===g||void 0===g?void 0:g.name)||"",validationResults:f.name,onChange:function(e){var t;e.persist(),b((function(t){var n;return(0,tt.Z)((0,ae.Z)({},t),{name:(null===(n=e.target)||void 0===n?void 0:n.value)||""})})),Z("name",null===(t=e.target)||void 0===t?void 0:t.value)},maxLength:20})}),(0,r.tZ)("div",{className:u().dynamic([["550654d38c65c62e",[""===g.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-test-row",children:(0,r.tZ)(Dl,{style:{height:"150px"},label:"Input (standard in)",placeholder:"The input for the test",value:g.input,fontFamily:"monospace",translate:"no",onChange:function(e){e.persist(),b((function(t){return(0,tt.Z)((0,ae.Z)({},t),{input:e.target.value})}))}})}),(0,r.tZ)("div",{className:u().dynamic([["550654d38c65c62e",[""===g.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-test-row",children:(0,r.tZ)(Dl,{style:{height:"150px"},label:"Expected output",validationResults:f.output,placeholder:"The expected output for the test",value:g.output,fontFamily:"monospace",translate:"no",onChange:function(e){var t;e.persist(),b((function(t){return(0,tt.Z)((0,ae.Z)({},t),{output:e.target.value})})),Z("output",null===(t=e.target)||void 0===t?void 0:t.value)}})}),(0,r.tZ)("div",{className:u().dynamic([["550654d38c65c62e",[""===g.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-test-row",children:(0,r.tZ)("div",{className:u().dynamic([["550654d38c65c62e",[""===g.type?"--foreground-dimmer":"--foreground-default"]]])+" dropdown-container",children:(0,r.tZ)(_l.Z,{items:[el.Fl.Match,el.Fl.Exact,el.Fl.Regex,el.Fl.Compatibility],renderItemChildComponent:function(e){return(0,r.BX)("a",{className:u().dynamic([["550654d38c65c62e",[""===g.type?"--foreground-dimmer":"--foreground-default"]]]),children:[e,(0,r.tZ)("br",{className:u().dynamic([["550654d38c65c62e",[""===g.type?"--foreground-dimmer":"--foreground-default"]]])}),(0,r.tZ)(kl.Z,{size:"xsmall",children:jl(e)})]})},renderAnchorComponent:function(e){var t=e.innerRef,n=(0,Sl.Z)(e,["innerRef"]);return(0,r.BX)("a",(0,tt.Z)((0,ae.Z)({ref:t},n),{className:u().dynamic([["550654d38c65c62e",[""===g.type?"--foreground-dimmer":"--foreground-default"]]])+" dropdown-view dropdown-anchor",children:[(0,r.tZ)(kl.Z,{children:g.type}),(0,r.tZ)(kl.Z,{children:(0,r.tZ)(Wa.Z,{})})]}))},onClick:function(e){b((function(t){return(0,tt.Z)((0,ae.Z)({},t),{type:e})}))}})})}),(0,r.BX)("div",{className:u().dynamic([["550654d38c65c62e",[""===g.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-test-row align-end",children:[(0,r.tZ)(vl.Z,{onClick:l,children:"Cancel"}),(0,r.tZ)(vl.Z,{color:"primary",filled:!0,onClick:function(){if(!g.name||!g.output)return m("Test name and expected output must be provided."),g.name||Z("name"),void(g.output||Z("output"));g.type?(n({testId:null===t||void 0===t?void 0:t.id,name:g.name,input:g.input||"",type:g.type,output:g.output}),b(h(void 0))):m("A test type must be provided")},children:"Save"})]}),(0,r.tZ)(u(),{id:"550654d38c65c62e",dynamic:[""===g.type?"--foreground-dimmer":"--foreground-default"],children:".dropdown-container.__jsx-style-dynamic-selector{border:1px solid var(--outline-dimmest);width:100%;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4)}.dropdown-anchor.__jsx-style-dynamic-selector{padding:var(--space-8)}.dropdown-container.__jsx-style-dynamic-selector .anchor{z-index:1}.dropdown-container.__jsx-style-dynamic-selector .dropdown-view{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;text-align:right}.dropdown-container.__jsx-style-dynamic-selector .dropdown-view .text{color:var(".concat(""===g.type?"--foreground-dimmer":"--foreground-default",")}.manage-tests-view.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;padding:var(--space-16)}.manage-test-row.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;padding-top:var(--space-16)}.align-end.__jsx-style-dynamic-selector{-webkit-box-pack:end;-webkit-justify-content:flex-end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:flex-end}.manage-test-row.__jsx-style-dynamic-selector>button{margin-left:var(--space-8)}.manage-test-row-section.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:start;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;margin:0 var(--space-16);width:100%}")})]})})},Fl=function(e){var t=e.test,n=e.onEdit,i=e.onDelete,o=e.onView,a=e.isTeacherView,l=e.status,s=e.isRunning,c=e.onShowFailed,d=e.disableButtons,f="";return l?f=l:s&&(f="Running"),(0,r.BX)("div",{onClick:function(){return o()},className:"jsx-d0055d2df6a917c5 test",children:[(0,r.BX)("div",{className:"jsx-d0055d2df6a917c5 test-row",children:[(0,r.tZ)("div",{className:"jsx-d0055d2df6a917c5 test-text",children:(0,r.tZ)(kl.Z,{size:"large",children:t.name})}),a?(0,r.tZ)("div",{onClick:function(e){return e.stopPropagation()},className:"jsx-d0055d2df6a917c5 test-row",children:(0,r.BX)(r.HY,{children:[(0,r.tZ)(vl.Z,{color:"primary",onClick:n,Icon:Yr.Z,disabled:d}),(0,r.tZ)(Bl.Z,{width:"var(--space-4)"}),(0,r.tZ)(vl.Z,{onClick:i,color:"negative",Icon:Oe.Z,disabled:d})]})}):null]}),l||s?(0,r.BX)(r.HY,{children:[(0,r.tZ)(Bl.Z,{height:2}),(0,r.BX)("div",{className:"jsx-d0055d2df6a917c5 test-row",children:[(0,r.tZ)("div",{className:"jsx-d0055d2df6a917c5 test-text",children:(0,r.tZ)(kl.Z,{className:wl()([{"status-passed":"Passed"===l},{"status-failed":"Failed"===l}]),children:f})}),(0,r.tZ)(vl.Z,{onClick:function(e){return e.stopPropagation(),c(e)},disabled:s,children:"Results"})]})]}):null,(0,r.tZ)(u(),{id:"d0055d2df6a917c5",children:".test.jsx-d0055d2df6a917c5{background-color:var(--background-higher);margin-top:var(--space-8);padding:var(--space-8);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-border-radius:var(--border-radius-8);-moz-border-radius:var(--border-radius-8);border-radius:var(--border-radius-8);cursor:pointer}.test-row.jsx-d0055d2df6a917c5 .status-passed{color:var(--accent-positive-default)}.test-row.jsx-d0055d2df6a917c5 .status-failed{color:var(--accent-negative-default)}.test-text.jsx-d0055d2df6a917c5{width:100%;padding:var(--space-4)0;padding-right:var(--space-8);word-break:break-all}.test.jsx-d0055d2df6a917c5:hover{background-color:var(--background-higher)}.test-row.jsx-d0055d2df6a917c5{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:start}"})]})},Ml=function(e){var t=e.text;if(!t)return null;var n=t.split("\n").map((function(e,t){return[e,"".concat(t+1)]}));return""===n[n.length-1][0]&&n.pop(),(0,r.BX)(Cl.Ug,{children:[(0,r.tZ)("code",{className:"jsx-6ac664c130469a42 gutter",children:(0,r.tZ)("pre",{className:"jsx-6ac664c130469a42",children:n.map((function(e){var t=(0,a.Z)(e,2);t[0];return t[1]})).join("\n")})}),(0,r.tZ)("code",{className:"jsx-6ac664c130469a42 text",children:(0,r.tZ)("pre",{className:"jsx-6ac664c130469a42",children:t})}),(0,r.tZ)(u(),{id:"6ac664c130469a42",children:".gutter.jsx-6ac664c130469a42,.text.jsx-6ac664c130469a42{color:var(--foreground-default)}.gutter.jsx-6ac664c130469a42{min-width:1.5em}.text.jsx-6ac664c130469a42{max-width:80%}"})]})},Wl=n(37529),Ol=n.n(Wl),Hl=function(e){var t=e.expected,n=e.actual;if(!t||!n)return null;var i=n.split("\n"),o=t.split("\n"),l=o.length>i.length?o:i,s=l.map((function(e,t){return[e,"".concat(t+1)]})),c=l.map((function(e,t){var n=t<i.length?i[t]:"",a=t<o.length?o[t]:"";return(0,r.BX)(r.HY,{children:[Ol()(n,a).map((function(e,t){var n;return-1===e[0]&&(n={backgroundColor:"var(--accent-negative-dimmer)",textDecoration:"line-through"}),1===e[0]&&(n={backgroundColor:"var(--accent-positive-dimmer)",textDecoration:"underline"}),(0,r.tZ)("span",{style:n,children:e[1]},t)})),(0,r.tZ)("br",{})]})}));return(0,r.BX)(Cl.Ug,{children:[(0,r.tZ)("code",{className:"jsx-6ac664c130469a42 gutter",children:(0,r.tZ)("pre",{className:"jsx-6ac664c130469a42",children:s.map((function(e){var t=(0,a.Z)(e,2);t[0];return t[1]})).join("\n")})}),(0,r.tZ)("code",{className:"jsx-6ac664c130469a42 text",children:(0,r.tZ)("pre",{className:"jsx-6ac664c130469a42",children:c})}),(0,r.tZ)(u(),{id:"6ac664c130469a42",children:".gutter.jsx-6ac664c130469a42,.text.jsx-6ac664c130469a42{color:var(--foreground-default)}.gutter.jsx-6ac664c130469a42{min-width:1.5em}.text.jsx-6ac664c130469a42{max-width:80%}"})]})},Vl=function(e){var t=e.test,n=e.actualOutput,i=e.isOpen,o=e.isResults,a=e.onRequestClose,l=e.didFail,s=e.error,c=t?jl(t.type):"",d=null===n||void 0===n?void 0:n.split("\n"),f=null===t||void 0===t?void 0:t.output.split("\n"),p=null===t||void 0===t?void 0:t.output;return l=null!==l&&void 0!==l?l:"Failed"===(null===t||void 0===t?void 0:t.status),(0,r.BX)(Il.Z,{onRequestClose:a,isOpen:i&&void 0!==t,children:[(0,r.BX)("div",{className:"jsx-c7ed87540f6ec33d test-info",children:[(0,r.BX)(Cl.gC,{align:"center",spacing:1,children:[(0,r.BX)(W.Z,{level:4,children:[o?"Test results: ":null,null===t||void 0===t?void 0:t.name]}),(0,r.BX)(Cl.Ug,{spacing:1,children:[(0,r.tZ)("div",{role:"tooltip","data-microtip-position":"top","aria-label":c,className:"jsx-c7ed87540f6ec33d test-type",children:(0,r.tZ)(kl.Z,{align:"center",size:"small",children:null===t||void 0===t?void 0:t.type})}),o&&(null===t||void 0===t?void 0:t.status)?(0,r.tZ)("div",{className:"jsx-c7ed87540f6ec33d "+"test-status ".concat(null===t||void 0===t?void 0:t.status),children:(0,r.tZ)(kl.Z,{align:"center",size:"small",children:null===t||void 0===t?void 0:t.status})}):null]})]}),(0,r.tZ)(Bl.Z,{height:6}),(0,r.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-row",children:(0,r.BX)("div",{className:"jsx-c7ed87540f6ec33d test-io-section",children:[(0,r.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-label",children:o?(0,r.BX)(Cl.Ug,{spacing:1,align:"center",children:[(0,r.tZ)(kl.Z,{size:"medium",children:"Expected output"}),(0,r.tZ)(kl.Z,{size:"xsmall",children:(0,r.tZ)("span",{"data-microtip-position":"top",role:"tooltip","aria-label":"Your program is expected to print this output.",className:"jsx-c7ed87540f6ec33d help",children:"?"})})]}):(0,r.tZ)(kl.Z,{size:"medium",children:"Output"})}),(0,r.tZ)(Bl.Z,{height:"var(--space-8)"}),(0,r.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-box",children:(0,r.tZ)(Ml,{text:null===t||void 0===t?void 0:t.output})})]})}),(0,r.tZ)(Bl.Z,{height:2}),(0,r.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-row",children:(0,r.BX)("div",{className:"jsx-c7ed87540f6ec33d test-io-section",children:[(0,r.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-label",children:o?(0,r.BX)(Cl.Ug,{spacing:1,align:"center",children:[(0,r.tZ)(kl.Z,{size:"medium",children:"Actual output"}),(0,r.tZ)(kl.Z,{size:"xsmall",children:(0,r.tZ)("span",{"data-microtip-position":"top",role:"tooltip","aria-label":"Your program actually printed this output.",className:"jsx-c7ed87540f6ec33d help",children:"?"})})]}):(0,r.tZ)(kl.Z,{size:"medium",children:"Input"})}),(0,r.tZ)(Bl.Z,{height:"var(--space-8)"}),(0,r.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-box",children:(0,r.tZ)(Ml,{text:o?n:null===t||void 0===t?void 0:t.input})})]})}),o&&l?(0,r.tZ)(r.HY,{children:s?(0,r.BX)(r.HY,{children:[(0,r.tZ)(Bl.Z,{height:2}),(0,r.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-row",children:(0,r.BX)("div",{className:"jsx-c7ed87540f6ec33d test-io-section",children:[(0,r.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-label",children:(0,r.tZ)(kl.Z,{size:"medium",children:"Error(s)"})}),(0,r.tZ)(Bl.Z,{height:"var(--space-8)"}),(0,r.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-box",children:(0,r.tZ)(Ml,{text:s.stderr||s.message})})]})})]}):(null===t||void 0===t?void 0:t.type)!==el.Fl.Regex&&f&&d&&(0,r.BX)(r.HY,{children:[(0,r.tZ)(Bl.Z,{height:2}),(0,r.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-row",children:(0,r.BX)("div",{className:"jsx-c7ed87540f6ec33d test-io-section",children:[(0,r.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-label",children:(0,r.BX)(Cl.Ug,{spacing:1,align:"center",children:[(0,r.tZ)(kl.Z,{size:"medium",children:"Difference"}),(0,r.tZ)(kl.Z,{size:"xsmall",children:(0,r.tZ)("span",{"data-microtip-position":"top",role:"tooltip","aria-label":"Modify your output to match the expected output.",className:"jsx-c7ed87540f6ec33d help",children:"?"})})]})}),(0,r.tZ)(Bl.Z,{height:"var(--space-8)"}),(0,r.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-box",children:(0,r.tZ)(Hl,{expected:p,actual:n})})]})})]})}):null]}),(0,r.tZ)(u(),{id:"c7ed87540f6ec33d",children:".test-info.jsx-c7ed87540f6ec33d{padding:var(--space-24);display:relative}.test-io-line-spacing.jsx-c7ed87540f6ec33d{width:var(--space-8);-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.test-io-row.jsx-c7ed87540f6ec33d{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.test-io-line-number.jsx-c7ed87540f6ec33d{display:inline-block;min-width:1.5em;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;display:-webkit-inline-box;display:-webkit-inline-flex;display:-moz-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.test-io-line.jsx-c7ed87540f6ec33d{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:start;font-family:var(--font-family-code)}.test-io-line-content.jsx-c7ed87540f6ec33d{display:inline-block}.test-io-label.jsx-c7ed87540f6ec33d{padding-bottom:var(--space-8);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.test-io-label.jsx-c7ed87540f6ec33d .text{color:var(--foreground-dimmer)}.test-io-section.jsx-c7ed87540f6ec33d{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:start;-webkit-justify-content:start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:start;width:100%}.test-io-box.jsx-c7ed87540f6ec33d{height:100%;border:1px solid var(--outline-dimmest);-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:var(--space-8);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;overflow-x:auto}.test-io-box.jsx-c7ed87540f6ec33d .text{white-space:nowrap}.test-type.jsx-c7ed87540f6ec33d,.test-status.jsx-c7ed87540f6ec33d{background-color:var(--background-highest);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:var(--space-8);display:inline-block;spacing:1;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.test-status.jsx-c7ed87540f6ec33d .text{color:var(--white)}.test-status.Passed.jsx-c7ed87540f6ec33d{background-color:var(--accent-positive-default)}.test-status.Failed.jsx-c7ed87540f6ec33d{background-color:var(--accent-negative-default)}.help.jsx-c7ed87540f6ec33d{display:-webkit-inline-box;display:-webkit-inline-flex;display:-moz-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;border:1px solid var(--background-higher);-webkit-border-radius:100%;-moz-border-radius:100%;border-radius:100%;width:var(--space-16);height:var(--space-16);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer}"})]})},ql=n(9556),$l=n(75240),Yl=function(){var e,t,n,l,s,c,d,f,p=(0,v.Z)(),h=p.iotester,m=p.dotReplit,g=p.container,b=(0,We.Z)(),Z=b.showError,y=b.showConfirm,x=(0,a.Z)(i.useState([]),2),w=x[0],k=x[1],C=(0,a.Z)(i.useState(),2),S=C[0],_=C[1],T=(0,a.Z)(i.useState(g.getConnectionState()),2),R=T[0],B=T[1],E=(0,a.Z)(i.useState(h.state),2),G=E[0],D=E[1],I=(0,a.Z)(i.useState(),2),j=I[0],N=I[1],L=(0,yo.x)();i.useEffect((function(){return g.onConnectionStateChanged(B)}),[B,g]);var z=(0,ge.Z)(),P=(0,Fa.CH)({variables:{replId:z}}),A="Repl"===(null===(e=P.data)||void 0===e||null===(t=e.repl)||void 0===t?void 0:t.__typename)?P.data.repl:null,X="Team"===(null===A||void 0===A||null===(n=A.owner)||void 0===n?void 0:n.__typename)&&A.owner.id||null,U=(0,a.Z)((0,Fa.vk)({onCompleted:function(e){e&&e.saveIOTestResults&&Z(e.saveIOTestResults.message)}}),1)[0];i.useEffect((function(){var e=[h.onStateChanged((function(e){D(e),X&&e===ql.Z.Idle&&k((function(e){var t;return U({variables:{replId:z,results:Object.values(e).map((function(e){var n;return{testId:e.testId,status:e.status,output:(null===(n=e.error)||void 0===n?void 0:n.stderr)?(null!==(t=e.output)&&void 0!==t?t:"")+e.error:e.output}})),teamId:X}}).catch((function(t){qi.Tb(t,(function(t){return t.setExtras({results:e,payload:j})}))})),e}))})),h.onError((function(e){Z(e.message)})),h.onTestResult((function(e){k((function(t){var n=(0,tt.Z)((0,ae.Z)({},t[e.testId]),{testId:e.testId,status:"passed"===e.body?el.kQ.Passed:el.kQ.Failed});return"error"===e.body&&(n.error=e.error),(0,tt.Z)((0,ae.Z)({},t),(0,o.Z)({},e.testId,n))}))})),h.onInstructionResult((function(e){k((function(t){var n,r,i=Math.abs(e.instructionId),a="";switch(e.body){case"passed":var l;a+=null!==(l=e.passed.output)&&void 0!==l?l:"";break;case"failed":var s;a+=null!==(s=e.failed.output)&&void 0!==s?s:"";break;case"timeout":var c;a+=null!==(c=e.timeout.output)&&void 0!==c?c:"";break;case"error":a+=e.error.message}return(0,tt.Z)((0,ae.Z)({},t),(0,o.Z)({},i,(0,tt.Z)((0,ae.Z)({},t[i]),{testId:i,output:(null!==(r=null===(n=w[i])||void 0===n?void 0:n.output)&&void 0!==r?r:"")+a})))}))}))];return function(){return e.forEach((function(e){return e()}))}}),[w,Z,D,h,z,X,j,U]),i.useEffect((function(){var e=function(e){(0,Wi.Z)(e,Error)&&Z(e.message),qi.Tb(e)};return Pl(m).then(_).catch(e),m.watch((function(){return Pl(m).then(_).catch(e)}))}),[m,_,Z]);var F=null===A||void 0===A?void 0:A.ioTests,M=(0,a.Z)((0,Fa.Ne)({onError:function(e){return Z(e)},onCompleted:function(e){var t;"UserError"===(null===(t=e.deleteTemplateTest)||void 0===t?void 0:t.__typename)?Z(e.deleteTemplateTest.message):(y("Test deleted!"),P.refetch())}}),2),O=M[0],H=M[1],V=(0,a.Z)((0,Fa.AA)({onError:function(e){return Z(e)},onCompleted:function(e){var t;"UserError"===(null===(t=e.updateTemplateTest)||void 0===t?void 0:t.__typename)?Z(e.updateTemplateTest.message):"ReplTemplateTest"===e.updateTemplateTest.__typename&&(y("Test updated!"),L.writeFragment({fragment:Fa.Gg,data:e.updateTemplateTest}))}}),2),q=V[0],$=V[1],Y=(0,a.Z)((0,Fa.pV)({onError:function(e){return Z(e)},onCompleted:function(e){var t;"UserError"===(null===(t=e.createTemplateTest)||void 0===t?void 0:t.__typename)?Z(e.createTemplateTest.message):(y("Test created!"),P.refetch())}}),2),K=Y[0],J=Y[1],Q=P.loading||H.called&&H.loading||$.called&&$.loading||J.called&&J.loading;i.useEffect((function(){Q||N(S&&F&&F.length>0?{runInfo:S,tests:F.map(Ll)}:void 0)}),[F,S,N,Q]);var ee=(0,a.Z)(i.useState(!1),2),te=ee[0],ne=ee[1],re=(0,a.Z)(i.useState(!1),2),ie=re[0],oe=re[1],le=(0,a.Z)(i.useState(!1),2),se=le[0],ce=le[1],ue=(0,a.Z)(i.useState(),2),de=ue[0],fe=ue[1],pe="undefined"!==typeof de&&"Repl"===(null===(l=P.data)||void 0===l?void 0:l.repl.__typename)&&P.data.repl.ioTests[de]||void 0,he="Repl"===(null===(s=P.data)||void 0===s?void 0:s.repl.__typename)&&P.data.repl.isProject;if(P.error)return(0,r.BX)("div",{className:"jsx-fb1466c53ace89ca wrapper",children:[(0,r.tZ)(kl.Z,{align:"center",children:"Unable to fetch tests"}),(0,r.tZ)(u(),{id:"fb1466c53ace89ca",children:".wrapper.jsx-fb1466c53ace89ca{padding:var(--deprecated-spacing-2);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}"})]});var ve=function(e){var t;if(void 0!==(null===(t=w[e])||void 0===t?void 0:t.status))return w[e].status===el.kQ.Passed?"Passed":"Failed"};return(0,r.BX)("div",{className:"jsx-69bed4444090144f tests-panel",children:[(0,r.tZ)("div",{className:"jsx-69bed4444090144f tests-header",children:(0,r.tZ)(W.Z,{level:4,children:"Input/Output Tests"})}),P.loading?(0,r.tZ)("div",{className:"jsx-69bed4444090144f spinner",children:(0,r.tZ)(me.Z,{})}):(0,r.BX)("div",{className:"jsx-69bed4444090144f tests",children:[(0,r.BX)("div",{className:"jsx-69bed4444090144f button-bar",children:[he?(0,r.tZ)(vl.Z,{color:"green",Icon:Mn.Z,className:"create-test-button",disabled:Q||G!==ql.Z.Idle,onClick:function(){fe(void 0),ne(!0)},children:"Create test"}):null,!he&&F&&0===F.length?(0,r.tZ)(kl.Z,{children:"This project has no tests "}):(0,r.tZ)(vl.Z,{color:"positive",Icon:ol.Z,onClick:function(){var e;if(!j||"Repl"!==(null===A||void 0===A?void 0:A.__typename)||"Team"!==(null===(e=A.owner)||void 0===e?void 0:e.__typename)||h.state!==ql.Z.Idle){var t=new Error("no tests or run info");throw qi.Tb(t,(function(e){return e.setExtra("payload",j)})),t}k({}),h.run(j).catch((function(e){qi.Tb(e,(function(e){return e.setExtra("payload",j)})),Z(e.message)}))},disabled:Q||G!==ql.Z.Idle||!j||R!==$l.e.CONNECTED,children:"Run tests"})]}),null===F||void 0===F?void 0:F.map((function(e,t){return(0,r.tZ)(Fl,{test:e,onEdit:function(){fe(t),ne(!0)},onDelete:function(){O({variables:{testId:e.id}})},onView:function(){fe(t),oe(!0),ce(!1)},onShowFailed:function(){fe(t),oe(!0),ce(!0)},isRunning:G!==ql.Z.Idle&&void 0!==w[e.id]&&void 0===w[e.id].status,isTeacherView:he,status:ve(e.id),disableButtons:Q||G!==ql.Z.Idle},e.id)})),(0,r.tZ)(Ul,{test:pe,isOpen:te,readOnly:!he,onRequestClose:function(){ne(!1),fe(void 0)},onCancel:function(){ne(!1),fe(void 0)},onSubmit:function(e){var t,n,r,i;void 0!==e.testId?(q({variables:{input:e}}),fe(void 0)):"Repl"===(null===(t=P.data)||void 0===t||null===(n=t.repl)||void 0===n?void 0:n.__typename)&&(null===(r=P.data)||void 0===r||null===(i=r.repl)||void 0===i?void 0:i.template)&&K({variables:{input:(0,tt.Z)((0,ae.Z)({},e),{templateId:P.data.repl.template.id})}}),ne(!1)}}),(0,r.tZ)(Vl,{test:pe,isOpen:ie,actualOutput:"undefined"!==typeof pe?null===(c=w[pe.id])||void 0===c?void 0:c.output:void 0,error:pe&&(null===(d=w[pe.id])||void 0===d?void 0:d.error),didFail:pe&&(null===(f=w[pe.id])||void 0===f?void 0:f.status)===el.kQ.Failed,isResults:se,onRequestClose:function(){oe(!1),fe(void 0)}})]}),(0,r.tZ)(u(),{id:"69bed4444090144f",children:".flex-grow.jsx-69bed4444090144f{-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1}.spacer-1.jsx-69bed4444090144f{padding:var(--space-4)}.tests-header.jsx-69bed4444090144f{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;position:relative;padding:var(--space-4)0 var(--space-8)0;margin-bottom:var(--space-8);color:var(--foreground-default);width:100%;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.button-bar.jsx-69bed4444090144f{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-bottom:var(--space-8)}.button-bar.jsx-69bed4444090144f>button{margin-right:var(--space-8);margin-bottom:var(--space-8)}.spinner.jsx-69bed4444090144f{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-moz-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);-o-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.tests-panel.jsx-69bed4444090144f{min-width:200px;background-color:var(--background-default);color:var(--foreground-default);overflow:hidden auto}.section.jsx-69bed4444090144f{height:-webkit-calc(100% - 50px);height:-moz-calc(100% - 50px);height:calc(100% - 50px)}"})]})};function Kl(){var e=(0,a.Z)(i.useState(null),2),t=e[0],n=e[1],o=i.useRef(Xl.None),l=(0,ge.Z)(),s=(0,bl.Z)(),c=s.language,d=s.isLoading,f=(0,Fa.CH)({variables:{replId:l}}),p=f.loading;return i.useEffect((function(){var e,t,r=null===(e=f.data)||void 0===e?void 0:e.repl;if("Repl"===(null===r||void 0===r?void 0:r.__typename)){var i=r.unitTests,a=r.ioTests,l=Xl.Choose;l=a.length>0?Xl.IO:(null===i||void 0===i?void 0:i.tests)&&(null===(t=i.tests)||void 0===t?void 0:t.length)>0||(null===i||void 0===i?void 0:i.meta)?Xl.Unit:r.currentUserPermissions.writeTests?o.current!==Xl.None?o.current:Xl.Choose:Xl.None,n(l)}}),[f.data]),p||d?(0,r.BX)("div",{className:"jsx-1652fb32f8a812d3",children:[(0,r.tZ)(me.Z,{size:32}),(0,r.tZ)(u(),{id:"1652fb32f8a812d3",children:"div.jsx-1652fb32f8a812d3{height:100%;width:100%;background-color:var(--background-default);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}"})]}):(0,r.BX)("div",{className:"jsx-ba2c7540ad19d138 testing-controller",children:[t===Xl.None&&(0,r.tZ)("div",{className:"jsx-ba2c7540ad19d138 empty",children:(0,r.tZ)(kl.Z,{children:"No tests found"})}),t===Xl.Choose&&(0,r.BX)(Cl.gC,{align:"center",spacing:2,children:[(0,r.tZ)(W.Z,{align:"center",level:3,children:"Choose a testing method"}),(0,r.BX)("div",{onClick:function(){n(Xl.Unit),o.current=Xl.Unit},className:"jsx-ba2c7540ad19d138 "+(wl()("panel",{"is-disabled":!c})||""),children:[(0,r.tZ)(W.Z,{level:4,children:"Unit tests"}),(0,r.tZ)(kl.Z,{align:"center",children:c?"A language specific framework that tests individual functions":"Unit tests are not currently supported for this language"})]}),(0,r.tZ)("div",{onClick:function(){n(Xl.IO),o.current=Xl.IO},className:"jsx-ba2c7540ad19d138 panel",children:(0,r.BX)(Cl.gC,{spacing:1,align:"center",children:[(0,r.tZ)(W.Z,{level:4,children:"Input output tests"}),(0,r.tZ)(kl.Z,{align:"center",children:"Test your program via standard in, and assert based on the result of standard out"})]})})]}),t===Xl.IO&&(0,r.tZ)(Yl,{}),t===Xl.Unit&&(0,r.tZ)(Zl,{onBack:function(){return n(Xl.Choose)}}),(0,r.tZ)(u(),{id:"ba2c7540ad19d138",children:".empty.jsx-ba2c7540ad19d138{padding:var(--space-16);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);-webkit-box-shadow:var(--shadow-2);-moz-box-shadow:var(--shadow-2);box-shadow:var(--shadow-2);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}.testing-controller.jsx-ba2c7540ad19d138{overflow-y:auto;padding:var(--space-8);height:100%;width:100%;background-color:var(--background-default);-webkit-box-shadow:var(--shadow-1);-moz-box-shadow:var(--shadow-1);box-shadow:var(--shadow-1)}.panel.jsx-ba2c7540ad19d138{width:100%;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);border:1px solid var(--background-higher);max-width:200px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;padding:var(--space-8)}.panel.jsx-ba2c7540ad19d138:hover{background-color:var(--background-root)}.panel.is-disabled.jsx-ba2c7540ad19d138{opacity:.5;pointer-events:none}"})]})}!function(e){e[e.None=0]="None",e[e.Choose=1]="Choose",e[e.Unit=2]="Unit",e[e.IO=3]="IO"}(Xl||(Xl={}));var Jl={Content:function(){return(0,r.tZ)(Kl,{})},Icon:function(e){var t=e.size;return(0,r.tZ)(qe.Z,{size:t})},getTitle:function(){return"Tests"}};function Ql(){var e=(0,le.Z)(["\n  fragment EducationPaneRepl on Repl {\n    id\n    title\n    url\n    timeCreated\n    slug\n  }\n"]);return Ql=function(){return e},e}function es(){var e=(0,le.Z)(["\n  fragment EducationPaneTemplate on ReplTemplate {\n    id\n    dueDate\n    repl {\n      id\n      ...EducationPaneRepl\n    }\n  }\n  ","\n"]);return es=function(){return e},e}function ts(){var e=(0,le.Z)(["\n  fragment EducationPaneUser on User {\n    id\n    username\n    firstName\n    lastName\n    fullName\n    image\n  }\n"]);return ts=function(){return e},e}function ns(){var e=(0,le.Z)(["\n  fragment EducationPaneReplSubmission on ReplSubmission {\n    id\n    timeSubmitted\n    timeLastReviewed\n    author {\n      id\n      ...EducationPaneUser\n    }\n    repl {\n      id\n      ...EducationPaneRepl\n    }\n    isGroupSubmission\n    submissionGroup {\n      users {\n        id\n        ...EducationPaneUser\n      }\n    }\n  }\n  ","\n  ","\n"]);return ns=function(){return e},e}function rs(){var e=(0,le.Z)(["\n  fragment EducationPaneTemplateWithSubmissions on ReplTemplate {\n    id\n    ...EducationPaneTemplate\n    submissions {\n      id\n      ...EducationPaneReplSubmission\n    }\n  }\n  ","\n  ","\n"]);return rs=function(){return e},e}function is(){var e=(0,le.Z)(['\n  fragment EducationPaneTeam on Team {\n    id\n    templates {\n      id\n      ...EducationPaneTemplate\n    }\n    username\n    displayName\n    image\n    students: members(permissions: "member") {\n      id\n      permissions\n      nickname\n      user {\n        id\n        ...EducationPaneUser\n      }\n    }\n  }\n  ',"\n  ","\n"]);return is=function(){return e},e}function os(){var e=(0,le.Z)(["\n  fragment EducationPaneReplAttachment on ReplAttachment {\n    id\n    fileName\n    mimeType\n    contents\n    timeCreated\n    timeUpdated\n  }\n"]);return os=function(){return e},e}function as(){var e=(0,le.Z)(["\n  query EducationPane($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isProject\n        isProjectFork\n        ...EducationPaneRepl\n        owner {\n          ... on Team {\n            id\n            ...EducationPaneTeam\n          }\n        }\n        template {\n          id\n          ...EducationPaneTemplateWithSubmissions\n        }\n        submission {\n          id\n          ...EducationPaneReplSubmission\n        }\n        attachments {\n          id\n          ...EducationPaneReplAttachment\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return as=function(){return e},e}function ls(){var e=(0,le.Z)(["\n  mutation EducationPaneUploadReplAttachment(\n    $input: UploadReplAttachmentInput!\n  ) {\n    uploadReplAttachment(input: $input) {\n      ... on Repl {\n        id\n        attachments {\n          id\n          ...EducationPaneReplAttachment\n        }\n      }\n    }\n  }\n  ","\n"]);return ls=function(){return e},e}function ss(){var e=(0,le.Z)(["\n  mutation MarkSubmissionReviewed($replId: String!, $status: Boolean!) {\n    reviewRepl(replId: $replId, status: $status) {\n      ... on UserError {\n        message\n      }\n      ... on Repl {\n        id\n        submission {\n          id\n          timeLastReviewed\n        }\n      }\n    }\n  }\n"]);return ss=function(){return e},e}function cs(){var e=(0,le.Z)(["\n  mutation UnsubmitSubmission($replId: String!) {\n    unsubmitRepl(replId: $replId) {\n      ... on UserError {\n        message\n      }\n      ... on Repl {\n        id\n        submission {\n          id\n          timeSubmitted\n          timeLastReviewed\n        }\n      }\n    }\n  }\n"]);return cs=function(){return e},e}var us={},ds=(0,se.Ps)(Ql()),fs=(0,se.Ps)(es(),ds),ps=(0,se.Ps)(ts()),hs=(0,se.Ps)(ns(),ps,ds),ms=(0,se.Ps)(rs(),fs,hs),vs=(0,se.Ps)(is(),fs,ps),gs=(0,se.Ps)(os()),bs=(0,se.Ps)(as(),ds,vs,ms,hs,gs);var Zs=(0,se.Ps)(ls(),gs);var ys=(0,se.Ps)(ss());var xs=(0,se.Ps)(cs());var ws,ks=n(14994),Cs=n(75301),Ss=n(96594),_s=function(){return(0,r.BX)(p.G7,{title:"late",css:[p.l0.fontSize("small"),p.l0.px(4),p.l0.borderRadius(4),p.l0.color.accentNegativeDefault,{border:"1px solid",borderColor:p.TV.accentNegativeDefault}],children:["late",(0,r.tZ)(u(),{id:"4b00beb7f87eecca",children:"span.jsx-4b00beb7f87eecca{color:var(--accent-negative-default)}"})]})},Ts=n(96084),Rs=n(64184),Bs=p.KD.a,Es=p.KD.div;function Gs(e){var t=ws.NotStarted,n=ws.Started,r=ws.Submitted,i=ws.Reviewed;switch(e){case t:return"Not Started";case n:return"Not submitted yet";case r:return"Submitted (waiting for review)";case i:return"Reviewed";default:return""}}function Ds(e){return e?e.timeSubmitted||e.timeLastReviewed?e.timeSubmitted&&!e.timeLastReviewed?ws.Submitted:!e.timeSubmitted&&e.timeLastReviewed?ws.Reviewed:e.timeSubmitted&&e.timeLastReviewed?new Date(e.timeSubmitted)>new Date(e.timeLastReviewed)?ws.Submitted:ws.Reviewed:void 0:ws.Started:ws.NotStarted}!function(e){e.NotStarted="not-started",e.Started="started",e.Submitted="submitted",e.Reviewed="reviewed"}(ws||(ws={}));var Is,js=function(e,t){var n=e.indexOf("?"),r=new URLSearchParams(-1===n?"":e.slice(n));r.append("submissionReview","true");var i=-1===n?e:e.slice(0,n);return t?"".concat(i,"?").concat(r.toString(),"#").concat(t):"".concat(i,"?").concat(r.toString())},Ns=(Is={},(0,o.Z)(Is,ws.Started,p.TV.blueDefault),(0,o.Z)(Is,ws.NotStarted,p.TV.foregroundDimmest),(0,o.Z)(Is,ws.Reviewed,p.TV.greenDefault),(0,o.Z)(Is,ws.Submitted,p.TV.yellowDefault),Is);function Ls(e){var t=e.status,n=e.highlighted?p.TV.foregroundDefault:Ns[t];return(0,r.tZ)(p.u,{tooltip:Gs(t),placement:"right",children:(0,r.BX)(p.G7,{children:[t===ws.Submitted?(0,r.tZ)(Ts.Z,{color:n}):null,t===ws.Reviewed?(0,r.tZ)(qe.Z,{color:n}):null,t===ws.Started?(0,r.tZ)(ks.Z,{color:n}):null,t===ws.NotStarted?(0,r.tZ)(Rs.Z,{color:n}):null]})})}function zs(e){var t=e.result,n=e.highlighted,i=e.current,o=e.isLate,a=(0,C.Z)(),l=!i&&t.url?js(t.url,a):"",s=(0,r.BX)(p.G7,{css:[p.l0.p(8),p.l0.rowWithGap(8),p.l0.justify.spaceBetween,p.l0.align.center,t.status===ws.NotStarted&&{opacity:n?1:.4},n&&{backgroundColor:p.gU.listItem[":not([disabled])"][":not(textarea):active"].backgroundColor},i&&{backgroundColor:p.TV.accentPrimaryDimmer,color:p.TV.foregroundDefault}],children:[(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(4),p.l0.align.center,p.l0.flex.growAndShrink(1)],children:[(0,r.tZ)(p.qE,{size:24,username:t.name,src:t.image}),(0,r.tZ)(p.xv,{css:p.l0.flex.growAndShrink(1),children:t.name}),o?(0,r.tZ)(_s,{}):null]}),t.status?(0,r.tZ)(Ls,{status:t.status,highlighted:n||i}):null]});return l?(0,r.tZ)(Bs,{href:l,style:{color:"inherit"},children:s}):s}var Ps=function(e){var t=e.team,n=e.submission,o=e.submissionList,l=e.template,s=(0,a.Z)(i.useState([]),2),c=s[0],u=s[1],d=(0,a.Z)(i.useState(""),2),f=d[0],h=d[1],m=(0,Ss.Kb)({items:c,defaultHighlightedIndex:0}),v=m.isOpen,g=m.getComboboxProps,b=m.getInputProps,Z=m.getMenuProps,y=m.getItemProps,x=m.getToggleButtonProps,w=m.highlightedIndex,k=m.openMenu,C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(n.isGroupSubmission){var r=o;0!==e.length&&(r=r.filter((function(t){var n;return null===(n=t.submissionGroup)||void 0===n?void 0:n.users.some((function(t){var n;return null===(n=(null===t||void 0===t?void 0:t.fullName)||(null===t||void 0===t?void 0:t.username))||void 0===n?void 0:n.toLocaleLowerCase().includes(e.toLocaleLowerCase())}))})));var i=r.map((function(e){var t,n,r,i,o=(null===e||void 0===e||null===(t=e.submissionGroup)||void 0===t?void 0:t.users.map((function(e){return(null===e||void 0===e?void 0:e.fullName)||(null===e||void 0===e?void 0:e.username)||""})).join(", "))||"";return{image:(null===(r=null===e||void 0===e||null===(n=e.submissionGroup)||void 0===n?void 0:n.users[0])||void 0===r?void 0:r.image)||"",name:o,url:null===(i=e.repl)||void 0===i?void 0:i.url,status:Ds(e),submissionId:e.id,timeSubmitted:null===e||void 0===e?void 0:e.timeSubmitted}}));u((0,ie.Z)(i))}else{var a=t.students;a=0===e.length?a.filter((function(e){return e.user})).sort((function(e,t){var n,r,i,o;return(e.nickname||(null===(n=e.user)||void 0===n?void 0:n.fullName)||(null===(r=e.user)||void 0===r?void 0:r.username)||"").localeCompare(t.nickname||(null===(i=t.user)||void 0===i?void 0:i.fullName)||(null===(o=t.user)||void 0===o?void 0:o.username)||"")})):a.filter((function(t){var n,r,i;return null===(i=t.nickname||(null===(n=t.user)||void 0===n?void 0:n.fullName)||(null===(r=t.user)||void 0===r?void 0:r.username))||void 0===i?void 0:i.toLocaleLowerCase().includes(e.toLocaleLowerCase())}));var l=a.map((function(e){var t,n,r,i,a=o.find((function(t){var n,r;return(null===(n=t.author)||void 0===n?void 0:n.id)===(null===(r=e.user)||void 0===r?void 0:r.id)}));return{image:(null===(t=e.user)||void 0===t?void 0:t.image)||"",name:e.nickname||(null===(n=e.user)||void 0===n?void 0:n.fullName)||(null===(r=e.user)||void 0===r?void 0:r.username)||"",url:null===a||void 0===a||null===(i=a.repl)||void 0===i?void 0:i.url,status:Ds(a),submissionId:null===a||void 0===a?void 0:a.id,timeSubmitted:null===a||void 0===a?void 0:a.timeSubmitted}}));u((0,ie.Z)(l))}};return(0,r.BX)(p.G7,{css:[p.l0.position.relative,{zIndex:2}],children:[(0,r.BX)(Es,(0,tt.Z)((0,ae.Z)({css:[p.l0.position.relative]},g()),{children:[(0,r.tZ)(p.II,(0,ae.Z)({},b({value:f,placeholder:"Switch submission",onKeyDown:function(e){"Escape"===e.key&&u([])},onChange:function(e){var t=e.target.value;C(t),h(t)},onFocus:function(){C(),k()}}))),(0,r.tZ)(p.G7,{css:[p.l0.position.absolute,p.l0.top(0),p.l0.right(0),p.l0.height("100%"),p.l0.center],children:f?(0,r.tZ)(p.G7,{css:[p.l0.reset.button,p.l0.cursor.pointer,p.l0.px(8)],onClick:function(){return h("")},tag:"button",children:(0,r.tZ)(nl.Z,{})}):(0,r.tZ)(p.G7,(0,tt.Z)((0,ae.Z)({css:[p.l0.reset.button,p.l0.cursor.pointer,p.l0.px(8)]},x({refKey:"innerRef"})),{tag:"button",children:(0,r.tZ)(ki.Z,{})}))})]})),(0,r.tZ)(p.Tg,(0,tt.Z)((0,ae.Z)({tag:"ul",elevated:!0,css:[{zIndex:1,position:"absolute",overflowY:"auto",width:"100%",left:0,top:"calc(100% + ".concat(p.TV.space8,")"),border:"1px solid",borderColor:p.TV.outlineDimmest,listStyle:"none"},!v&&{visibility:"hidden"},p.l0.borderRadius(8),p.l0.maxHeight(400)]},Z({refKey:"innerRef"})),{children:c.map((function(e,t){var i=e.submissionId===n.id,o=!e.url;return(0,r.tZ)(p.G7,(0,tt.Z)((0,ae.Z)({tag:"li",css:[!o&&p.l0.cursor.pointer]},y({index:t,item:e,refKey:"innerRef",disabled:o,onClick:function(e){e.nativeEvent.preventDownshiftDefault=!0}})),{children:(0,r.tZ)(zs,{result:e,highlighted:w===t,current:i,isLate:l.dueDate&&e.timeSubmitted&&l.dueDate<e.timeSubmitted})}),e.name)}))}))]})},As=n(60081),Xs=n(67177),Us=function(e){return{short:(0,As.Z)(e,"do MMM"),long:(0,As.Z)(e,"do MMM, hh:mm a")}},Fs=function(e,t){var n=e.students.find((function(e){var n;return(null===(n=e.user)||void 0===n?void 0:n.id)===(null===t||void 0===t?void 0:t.id)}));return(null===n||void 0===n?void 0:n.nickname)||(null===t||void 0===t?void 0:t.fullName)||"@".concat(null===t||void 0===t?void 0:t.username)};function Ms(e){var t=e.submission,n=e.submissionList,i=(0,C.Z)(),o=n.findIndex((function(e){return e.id===t.id})),a=n[o-1],l=n[o+1],s=n.filter((function(e){return e.timeLastReviewed})).length;return(0,r.BX)(p.G7,{css:p.l0.rowWithGap(8),children:[n.length===s?(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(4),p.l0.flex.growAndShrink(1)],children:[(0,r.tZ)(qe.Z,{color:p.TV.greenDefault}),(0,r.BX)(p.xv,{color:"dimmer",css:[p.l0.flex.growAndShrink(1)],children:["All ",s," submissions reviewed"]})]}):(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(8),p.l0.flex.growAndShrink(1),p.l0.align.center],children:[(0,r.tZ)(p.u,{tooltip:"Reviewed",children:(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(4),p.l0.align.center],children:[(0,r.tZ)(qe.Z,{color:p.TV.greenDefault}),(0,r.tZ)(p.xv,{color:"dimmer",children:s})]})}),(0,r.tZ)(p.u,{tooltip:"Waiting for review",children:(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(4),p.l0.align.center],children:[(0,r.tZ)(Ts.Z,{size:12,color:p.TV.yellowDefault}),(0,r.tZ)(p.xv,{variant:"small",color:"dimmer",children:n.length-s})]})})]}),(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(4)],children:[(null===a||void 0===a?void 0:a.repl)?(0,r.tZ)(p.ZP,{small:!0,outlined:!0,href:js(a.repl.url,i),text:"",iconLeft:(0,r.tZ)(di.Z,{})}):(0,r.tZ)(p.zx,{small:!0,outlined:!0,text:"",disabled:!0,iconLeft:(0,r.tZ)(di.Z,{})}),(null===l||void 0===l?void 0:l.repl)?(0,r.tZ)(p.ZP,{small:!0,outlined:!0,href:js(l.repl.url,i),text:"",iconRight:(0,r.tZ)(To.Z,{})}):(0,r.tZ)(p.zx,{small:!0,outlined:!0,text:"",disabled:!0,iconRight:(0,r.tZ)(To.Z,{})})]})]})}function Ws(e){var t,n=e.submission,i=e.dueDate,o=e.team,a=Boolean(i&&i<n.timeSubmitted);return(0,r.BX)(p.Tg,{css:[p.l0.colWithGap(16),p.l0.p(16),p.l0.borderRadius(8)],elevated:!0,children:[n.isGroupSubmission&&n.submissionGroup?(0,r.tZ)(p.G7,{css:[p.l0.colWithGap(8),p.l0.maxHeight(400),p.l0.overflow("auto")],children:n.submissionGroup.users.map((function(e){return(0,r.tZ)(p.G7,{children:(0,r.tZ)(p.n5,{src:(null===e||void 0===e?void 0:e.image)||null,username:Fs(o,e)})},null===e||void 0===e?void 0:e.id)}))}):(0,r.tZ)(r.HY,{children:(0,r.tZ)(p.n5,{src:(null===(t=n.author)||void 0===t?void 0:t.image)||null,username:Fs(o,n.author)})}),n.timeSubmitted?(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8)],children:[(0,r.tZ)(p.G7,{css:[p.l0.colWithGap(4)],children:(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(4),p.l0.align.center],children:[(0,r.tZ)(qe.Z,{}),(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(4),p.l0.align.center],children:[(0,r.tZ)(p.xv,{css:[p.l0.flex.growAndShrink(1)],children:"Submitted"}),a?(0,r.tZ)(_s,{}):null,n.timeLastReviewed?null:(0,r.tZ)(p.xv,{variant:"small",color:"dimmer",css:[p.l0.flex.growAndShrink(1)],children:"(waiting for review)"})]})]})}),(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(4)],children:[(0,r.tZ)(ks.Z,{}),(0,r.tZ)(p.xv,{children:Us(new Date(n.timeSubmitted)).long})]})]}):(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8)],children:[(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(4),p.l0.align.center],children:[(0,r.tZ)(ks.Z,{}),(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(4),p.l0.align.center],children:[(0,r.tZ)(p.xv,{css:[p.l0.flex.growAndShrink(1)],children:"In progress"}),(0,r.tZ)(p.xv,{variant:"small",color:"dimmer",css:[p.l0.flex.growAndShrink(1)],children:"(not submitted)"})]})]}),n.repl?(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(4)],children:[(0,r.tZ)(Cs.Z,{}),(0,r.BX)(p.xv,{children:["Forked"," ",Us(new Date(n.repl.timeCreated)).short]})]}):(0,r.tZ)(p.xv,{children:"Submission repl missing"})]})]})}function Os(e){var t=e.repl,n=e.submission,i=(0,dn.H)(),o=(0,We.Z)().showError,l=(0,a.Z)(function(e){var t=(0,ae.Z)({},us,e);return Le.D(ys,t)}({onError:function(e){return o(e.message)},onCompleted:function(e){"UserError"===e.reviewRepl.__typename&&o(e.reviewRepl.message)}}),2),s=l[0],c=l[1].loading,u=(0,a.Z)(function(e){var t=(0,ae.Z)({},us,e);return Le.D(xs,t)}(),1)[0],d=Boolean(n.timeLastReviewed);return(0,r.BX)(p.G7,{css:p.l0.colWithGap(16),children:[(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(8),p.l0.align.center],children:[(0,r.tZ)(p.XZ,{id:i("reviewed-status"),disabled:c,checked:d,onChange:function(){return e=!d,void s({variables:{replId:t.id,status:e},optimisticResponse:{reviewRepl:(0,tt.Z)((0,ae.Z)({},t),{submission:(0,tt.Z)((0,ae.Z)({},n),{timeLastReviewed:e?(new Date).toJSON():null})})}});var e}}),(0,r.tZ)("label",{htmlFor:i("reviewed-status"),children:d?"Reviewed":"Mark as reviewed"})]}),n.timeSubmitted?(0,r.tZ)(p.zx,{css:{alignSelf:"start"},iconLeft:(0,r.tZ)(Xs.Z,{}),onClick:function(){u({variables:{replId:t.id},optimisticResponse:{unsubmitRepl:(0,tt.Z)((0,ae.Z)({},t),{submission:(0,tt.Z)((0,ae.Z)({},n),{timeLastReviewed:null})})}})},text:"Unsubmit",small:!0}):null]})}function Hs(e){var t=e.repl,n=e.submission,i=e.team,o=e.template,a=o.submissions;return(0,r.BX)(p.G7,{css:[p.l0.colWithGap(16),p.l0.flex.growAndShrink(1)],children:[(0,r.BX)(p.G7,{css:[p.l0.colWithGap(16),p.l0.flex.grow(1)],children:[(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8)],children:[(0,r.tZ)(Ms,{submission:n,submissionList:a}),(0,r.tZ)(Ps,{team:i,template:o,submission:n,submissionList:a})]}),(0,r.tZ)(Ws,{team:i,submission:n,dueDate:o.dueDate}),(0,r.tZ)(Os,{repl:t,submission:n})]}),(0,r.tZ)(p.ZP,{css:[{alignSelf:"start"}],small:!0,href:"/team/".concat(i.username,"/templates/").concat(o.repl.slug),iconLeft:(0,r.tZ)(di.Z,{}),text:"Return to submissions"})]})}var Vs,qs=n(61668),$s=function(e){var t=e.fileName,n=e.docRef,o=e.initialContents,a=(0,Ve.Z)({filePath:t,fontSize:14,indentSize:4,indentIsSpaces:!0}),l=a.view,s=a.ref;return i.useEffect((function(){if(l){var e=$e.tk.updateListener.of((function(e){n.current=e.state.doc}));l.dispatch({effects:et.Py.appendConfig.of(e)}),l.focus()}}),[l,n]),i.useEffect((function(){l&&(l.state.doc.length||l.dispatch({changes:{from:0,insert:o}}))}),[l,o]),(0,r.BX)("div",{className:"jsx-d59ba8968f57599c editable-area",children:[(0,r.tZ)("div",{className:"jsx-d59ba8968f57599c editor-wrapper",children:(0,r.tZ)("div",{className:"jsx-d59ba8968f57599c editor",children:(0,r.tZ)("div",{ref:s,className:"jsx-d59ba8968f57599c"})})}),(0,r.tZ)(u(),{id:"d59ba8968f57599c",children:".editable-area.jsx-d59ba8968f57599c{width:100%;-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;border:1px solid var(--background-higher);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:var(--space-8)0}.editor-wrapper.jsx-d59ba8968f57599c{height:450px;padding-bottom:var(--space-8);-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;position:relative}.editor.jsx-d59ba8968f57599c{overflow:auto;position:absolute;width:100%;height:100%}.loader.jsx-d59ba8968f57599c{height:100%;width:100%;z-index:5}"})]})},Ys=function(e){var t=e.title,n=e.fileName,o=e.initialContents,a=e.isOpen,l=e.onSave,s=e.onCancel,c=i.useRef(null);return(0,r.BX)(Na.Z,{maxWidth:872,isOpen:a,onRequestClose:function(){},preventClose:!0,children:[(0,r.tZ)("div",{className:"jsx-c68269737c22d0ec editor-modal",children:(0,r.BX)(Cl.gC,{align:"stretch",spacing:2,children:[(0,r.BX)(W.Z,{level:3,children:["Edit ",t.toLowerCase()]}),(0,r.tZ)($s,{docRef:c,fileName:n,initialContents:o}),(0,r.tZ)(Cl.Ug,{justify:"end",align:"end",children:(0,r.BX)(Cl.Ug,{justify:"end",align:"end",spacing:1,children:[(0,r.tZ)(vl.Z,{onClick:function(){return s()},children:"Cancel"}),(0,r.tZ)(vl.Z,{color:"primary",onClick:function(){var e;return c.current&&l(null===(e=c.current)||void 0===e?void 0:e.toString())},children:"Save"})]})})]})}),(0,r.tZ)(u(),{id:"c68269737c22d0ec",children:".editor-modal.jsx-c68269737c22d0ec{padding:var(--space-16)}"})]})};!function(e){e.LessonPlan="lessonplan.md",e.Instructions="instructions.md"}(Vs||(Vs={}));var Ks=n(34115),Js=n(2916),Qs=n(88652),ec=n(25108);function tc(e){var t=e.attachments;return(0,r.tZ)("div",{className:"manage-attachments",children:(0,r.BX)(Cl.gC,{spacing:2,children:[(0,r.tZ)(nc,{attachment:t.find((function(e){return e.fileName===Vs.LessonPlan})),fileName:Vs.LessonPlan,label:"Lesson plan",helpText:"Upload teacher facing materials"}),(0,r.tZ)(nc,{attachment:t.find((function(e){return e.fileName===Vs.Instructions})),fileName:Vs.Instructions,label:"Instructions",helpText:"Upload student facing materials"})]})})}function nc(e){var t,n=e.attachment,o=e.fileName,l=e.label,s=e.helpText,c=(0,Js.Z)(),u=(0,We.Z)(),d=u.showConfirm,f=u.showError,p=(0,a.Z)(function(e){var t=(0,ae.Z)({},us,e);return Le.D(Zs,t)}({onCompleted:function(){return d("Updated "+o)},onError:function(e){ec.log(e),f("Error")}}),2),h=p[0],m=p[1],v=i.useCallback(function(){var e=(0,je.Z)((function(e){return(0,Ne.__generator)(this,(function(t){return c&&h({variables:{input:{replId:c.id,fileName:o,contents:e,lastModified:(new Date).toISOString()}}}),[2]}))}));return function(t){return e.apply(this,arguments)}}(),[c,o,h]);return c&&(t=o===Vs.LessonPlan?(0,Ks.G)({language:c.language}):(0,Ks.K)({language:c.language})),(0,r.tZ)(rc,{loading:!c||m.loading,fileName:o,contents:null===n||void 0===n?void 0:n.contents,defaultContents:t,label:l,helpText:s,attachmentLastUploadedAgo:n?(0,Qs.Sy)(new Date(n.timeUpdated)):void 0,onUploadFile:v})}function rc(e){var t=e.loading,n=e.fileName,o=e.contents,l=e.defaultContents,s=e.label,c=e.helpText,d=e.attachmentLastUploadedAgo,f=e.onUploadFile,p=(0,a.Z)(i.useState(!1),2),h=p[0],m=p[1];return(0,r.BX)("div",{className:"jsx-5b5c01bd3abb3f44 attachment",children:[(0,r.tZ)(Ys,{title:s,fileName:n,isOpen:h,initialContents:o||l,onCancel:function(){return m(!1)},onSave:function(e){m(!1),f(e)}}),(0,r.BX)(Cl.Ug,{justify:"space-between",align:"center",wrap:"nowrap",children:[(0,r.BX)(Cl.gC,{spacing:1,children:[(0,r.BX)(Cl.Ug,{align:"center",spacing:1,wrap:"nowrap",children:[(0,r.tZ)(kl.Z,{fontWeight:"medium",children:s}),(0,r.tZ)(qs.Z,{label:c})]}),d?(0,r.BX)(kl.Z,{size:"xsmall",children:["Uploaded ",d]}):null]}),t?(0,r.tZ)(me.Z,{size:16}):(0,r.tZ)(vl.Z,{border:!1,filled:!1,Icon:Yr.Z,onClick:(0,je.Z)((function(){return(0,Ne.__generator)(this,(function(e){return m(!0),[2]}))}))})]}),(0,r.tZ)(u(),{id:"5b5c01bd3abb3f44",children:".attachment.jsx-5b5c01bd3abb3f44{padding:var(--space-8);background-color:var(--background-root);-webkit-border-radius:var(--border-radius-8);-moz-border-radius:var(--border-radius-8);border-radius:var(--border-radius-8);width:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}"})]})}function ic(e){var t=e.attachments;return(0,r.BX)("div",{className:"jsx-ea2ca64296d8f56a project-view-container",children:[(0,r.tZ)("div",{className:"jsx-ea2ca64296d8f56a project-view-contents",children:(0,r.tZ)(tc,{attachments:t})}),(0,r.tZ)("div",{className:"jsx-ea2ca64296d8f56a bottom-dock",children:(0,r.tZ)(kl.Z,{size:"small",children:(0,r.tZ)("a",{href:"/curriculum",target:"_blank",className:"jsx-ea2ca64296d8f56a",children:"Find more curriculum on Curriculum Hub"})})}),(0,r.tZ)(u(),{id:"ea2ca64296d8f56a",children:".project-view-container.jsx-ea2ca64296d8f56a{padding-top:var(--space-32);max-width:400px;-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.bottom-dock.jsx-ea2ca64296d8f56a{display:grid;grid-gap:var(--space-8);margin-top:auto}"})]})}function oc(){var e,t=function(e){var t=(0,ae.Z)({},us,e);return ce.a(bs,t)}({variables:{replId:(0,ge.Z)()}}),n=t.data,i=t.loading,o=t.error;if(i)return(0,r.tZ)(p.G7,{css:[p.l0.center,p.l0.flex.growAndShrink(1)],children:(0,r.tZ)(me.Z,{size:24})});if(o)return(0,r.tZ)(p.G7,{css:p.l0.center,children:(0,r.tZ)(p.xv,{children:"Something went wrong"})});var a="Repl"===(null===n||void 0===n?void 0:n.repl.__typename)?n.repl:null,l="Team"===(null===a||void 0===a||null===(e=a.owner)||void 0===e?void 0:e.__typename)?a.owner:null,s=null===a||void 0===a?void 0:a.template;return a&&l&&s?(0,r.BX)(p.G7,{css:[p.l0.height("100%")],children:[(0,r.tZ)(p.xv,{css:[p.l0.p(8)],variant:"subheadBig",children:a.submission?"Submissions":"Curriculum"}),(0,r.tZ)(p.G7,{css:[p.l0.px(8),p.l0.pb(8),p.l0.flex.growAndShrink(1),p.l0.overflowY("auto")],children:a.submission?(0,r.tZ)(Hs,{repl:a,team:l,template:s,submission:a.submission}):(0,r.tZ)(ic,{attachments:a.attachments})})]}):(0,r.tZ)(p.G7,{css:p.l0.center,children:(0,r.tZ)(p.xv,{children:"Something went wrong"})})}var ac={Content:function(){return(0,r.tZ)(oc,{})},Icon:function(e){var t=e.size;return(0,r.tZ)(O.Z,{size:t})},getTitle:function(){return"Submissions"}},lc=n(92350),sc=n(96711),cc=n(25108),uc=".lesson/".concat("instructions.md"),dc=function(e){var t=e.contents,n=(0,v.Z)().fs,i=(0,sc.l)(n,uc);return(0,r.BX)("div",{className:u().dynamic([["4a2a9dfc904beede",[l.j.tabletMin]]])+" root",children:[(0,r.tZ)("div",{className:u().dynamic([["4a2a9dfc904beede",[l.j.tabletMin]]])+" content",children:(0,r.tZ)(lc.ZP,{components:{img:i},sourcePos:!0,children:t})}),(0,r.tZ)(u(),{id:"4a2a9dfc904beede",dynamic:[l.j.tabletMin],children:".root.__jsx-style-dynamic-selector{height:100%;width:100%;overflow:auto;background:var(--background-default);z-index:2;position:relative}.content.__jsx-style-dynamic-selector{max-width:840px;margin:0 auto;padding:var(--space-32)var(--space-16)}@media only screen and (min-width:".concat(l.j.tabletMin,"px){.content.__jsx-style-dynamic-selector{padding:var(--space-48)var(--space-32)}}")})]})},fc=function(){var e=(0,ge.Z)(),t=(0,v.Z)().fs,n=(0,dr.Z)(),o=(0,a.Z)(i.useState(null),2),l=o[0],s=o[1];return i.useEffect((function(){t.readFile(uc).then((function(e){if(n.current)return e.error?(cc.error(e.error),void qi.$e((function(t){t.setTag("instructions-viewer",!0),qi.Tb("Error loading instructions viewier: ".concat(e.error))}))):void s(e.content.toString())}))}),[t,n,e]),l?(0,r.tZ)(dc,{contents:l}):(0,r.tZ)(h,{preventHighlightBorder:!0})},pc={Content:function(){return(0,r.tZ)(fc,{})},Icon:function(e){var t=e.size;return(0,r.tZ)(O.Z,{size:t})},getTitle:function(){return"Instructions"}};function hc(e){return(0,r.tZ)(jn.Z,(0,tt.Z)((0,ae.Z)({},e),{children:(0,r.tZ)("path",{d:"M22.0005 12.4999V8.50012H20.001V6.49987H18V5.50012H20.001V2.50012H17.001V4.49962H15V6.49987H9V4.49962H7.0005V2.50012H4.0005V5.50012H6V6.49987H4.0005V8.50012H2.001V12.4999H0V19.4996H3V15.4999H4.0005V19.4996H6V21.4999H11.001V18.4999H7.0005V17.5001H17.001V18.4999H13.0005V21.4999H18V19.4996H20.001V15.4999H21V19.4996H24V12.4999H22.0005ZM9 11.5001H6V8.50012H9V11.5001ZM18 11.5001H15V8.50012H18V11.5001Z",fill:"currentColor",stroke:"none"})}))}var mc=n(72466),vc={Content:function(){return(0,r.tZ)(gc,{})},Icon:function(){return(0,r.tZ)(hc,{})},getTitle:function(){return"Kaboom"}};function gc(){var e=(0,v.Z)().session;return(0,r.tZ)(mc.Z,{onFileOpen:function(t){e.openFile(t)}})}function bc(){var e=(0,le.Z)(["\n  fragment AdminPanelRepl on Repl {\n    id\n    title\n    description\n    isProject\n    isPrivate\n    timeCreated\n    timeUpdated\n    slug\n    url\n    language\n    user {\n      id\n    }\n    config {\n      isServer\n      isVnc\n    }\n    isRenamed\n    isProjectFork\n    folderId\n    isOwner\n    origin {\n      id\n    }\n    source {\n      release {\n        id\n        repl {\n          id\n          url\n          templateLabel\n        }\n      }\n    }\n  }\n"]);return bc=function(){return e},e}function Zc(){var e=(0,le.Z)(["\n  query AdminPanelReplView($replId: String!) {\n    repl(id: $replId) {\n      ...AdminPanelRepl\n    }\n  }\n  ","\n"]);return Zc=function(){return e},e}var yc={},xc=(0,se.Ps)(bc()),wc=(0,se.Ps)(Zc(),xc);var kc=n(81255),Cc=n(69346),Sc=n(1144),_c=n(97648),Tc=n(29163),Rc=n(78244),Bc=n(97992),Ec=n(60864),Gc=n(89596),Dc=n(15335),Ic=n(35642),jc=n(59077),Nc=n(55607);function Lc(e){var t=e.event,n=t.input,o=t.output,a=t.error,l=t.start,s=t.end,c=(0,i.useState)(!0),u=c[0],d=c[1],f=(0,i.useCallback)((function(){return d((function(e){return!e}))}),[]),h="bash"===n[0]&&"-c"===n[1]?n.slice(2).join(" "):n.join(" "),m=o.trimEnd(),v=(0,p.ec)(a?"negative":"positive");return(0,r.BX)(p.G7,{css:[v,p.l0.borderRadius(8)],children:[(0,r.BX)(p.G7,{onClick:f,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||f()},tabIndex:0,css:[p.l0.rowWithGap(4),p.l0.justify.spaceBetween,p.l0.py(4),p.l0.px(8),p.l0.font.code,p.l0.cursor.pointer],children:[(0,r.BX)("span",{css:{whiteSpace:"pre-wrap",wordBreak:"break-word"},children:["$ ",h]}),(0,r.BX)("span",{css:[p.l0.color.foregroundDimmer,p.l0.flex.shrink(0)],children:[a?(0,r.tZ)("span",{css:[p.l0.mr(16)],children:a}):null,(0,r.BX)("span",{children:[s-l," ms"]})]})]}),u?null:(0,r.tZ)(p.G7,{css:[p.l0.px(2),p.l0.pb(2),p.l0.borderRadius(0,0,8,8)],children:(0,r.tZ)(p.Tg,{elevated:!0,css:[p.l0.p(8),p.l0.borderRadius(8)],children:(0,r.tZ)(Rc.ZP,{hideGutter:!0,code:m})})})]})}var zc=n(6148),Pc=n(74454),Ac=n(45435);var Xc=i.memo((function(e){var t=e.log,n=e.timeRef,i=e.setTimeRef,o=JSON.stringify(t.cmd,null,2),a=n?t.timestamp-n:t.timestamp;return(0,r.BX)("div",{className:"jsx-f9f1d3880ce11273 "+("log "+(t.highlighted?"highlighted ":"")+("in"===t.dir?"in":"")||0),children:[(0,r.BX)("div",{className:"jsx-f9f1d3880ce11273 direction",children:[(0,r.tZ)("div",{className:"jsx-f9f1d3880ce11273",children:t.dir}),(0,r.tZ)("div",{className:"jsx-f9f1d3880ce11273",children:"in"===t.dir?"\u25b6\ufe0f":"\u2b05\ufe0f"}),(0,r.tZ)("div",{className:"jsx-f9f1d3880ce11273",children:(0,r.tZ)(p.zx,{small:!0,colorway:"positive",onClick:function(){return i(t.timestamp)},text:a.toFixed(0)+"ms"})})]}),(0,r.tZ)("pre",{className:"jsx-f9f1d3880ce11273",children:o}),(0,r.tZ)(u(),{id:"f9f1d3880ce11273",children:".log.jsx-f9f1d3880ce11273{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;color:deepskyblue;border:1px solid;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.in.jsx-f9f1d3880ce11273{color:red}.highlighted.jsx-f9f1d3880ce11273{background:yellow}.direction.jsx-f9f1d3880ce11273{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-moz-box-pack:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;text-align:center;min-width:30px;border-right:1px solid}.direction.jsx-f9f1d3880ce11273>div.jsx-f9f1d3880ce11273:not(:last-child){border-bottom:1px solid;width:100%}"})]},t.index)}),(function(e,t){return e.log.index===t.log.index&&e.log.highlighted===t.log.highlighted&&e.timeRef===t.timeRef})),Uc=function(e){var t=e.logs,n=e.timeRef,i=e.setTimeRef;return(0,r.BX)("div",{className:"jsx-ded4128a88e9355f log-list",children:[t.map((function(e){return(0,r.tZ)(Xc,{log:e,timeRef:n,setTimeRef:i},e.index)})),(0,r.tZ)("div",{className:"jsx-ded4128a88e9355f bottom-anchor"}),(0,r.tZ)(u(),{id:"ded4128a88e9355f",children:".log-list.jsx-ded4128a88e9355f{overflow:auto;height:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.log-list.jsx-ded4128a88e9355f *.jsx-ded4128a88e9355f{overflow-anchor:none}.bottom-anchor.jsx-ded4128a88e9355f{overflow-anchor:auto!important;min-height:1px}"})]})};function Fc(e){return"in"===e||"out"===e||""===e}var Mc,Wc,Oc=function(e){var t=e.filters,n=e.updateFilters;return(0,r.BX)(p.G7,{css:p.l0.colWithGap(4),children:[(0,r.tZ)(p.xv,{variant:"subheadDefault",children:"Regex (regex,flags):"}),(0,r.tZ)(p.II,{id:"regex",onChange:function(e){var t=null;if(e.currentTarget.value){var r=(0,a.Z)(e.currentTarget.value.split(","),2),i=r[0],o=r[1];try{t=new RegExp(i,o)}catch(l){}}n({regexp:t})},placeholder:"\\w+,gi"}),(0,r.tZ)(p.xv,{variant:"subheadDefault",children:"Directions:"}),(0,r.tZ)(p.Ee,{css:p.l0.rowWithGap(16),name:"direction",value:t.direction,onChange:function(e){var t=e.target.value;n({direction:Fc(t)?t:""})},children:[{val:"",text:"Both"},{val:"in",text:"In"},{val:"out",text:"Out"}].map((function(e){return(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(8)],children:[(0,r.tZ)(p.Y8,{id:e.val,value:e.val}),(0,r.tZ)("label",{htmlFor:e.val,children:e.text})]},e.val)}))}),(0,r.tZ)(p.xv,{variant:"subheadDefault",children:"Filter style:"}),(0,r.tZ)(p.Ee,{css:p.l0.rowWithGap(16),name:"filter-style",value:t.highlightOnly?"highlight":"filter",onChange:function(e){return n({highlightOnly:"highlight"===e.target.value})},children:[{val:"highlight",text:"Highlight"},{val:"filter",text:"Filter"}].map((function(e){return(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(8)],children:[(0,r.tZ)(p.Y8,{id:e.val,value:e.val}),(0,r.tZ)("label",{htmlFor:e.val,children:e.text})]},e.val)}))})]})};function Hc(e){var t=e.t,n=e.children;return(0,r.BX)("span",{css:{display:"flex",alignItems:"center",columnGap:"0.5rem"},children:[(0,r.BX)(p.xv,{children:[t,": "]}),(0,r.tZ)("span",{children:n})]})}!function(e){e.Repl="repl",e.Logs="logs",e.LSP="lsp",e.AI="ai",e.AST="ast",e.Git="git",e.History2="history2",e.Metadata="metadata",e.Override="override"}(Mc||(Mc={}));var Vc=(Wc={},(0,o.Z)(Wc,Mc.Repl,(function(){var e,t,n,i,o,a,l,s,c=(0,ge.Z)(),d=function(e){var t=(0,ae.Z)({},yc,e);return ce.a(wc,t)}({variables:{replId:c}}).data,f="Repl"===(null===d||void 0===d?void 0:d.repl.__typename)?JSON.parse(JSON.stringify(d.repl)):void 0;f&&(delete f.__typename,null===(e=f.user)||void 0===e||delete e.__typename,null===(t=f.origin)||void 0===t||delete t.__typename,delete f.config.__typename,null===(n=f.source)||void 0===n||delete n.__typename,null===(i=f.source)||void 0===i||null===(o=i.release)||void 0===o||delete o.__typename,null===(a=f.source)||void 0===a||null===(l=a.release)||void 0===l||null===(s=l.repl)||void 0===s||delete s.__typename);return(0,r.BX)(Cc.Z,{css:[kc.l0.colWithGap(16),kc.l0.p(4)],children:[(0,r.BX)(Cc.Z,{css:kc.l0.rowWithGap(2),children:[(0,r.BX)(Sc.x,{children:["Repl ID: ",(0,r.tZ)(_c.Z,{children:c})]}),(0,r.tZ)(Tc.Z,{alt:"Copy to clipboard",onClick:function(){return(0,ve.Z)(c)},children:(0,r.tZ)(sn.Z,{})})]}),(0,r.tZ)("div",{className:"jsx-3187c500f6b377b0",children:f?(0,r.tZ)(Rc.C,{json:f}):null}),(0,r.tZ)(u(),{id:"3187c500f6b377b0",children:"pre.jsx-3187c500f6b377b0{white-space:pre-wrap;word-wrap:break-word}"})]})})),(0,o.Z)(Wc,Mc.Logs,(function(){var e=(0,a.Z)((0,Pc.Z)(!1),2),t=e[0],n=e[1],o=(0,i.useState)(null),l=o[0],s=o[1],c=(0,Ct.Dv)(Ac.Sj),u=(0,a.Z)((0,Ct.KO)(Ac.a0),2),d=u[0],f=u[1],h=(0,a.Z)((0,Ct.KO)(Ac.ot),2),m=h[0],v=h[1],g=(0,Ct.b9)(Ac.UB);return(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8)],children:[(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8),p.l0.position.sticky,p.l0.top(0),p.l0.px(4),p.l0.pb(8),p.l0.backgroundColor.backgroundDefault],children:[(0,r.tZ)(p.zx,{colorway:d?void 0:"positive",onClick:function(){f((function(e){return!e}))},text:d?"Stop logging goval":"Start logging goval"}),(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(4),p.l0.justify.spaceBetween],children:[(0,r.tZ)(p.zx,{onClick:n,text:t?"Hide filters":"Show filters"}),l?(0,r.tZ)(p.zx,{onClick:function(){return s(null)},text:"Reset Time Ref"}):null,(0,r.tZ)(p.hU,{alt:"Download as JSON",onClick:function(){var e="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(c)),t=document.createElement("a");t.setAttribute("href",e);var n=(new Date).toISOString();t.setAttribute("download","logs-".concat(n.slice(0,n.indexOf(".")).replaceAll("-","").replaceAll(":",""),".json")),t.click()},size:32,children:(0,r.tZ)(zc.Z,{})}),(0,r.tZ)(p.zx,{colorway:"negative",onClick:function(){return g()},text:"Clear logs"})]}),t?(0,r.tZ)(Oc,{filters:m,updateFilters:function(e){v((0,ae.Z)({},m,e))}}):null]}),(0,r.tZ)(p.G7,{css:[p.l0.flex.growAndShrink(1),p.l0.overflow("auto"),p.l0.height("100%")],children:(0,r.tZ)(Uc,{logs:c,timeRef:l,setTimeRef:s})})]})})),(0,o.Z)(Wc,Mc.LSP,Bc.L),(0,o.Z)(Wc,Mc.AI,Ec.ho),(0,o.Z)(Wc,Mc.AST,Po.Z),(0,o.Z)(Wc,Mc.Git,(function(){var e=(0,i.useState)([]),t=e[0],n=e[1],o=(0,A.Z)(Nc.e);return(0,i.useEffect)((function(){o&&n((function(e){return e.length&&e[0].start===o.start?e:[o].concat((0,ie.Z)(e)).slice(0,100)}))}),[o]),(0,r.tZ)(p.G7,{css:[p.l0.colWithGap(4),p.l0.p(8)],children:t.length?t.map((function(e){return(0,r.tZ)(Lc,{event:e},e.start)})):"No events yet..."})})),(0,o.Z)(Wc,Mc.History2,(function(){var e=(0,A.Z)(Mi.BI)();if(!e)return null;var t=e.filePath,n=e.changes,i=e.users,o=e.version,a=e.playing,l=e.count,s=n[o],c=i[s.userId],u=s.timestamp;return(0,r.BX)(p.G7,{css:[p.l0.colWithGap(16),p.l0.p(4)],children:[(0,r.BX)(p.G7,{css:[p.l0.colWithGap(4)],children:[(0,r.tZ)(Hc,{t:"File",children:t}),(0,r.BX)(Hc,{t:"Version",children:[o," / ",l-1]}),(0,r.tZ)(Hc,{t:"Playing",children:a?"true":"false"}),(0,r.tZ)(Hc,{t:"Date",children:(0,r.tZ)(p.EK,{date:u})})]}),c?(0,r.BX)(p.G7,{children:[(0,r.tZ)(Hc,{t:"Author",children:c.username}),(0,r.BX)(p.G7,{css:[p.l0.pl(8),p.l0.colWithGap(4)],children:[(0,r.tZ)(Hc,{t:"ID",children:c.id}),(0,r.tZ)(Hc,{t:"Name",children:c.username}),(0,r.tZ)(Hc,{t:"Image",children:c.image})]})]}):null]})})),(0,o.Z)(Wc,Mc.Metadata,(function(){var e=(0,v.Z)().container;(0,Dc.Z)();var t=e.getConnectionMetadata();if(!t)return(0,r.tZ)("div",{children:"no token yet, wait for connection"});var n=t.token,i=new URL(t.conmanURL).host,o='./conman-repl -t "'.concat(n,'" -u ').concat(i);return(0,r.BX)("div",{className:"jsx-2e9ac5ab034fc317 token-viewer",children:[(0,r.BX)(Cc.Z,{css:kc.l0.rowWithGap(2),children:[(0,r.BX)(Sc.x,{css:kc.l0.flex.shrink(1),children:["conman Repl command: ",(0,r.tZ)(_c.Z,{children:o})]}),(0,r.tZ)(Tc.Z,{alt:"Copy to clipboard",onClick:function(){return(0,ve.Z)(o)},children:(0,r.tZ)(sn.Z,{})})]}),(0,r.BX)("div",{className:"jsx-2e9ac5ab034fc317",children:["metadata:",(0,r.tZ)("pre",{className:"jsx-2e9ac5ab034fc317",children:JSON.stringify(t,null,2)})]}),(0,r.tZ)("br",{className:"jsx-2e9ac5ab034fc317"}),(0,r.tZ)("br",{className:"jsx-2e9ac5ab034fc317"}),(0,r.BX)("div",{className:"jsx-2e9ac5ab034fc317",children:["parsed token:",(0,r.tZ)("pre",{className:"jsx-2e9ac5ab034fc317",children:JSON.stringify((0,Gc.h)(t.token),null,2)})]}),(0,r.tZ)("br",{className:"jsx-2e9ac5ab034fc317"}),(0,r.tZ)("br",{className:"jsx-2e9ac5ab034fc317"}),(0,r.tZ)(u(),{id:"2e9ac5ab034fc317",children:".token-viewer.jsx-2e9ac5ab034fc317{height:100%;overflow:auto;padding:10px}pre.jsx-2e9ac5ab034fc317{white-space:pre-wrap;word-wrap:break-word}"})]})})),(0,o.Z)(Wc,Mc.Override,(function(){var e=(0,a.Z)(i.useState(Ic.Z.get("gurl","string")||""),2),t=e[0],n=e[1];return(0,r.BX)("div",{style:{height:"100%",overflow:"auto"},children:[(0,r.tZ)(Tl.ZP,{label:"Custom gurl",placeholder:"ws://localhost:8080",value:t,onChange:function(e){return n(e.currentTarget.value)}}),(0,r.BX)("pre",{children:["metadata override preview:",JSON.stringify((0,jc.t)(t),null,2)]}),(0,r.tZ)("br",{}),(0,r.BX)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,r.tZ)(vl.Z,{color:"positive",onClick:function(){Ic.Z.set("gurl",t),window.location.reload()},children:"Set gurl and reload"}),(0,r.tZ)(vl.Z,{color:"orange",onClick:function(){Ic.Z.remove("gurl"),window.location.reload()},children:"Unset gurl and reload"})]}),(0,r.tZ)("br",{}),(0,r.tZ)("br",{}),(0,r.tZ)("div",{children:Ic.Z.get("gurl","string")?"currently in localStorage: ".concat(Ic.Z.get("gurl","string")):'No gurl set in local storage, using default gurl for this user, check "Token" tab for details'}),(0,r.tZ)("br",{}),(0,r.tZ)("br",{}),"Gurl order of precedence:",(0,r.BX)("ol",{style:{margin:20},children:[(0,r.tZ)("li",{children:"\u2018gurl\u2019 in localStorage (set above)"}),(0,r.BX)("li",{children:["If in development webapp and a there\u2019s a response from",(0,r.tZ)("code",{children:"https://currenthost:4563"})," or",(0,r.tZ)("code",{children:"http://currenthost:4560"}),", then it will use that."]}),(0,r.BX)("li",{children:["default is ",(0,r.tZ)("code",{children:"wss://eval.<usercluster>.replit.com"})]})]})]})})),Wc),qc=Object.values(Mc);function $c(){var e=(0,i.useState)(Mc.Repl),t=e[0],n=e[1],o=qc.map((function(e){return(0,r.tZ)(p.zx,{colorway:e===t?"primary":void 0,onClick:function(){return n(e)},text:e},e)}));return(0,r.BX)(p.Tg,{background:"default",css:[p.l0.colWithGap(8),p.l0.p(4),p.l0.height("100%")],children:[(0,r.tZ)(p.G7,{css:{flexWrap:"wrap",flexDirection:"row",gap:"4px"},children:o}),(0,r.tZ)(p.G7,{css:[p.l0.flex.growAndShrink(1),p.l0.overflow("auto")],children:Object.entries(Vc).map((function(e){var n=(0,a.Z)(e,2),i=n[0],o=n[1];return(0,r.tZ)(p.G7,{css:i!==t&&p.l0.display.none,children:i===Mc.Override&&t!==Mc.Override?null:(0,r.tZ)(o,{})},i)}))})]})}var Yc=n(86514),Kc={Content:function(){return(0,r.tZ)($c,{})},Icon:function(e){var t=e.size;return(0,r.tZ)(Yc.Z,{size:t})},getTitle:function(){return"Debug"}},Jc=n(39571);function Qc(e){return(0,r.BX)(r.HY,{children:[(0,r.tZ)(W.Z,{truncate:!0,level:5,children:"Call stack"}),(0,r.tZ)(Cl.gC,{align:"stretch",constrainWidth:!0,children:e.frames.map((function(t){return(0,r.tZ)(eu,{frame:t,onClick:e.onFrameClick},t.id)}))})]})}function eu(e){var t,n,i=e.frame,o=e.onClick,a=null===(t=i.source)||void 0===t?void 0:t.name,l=null===(n=i.source)||void 0===n?void 0:n.path,s=a&&(0,Jc.om)(a),c=l&&(0,Jc.om)(l),d=l&&(0,Jc.IT)(l);return(0,r.BX)(r.HY,{children:[(0,r.BX)("div",{onClick:function(){return d&&o(d,i.line)},className:"jsx-c66d0af1ad52f929 frame",children:[(0,r.tZ)("div",{className:"jsx-c66d0af1ad52f929 label name",children:i.name}),(0,r.BX)("div",{className:"jsx-c66d0af1ad52f929 label path",children:[(0,r.tZ)("span",{className:"jsx-c66d0af1ad52f929 line",children:i.line}),s||c||a||l]})]}),(0,r.tZ)(u(),{id:"c66d0af1ad52f929",children:".frame.jsx-c66d0af1ad52f929{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;max-width:100%;height:var(--space-32);cursor:pointer;color:var(--foreground-dimmer);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);font-size:var(--font-size-small);font-family:var(--font-family-code)}.frame.jsx-c66d0af1ad52f929:hover{background-color:var(--background-higher);color:var(--foreground-default)}.label.jsx-c66d0af1ad52f929{font-size:var(--font-size-default);padding-left:var(--space-8);padding-right:var(--space-8);overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap}.name.jsx-c66d0af1ad52f929{-webkit-box-flex:0;-webkit-flex:0 0 auto;-moz-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;background-color:var(--background-higher);padding:1px 2px;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px}.path.jsx-c66d0af1ad52f929{-webkit-box-flex:0;-webkit-flex:0 1 auto;-moz-box-flex:0;-ms-flex:0 1 auto;flex:0 1 auto}.line.jsx-c66d0af1ad52f929{display:inline-block;margin-right:var(--space-8);background-color:var(--background-higher);padding:1px 2px;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px}"})]})}function tu(e){var t=[],n=!0,i=!1,o=void 0;try{for(var l,s=e.breakpoints[Symbol.iterator]();!(n=(l=s.next()).done);n=!0){var c=(0,a.Z)(l.value,2),d=c[0],f=c[1],p=!0,h=!1,m=void 0;try{for(var v,g=f[Symbol.iterator]();!(p=(v=g.next()).done);p=!0){var b=v.value;t.push((0,r.tZ)(nu,{breakpoint:b,file:d,line:b.line,verified:b.verified,onClick:e.onBreakpointClick,onRemove:e.onRemove},"".concat(d,":").concat(b.line,":").concat(b.pid1Id,":").concat(b.dapId)))}}catch(Z){h=!0,m=Z}finally{try{p||null==g.return||g.return()}finally{if(h)throw m}}}}catch(Z){i=!0,o=Z}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return(0,r.BX)(r.HY,{children:[(0,r.tZ)(W.Z,{truncate:!0,level:5,children:"Breakpoints"}),t.length>0?(0,r.tZ)(Cl.gC,{align:"stretch",constrainWidth:!0,children:t}):(0,r.BX)(kl.Z,{size:"xsmall",foreground:2,children:["To start, add a breakpoint ",(0,r.tZ)("span",{className:"jsx-223474dbb82a953c breakpoint"})," by clicking on the line number.",(0,r.tZ)(u(),{id:"223474dbb82a953c",children:".breakpoint.jsx-223474dbb82a953c{display:inline-block;background-color:var(--accent-primary-default);-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;width:8px;height:8px}"})]})]})}function nu(e){var t=e.breakpoint,n=e.file,i=e.line,o=e.verified,a=e.onClick,l=e.onRemove,s=(0,Jc.om)(n);return(0,r.BX)(r.HY,{children:[(0,r.tZ)(Cl.gC,{spacing:1,align:"stretch",children:(0,r.tZ)("div",{className:"jsx-3743f20b19d8f08d breakpoint",children:(0,r.BX)("div",{css:[{"&:hover":{backgroundColor:kc.TV.backgroundHigher,color:kc.TV.foregroundDefault},"&:focus-within":{color:kc.TV.foregroundDefault},"&:hover .frameButton":{background:kc.TV.backgroundHigher,backgroundColor:kc.TV.backgroundHigher,opacity:1},"&:focus-within .frameButton":{opacity:1},"&:hover .frameButton:hover":{backgroundColor:kc.TV.backgroundHighest}}],onClick:function(){a(n,i)},className:"jsx-3743f20b19d8f08d frame",children:[(0,r.tZ)("div",{className:"jsx-3743f20b19d8f08d "+(wl()("circle",{verified:o})||"")}),(0,r.tZ)("div",{className:"jsx-3743f20b19d8f08d line",children:i}),(0,r.tZ)("div",{className:"jsx-3743f20b19d8f08d location",children:(0,r.tZ)("span",{className:"jsx-3743f20b19d8f08d path",children:s||n})}),(0,r.tZ)(p.hU,{className:"frameButton",alt:"Remove breakpoint",css:[{opacity:0}],onClick:function(){l({breakpoint:t})},children:(0,r.tZ)(nl.Z,{})})]})})}),(0,r.tZ)(u(),{id:"3743f20b19d8f08d",children:".breakpoint.jsx-3743f20b19d8f08d{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;max-width:100%;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.frame.jsx-3743f20b19d8f08d{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex:1 1 auto;-moz-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;height:var(--space-32);cursor:pointer;color:var(--foreground-dimmer);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);font-size:var(--font-size-default)}.circle.jsx-3743f20b19d8f08d{-webkit-box-flex:0;-webkit-flex:0 0 auto;-moz-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;background-color:var(--accent-primary-default);-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;width:11px;height:11px;margin-left:var(--space-8);margin-right:var(--space-8);opacity:.5}.verified.jsx-3743f20b19d8f08d{opacity:1}.line.jsx-3743f20b19d8f08d{font-family:var(--font-family-code);background-color:var(--background-higher);padding:1px 2px;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px}.location.jsx-3743f20b19d8f08d{font-family:var(--font-family-code);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex:1 1 auto;-moz-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;min-width:0;font-size:var(--font-size-default);padding-left:var(--space-8);padding-right:var(--space-8)}.path.jsx-3743f20b19d8f08d{overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap}"})]})}var ru=n(45826),iu=n(4648),ou=n(94270),au=n(15882),lu=n(8633),su=n(76075);function cu(e){var t=e.client,n=(0,A.Z)(null===t||void 0===t?void 0:t.state),i=(0,A.Z)(null===t||void 0===t?void 0:t.supportsStepBack);return(0,r.BX)(Cc.Z,{css:kc.l0.rowWithGap(2),children:[i?(0,r.BX)(r.HY,{children:[(0,r.tZ)(Tc.Z,{size:40,disabled:!t||"paused"!==n,onClick:function(){(0,Gt.j)(Gt.U3.DEBUGGER_USED,{action:"lastBreakpoint"}),null===t||void 0===t||t.reverseContinue()},alt:"Last Breakpoint",tooltipContents:"Last Breakpoint",tooltipPlacement:"bottom",children:(0,r.tZ)(iu.Z,{})}),(0,r.tZ)(Tc.Z,{size:40,disabled:!t||"paused"!==n,onClick:function(){(0,Gt.j)(Gt.U3.DEBUGGER_USED,{action:"stepBack"}),null===t||void 0===t||t.back()},alt:"Step Back",tooltipContents:"Step Back",tooltipPlacement:"bottom",children:(0,r.tZ)(di.Z,{})})]}):null,(0,r.tZ)(du,{stop:function(){(0,Gt.j)(Gt.U3.DEBUGGER_USED,{action:"stop"}),null===t||void 0===t||t.stop()},start:function(){(0,Gt.j)(Gt.U3.DEBUGGER_USED,{action:"start"}),null===t||void 0===t||t.start()},state:n}),(0,r.tZ)(Tc.Z,{size:40,disabled:!t||"paused"!==n,onClick:function(){(0,Gt.j)(Gt.U3.DEBUGGER_USED,{action:"nextStep"}),null===t||void 0===t||t.next()},alt:"Next Step",tooltipContents:"Next Step",tooltipPlacement:"bottom",children:(0,r.tZ)(To.Z,{})}),(0,r.tZ)(Tc.Z,{size:40,disabled:!t||"paused"!==n,onClick:function(){(0,Gt.j)(Gt.U3.DEBUGGER_USED,{action:"skipStep"}),null===t||void 0===t||t.skip()},alt:"Skip Step",tooltipContents:"Skip Step",tooltipPlacement:"bottom",children:(0,r.tZ)(au.Z,{rotate:90})}),(0,r.tZ)(Tc.Z,{size:40,disabled:!t||"paused"!==n,onClick:function(){(0,Gt.j)(Gt.U3.DEBUGGER_USED,{action:"nextBreakpoint"}),null===t||void 0===t||t.continue()},alt:"Next Breakpoint",tooltipContents:"Next Breakpoint",tooltipPlacement:"bottom",children:(0,r.tZ)(ou.Z,{})})]})}var uu=(0,He.F4)({"0%":{opacity:.2},"50%":{opacity:1},"100%":{opacity:.2}});function du(e){var t=e.state,n=e.start,i=e.stop;return"terminated"===t?(0,r.tZ)(Tc.Z,{css:kc.l0.color.accentPrimaryDefault,size:40,onClick:n,alt:"Run",tooltipContents:"Run",tooltipPlacement:"bottom",children:(0,r.tZ)(lu.Z,{})}):"stopping"===t||null===t?(0,r.tZ)(Tc.Z,{size:40,disabled:!0,alt:"Loading",tooltipContents:"Loading",tooltipPlacement:"bottom",children:(0,r.tZ)(me.Z,{})}):(0,r.tZ)(Tc.Z,{css:"initializing"===t||"preinitializing"===t?[kc.l0.color.foregroundDimmer,{animationName:uu.toString(),animationDuration:"2s",animationIterationCount:"infinite"}]:kc.l0.color.accentPrimaryDefault,size:40,onClick:i,alt:"Stop",tooltipContents:"Stop",tooltipPlacement:"bottom",children:(0,r.tZ)(su.Z,{})})}var fu=n(93160);function pu(e){var t=e.children;return(0,r.BX)(fu.Z,{background:"default",css:[kc.l0.height("100%"),kc.l0.width("100%"),kc.l0.p(8),kc.l0.overflow("auto"),{borderTopRightRadius:kc.TV.borderRadius4}],children:[(0,r.BX)(Cl.gC,{spacing:2,align:"stretch",justify:"center",constrainWidth:!0,children:[(0,r.tZ)(Cl.Ug,{spacing:1,align:"center",justify:"space-between",constrainWidth:!0,children:(0,r.tZ)(W.Z,{truncate:!0,level:4,children:"Debugger"})}),t]}),(0,r.tZ)(u(),{id:"ffa04cbdbbf3badd",children:"a.jsx-ffa04cbdbbf3badd{font-size:var(--font-size-default);color:var(--accent-primary-default);font-weight:var(--font-weight-medium)}"})]})}function hu(e){var t=(0,v.Z)().debuggest,n=(0,A.Z)(t.mainClient),i=(0,A.Z)(n?n.state:null),o=(0,A.Z)(n?n.stackFrames:null),a=(0,A.Z)(n?n.variables:null),l=(0,A.Z)(n?n.breakpoints:null),s=function(t,n){var r=(0,Jc.om)(t);r&&e.onOpenFile({path:r,line:n})};return(0,r.BX)(pu,{children:[(0,r.tZ)(cu,{client:n}),l?(0,r.tZ)(tu,{breakpoints:l,onBreakpointClick:s,onRemove:function(e){var t=e.breakpoint;n&&t.pid1Id&&n.removeBreakpoint(t.pid1Id)}}):null,a&&n&&"paused"===i?(0,r.tZ)(ru.Z,{client:n,variables:a}):null,o&&"paused"===i?(0,r.tZ)(Qc,{frames:o,onFrameClick:s}):null,n?(0,r.tZ)("div",{className:"jsx-98cfff378e1e6f5f logs-button",children:(0,r.tZ)(vl.Z,{size:"small",onClick:function(){return function(e){if("undefined"===typeof Blob)return;var t=new Blob([e],{type:"text/plain"}),n=document.createElement("a");n.download="debugger-logs.txt",n.href=URL.createObjectURL(t),n.dataset.downloadurl=["text/plain",n.download,n.href].join(":"),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n),setTimeout((function(){URL.revokeObjectURL(n.href)}),1500)}(n.getDebugLogs())},children:"Download Logs"})}):null,(0,r.tZ)(u(),{id:"98cfff378e1e6f5f",children:".instructions.jsx-98cfff378e1e6f5f{height:var(--space-16)}.logs-button.jsx-98cfff378e1e6f5f{position:absolute;bottom:var(--space-8);right:var(--space-8)}"})]})}var mu={Content:function(){return(0,r.tZ)(vu,{})},Icon:function(e){var t=e.size;return(0,r.tZ)(ar.PlayPause,{size:t})},getTitle:function(){return"Debugger"}};function vu(){var e=(0,v.Z)().session;return(0,r.tZ)(hu,{onOpenFile:function(t){e.openFile(t.path),e.updateDeeplink(t)}})}var gu=n(22371),bu={Content:function(){return(0,r.tZ)(gu.Z,{})},Icon:function(e){var t=e.size;return(0,r.tZ)(O.Z,{size:t})},getTitle:function(){return"Tutorial"}},Zu=n(76505),yu=n(36739),xu=n(88055),wu={Content:function(e){var t=e.options.paneId,n=(0,Ct.b9)(xu.U);return(0,r.tZ)(Zu.Z,{closeConfigPane:function(){return n(t)},useReadFile:yu.Z})},Icon:function(){return null},getTitle:function(){return"Configure Repl"}};var ku=n(71263),Cu=n(20934),Su=n(98099),_u=n(95984),Tu=n(30827),Ru=n(9583);function Bu(){var e=(0,le.Z)(["\n  query Threads2Inbox {\n    currentUser {\n      id\n      username\n      image\n    }\n  }\n"]);return Bu=function(){return e},e}var Eu={},Gu=(0,se.Ps)(Bu());var Du=function(){return(0,r.BX)("svg",{width:"100%",height:"100%",viewBox:"0 0 691 691",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.BX)("g",{clipPath:"url(#clip0_954_4340)",children:[(0,r.tZ)("path",{d:"M636.55 403.04H44.91C26.7564 403.04 12.04 417.756 12.04 435.91V643.79C12.04 661.944 26.7564 676.66 44.91 676.66H636.55C654.704 676.66 669.42 661.944 669.42 643.79V435.91C669.42 417.756 654.704 403.04 636.55 403.04Z",fill:"url(#paint0_linear_954_4340)"}),(0,r.tZ)("path",{opacity:"0.71",d:"M526.02 663.9L545.86 602.08C559.46 568.34 534.62 531.54 498.24 531.54H186.98C149.55 531.54 124.7 570.3 140.32 604.31L159.12 663.89H526.02V663.9Z",fill:"url(#paint1_linear_954_4340)"}),(0,r.tZ)("path",{d:"M217.38 314.61C290.392 314.61 349.58 255.422 349.58 182.41C349.58 109.398 290.392 50.21 217.38 50.21C144.368 50.21 85.1802 109.398 85.1802 182.41C85.1802 255.422 144.368 314.61 217.38 314.61Z",fill:"url(#paint2_linear_954_4340)"}),(0,r.tZ)("path",{d:"M120.75 510.55C123.39 538.19 143.97 556.13 170.18 561.75C176.42 563.19 182.79 563.92 189.17 564.39L195.57 564.67C178.54 565.03 160.79 562.34 146.09 553.2C131.43 544.2 121.34 527.81 120.75 510.55Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M225.69 564.67C308.15 564.06 400.65 564.05 483.1 564.67C400.64 565.29 308.14 565.28 225.69 564.67Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M531.57 560.9C546.58 551.84 559.07 537.22 562.44 519.7C563.59 513.9 563.68 507.95 563.1 502.07C564.1 507.91 564.19 513.95 563.19 519.84C560.19 537.61 547.3 552.72 531.57 560.9Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M571.57 554.78C560.27 579.78 532.93 594.05 506.36 595.88C502.53 596.17 498.69 596.24 494.86 596.19C502.52 595.98 510.16 595.18 517.62 593.54C539.86 588.88 561.06 575.34 571.57 554.78Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M448.75 600.43C417.61 601.09 382.98 601.08 351.81 600.43C382.98 599.78 417.6 599.77 448.75 600.43Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M125.93 579.25C113.2 574.83 101.21 564.64 98.6401 550.91C99.2401 552.44 99.6901 554.2 100.47 555.66C105.36 566.51 115.41 574.21 125.94 579.25H125.93Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M122.63 550.92C108.27 541.02 104.78 521.86 109.84 505.93C110.54 503.67 111.36 501.44 112.27 499.26C111.63 501.28 110.78 504.03 110.31 506.06C106.06 522.06 109.3 540.13 122.62 550.92H122.63Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M122.63 485.44C124.51 481.11 128.99 478.25 133.45 477.14C129.54 479.57 125.68 481.91 122.63 485.44Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M576.75 531.49C580.41 516.24 580.52 498.93 571.57 485.44C572.81 487 573.96 488.66 574.93 490.42C581.64 502.91 581.19 518.32 576.74 531.49H576.75Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M579.54 579.25C588.53 567.19 594.92 552.91 596.84 537.95C597.2 535.85 597.23 533.61 597.45 531.49C597.99 548.88 590.98 566.28 579.54 579.25Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M543.81 611.25C558.06 608.69 572.57 604.12 583.9 594.81C585.59 593.57 586.95 591.97 588.5 590.55C577.81 603.74 560.26 609.73 543.81 611.26V611.25Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M85.9304 495.96C90.9804 479.18 105.88 466.78 121.97 460.96L125.73 459.62C127.97 458.93 131.16 458.23 133.45 457.63C130.93 458.48 128.38 459.19 125.88 460.08C108.67 466.24 92.5304 478.4 85.9204 495.95L85.9304 495.96Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M547.63 445.61C564.65 447.41 582.07 454.4 593.27 467.75C594.84 469.66 596.22 471.72 597.46 473.85C586.24 457.4 566.67 449.06 547.63 445.61Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M620.51 510.55C624.76 522.88 625.03 536.26 623.91 549.15C622.85 558.77 620.66 568.49 617.6 577.67C616.52 580.73 615.33 583.76 614.16 586.78C615.59 582.33 617.26 577.4 618.43 572.84C623.74 552.84 625.91 530.74 620.51 510.54V510.55Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M563.68 629.84C552.03 637.13 538.71 642.29 524.93 643.51C509.26 644.08 485.5 643.54 469.79 643.5L456.01 643.25L469.79 643C485.45 642.69 509.25 642.98 524.86 642.6C538.55 641.45 551.78 636.6 563.68 629.83V629.84Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M324.24 653.84C278.39 654.5 227.42 654.49 181.53 653.84C227.42 653.19 278.38 653.18 324.24 653.84Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M240.04 611.25C231.6 611.93 223.06 611.93 214.63 611.25C223.07 610.57 231.61 610.57 240.04 611.25Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M125.93 619.96C101.27 616.41 77.6502 599.76 69.9302 575.49C71.1602 578.36 72.3902 581.22 73.9702 583.91C84.5302 603.14 104.8 615.53 125.93 619.96Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M130.16 565.09C144.25 571.77 159.29 576.91 174.84 578.69C177.05 579.04 179.29 579.04 181.53 579.26C163.55 579.7 145.67 573.97 130.16 565.09Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M200.28 579.25C206.55 578.57 212.83 578.56 219.1 579.25C212.83 579.94 206.55 579.93 200.28 579.25Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M304.75 579.25C349.87 578.59 400.02 578.6 445.17 579.25C400.01 579.9 349.88 579.91 304.75 579.25Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M545.86 480.38C559.46 514.12 534.62 550.92 498.24 550.92H186.98C149.55 550.92 124.7 512.16 140.32 478.15L182.03 345.94L182.32 346C177.45 369.9 195.61 393.77 221.52 393.77H463.7C488.78 393.77 506.81 371.3 503.23 347.91L503.33 347.89L545.86 480.38Z",fill:"#A88C5A"}),(0,r.tZ)("path",{d:"M503.23 347.91C506.81 371.3 488.78 393.77 463.7 393.77H221.52C195.61 393.77 177.45 369.9 182.32 346C182.91 343.04 183.87 340.07 185.21 337.15L218.53 264.59L222.63 255.66L225 250.51C231.51 236.33 245.69 227.23 261.3 227.23H418.49C418.49 227.23 438.63 226.14 449.92 233.29C456.92 237.72 462.6 244.22 465.83 252.25L500.75 338.89C501.95 341.88 502.77 344.9 503.23 347.91ZM336.66 258.5L338.12 253.56C336.37 252.69 333.03 251.74 329.25 251.74C317.76 251.74 310.35 259.59 310.35 270.42C310.35 281.25 317.25 288.38 327.87 288.38C332.59 288.38 336.3 287.22 337.97 286.34L336.88 281.55C335.06 282.35 332.66 283.29 329.03 283.29C322.05 283.29 316.82 278.28 316.82 270.13C316.82 262.79 321.18 256.83 329.25 256.83C332.74 256.83 335.14 257.63 336.66 258.5ZM301.84 258.5L303.44 253.85C301.48 252.69 298.35 251.67 294.79 251.67C287.23 251.67 282.65 256.32 282.65 261.99C282.65 266.21 285.63 269.7 291.96 271.95C296.68 273.7 298.5 275.37 298.5 278.42C298.5 281.47 296.32 283.66 291.67 283.66C288.47 283.66 285.12 282.35 283.23 281.11L281.63 285.98C284.11 287.44 287.67 288.38 291.52 288.38C299.88 288.38 304.68 284.02 304.68 277.84C304.68 272.61 301.55 269.55 295.45 267.23C290.87 265.48 288.76 264.17 288.76 261.27C288.76 258.65 290.87 256.47 294.65 256.47C297.92 256.47 300.46 257.63 301.84 258.5ZM275.97 271.22C276.04 270.57 276.18 269.55 276.18 268.24C276.18 261.77 273.13 251.67 261.65 251.67C251.4 251.67 245.14 260.03 245.14 270.64C245.14 281.25 251.61 288.38 262.45 288.38C268.04 288.38 271.89 287.22 274.15 286.2L273.06 281.62C270.66 282.64 267.9 283.44 263.32 283.44C256.92 283.44 251.4 279.87 251.25 271.22H275.97Z",fill:"#E5CF98"}),(0,r.tZ)("path",{d:"M338.12 253.56L336.66 258.5C335.14 257.63 332.74 256.83 329.25 256.83C321.18 256.83 316.82 262.79 316.82 270.13C316.82 278.28 322.05 283.29 329.03 283.29C332.66 283.29 335.06 282.35 336.88 281.55L337.97 286.34C336.3 287.22 332.59 288.38 327.87 288.38C317.25 288.38 310.35 281.18 310.35 270.42C310.35 259.66 317.76 251.74 329.25 251.74C333.03 251.74 336.37 252.69 338.12 253.56Z",fill:"#1B2332"}),(0,r.tZ)("path",{d:"M303.44 253.85L301.84 258.5C300.46 257.63 297.92 256.47 294.65 256.47C290.87 256.47 288.76 258.65 288.76 261.27C288.76 264.17 290.87 265.48 295.45 267.23C301.55 269.55 304.68 272.61 304.68 277.84C304.68 284.02 299.88 288.38 291.52 288.38C287.67 288.38 284.11 287.44 281.63 285.98L283.23 281.11C285.12 282.35 288.47 283.66 291.67 283.66C296.32 283.66 298.5 281.33 298.5 278.42C298.5 275.51 296.68 273.7 291.96 271.95C285.63 269.7 282.65 266.21 282.65 261.99C282.65 256.32 287.23 251.67 294.79 251.67C298.35 251.67 301.48 252.69 303.44 253.85Z",fill:"#1B2332"}),(0,r.tZ)("path",{d:"M276.18 268.24C276.18 269.55 276.04 270.57 275.97 271.22H251.25C251.4 279.87 256.92 283.44 263.32 283.44C267.9 283.44 270.66 282.64 273.06 281.62L274.15 286.2C271.89 287.22 268.04 288.38 262.45 288.38C251.61 288.38 245.14 281.26 245.14 270.64C245.14 260.02 251.4 251.67 261.65 251.67C273.13 251.67 276.18 261.77 276.18 268.24ZM270 266.65C270.08 262.57 268.33 256.25 261.14 256.25C254.67 256.25 251.83 262.21 251.32 266.65H270Z",fill:"#1B2332"}),(0,r.tZ)("path",{d:"M261.14 256.25C268.33 256.25 270.08 262.57 270 266.65H251.32C251.83 262.21 254.67 256.25 261.14 256.25Z",fill:"#E5CF98"}),(0,r.tZ)("path",{d:"M182.32 346C182.91 343.04 183.87 340.07 185.21 337.15L218.53 264.59L222.63 255.66L225 250.51C231.51 236.33 245.69 227.23 261.3 227.23H418.49C418.49 227.23 438.63 226.14 449.92 233.29C456.92 237.72 462.6 244.22 465.83 252.25L500.75 338.89C501.95 341.88 502.77 344.9 503.23 347.91C506.81 371.3 488.78 393.77 463.7 393.77H221.52C195.61 393.77 177.45 369.9 182.32 346Z",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M503.33 347.89L545.86 480.38C559.46 514.12 534.62 550.92 498.24 550.92H186.98C149.55 550.92 124.7 512.16 140.32 478.15L182.03 345.94",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M532.22 117.06C568.71 135.84 566.03 170.99 566.03 170.99C566.03 170.99 520.16 155.31 503.35 152.12C502.3 151.93 501.36 151.78 500.56 151.68L491.44 151L491.14 151.08C489.53 145.31 484.24 141.08 477.96 141.08C477.57 141.08 477.18 141.09 476.8 141.13C476.71 141.03 476.61 140.93 476.51 140.84L469.81 134.72C469.37 134.31 468.87 134 468.34 133.78H468.23C468.03 131.83 467.45 129.99 466.55 128.33L466.79 128.2C467.59 126.89 471.05 121.89 471.05 121.89C471.05 121.89 474.48 118.6 480.68 115.46C491.1 110.18 509.34 105.28 532.22 117.06Z",fill:"#029831"}),(0,r.tZ)("path",{d:"M516.66 20.2C516.66 20.2 516.77 36.8799 514.97 53.32L500.7 58.3699L513.33 64.8C512.46 69.56 511.35 73.9199 509.95 77.3499C505.71 87.7999 491.29 104.17 480.64 115.38L480.68 115.46C474.48 118.6 471.05 121.89 471.05 121.89C471.05 121.89 467.59 126.89 466.79 128.2L466.55 128.33C464.1 123.82 459.31 120.75 453.81 120.75C452.89 120.75 452 120.83 451.13 121L451.09 120.75C451.09 120.75 449.58 90.2299 458.71 68.5C467.83 46.77 516.66 20.2 516.66 20.2Z",fill:"#029831"}),(0,r.tZ)("path",{d:"M503.35 152.12L503.31 152.35C503.31 152.35 511.56 177.9 499.49 209.9C486.01 203.46 471.92 180.52 471.32 167.44L471.62 166.88C473.51 167.88 475.67 168.44 477.96 168.44C485.51 168.44 491.64 162.32 491.64 154.76C491.64 153.48 491.47 152.25 491.14 151.08L491.44 151L500.56 151.68C501.36 151.78 502.3 151.93 503.35 152.12Z",fill:"#029831"}),(0,r.tZ)("path",{d:"M491.14 151.08C491.47 152.25 491.64 153.48 491.64 154.76C491.64 162.32 485.51 168.44 477.96 168.44C475.67 168.44 473.51 167.88 471.62 166.88C469.84 165.96 468.28 164.64 467.07 163.05L466.89 162.92C467.01 162.78 467.12 162.64 467.22 162.49L477.3 147.3C478.58 145.36 478.36 142.81 476.8 141.13C477.18 141.09 477.57 141.08 477.96 141.08C484.24 141.08 489.53 145.31 491.14 151.08Z",fill:"#685128"}),(0,r.tZ)("path",{d:"M476.8 141.13C478.36 142.81 478.58 145.36 477.3 147.3L467.22 162.49C467.12 162.64 467.01 162.78 466.89 162.92C465.75 164.3 464.01 164.9 462.33 164.65C460.29 164.68 458.04 162.21 458.04 162.21L456.02 161C450.39 158.08 447.1 151.11 447.1 151.11C446.74 150.11 446.71 149.04 446.99 148.03C449.03 149.12 451.35 149.73 453.81 149.73C461.81 149.73 468.3 143.24 468.3 135.24C468.3 134.75 468.28 134.27 468.23 133.79H468.34C468.87 134 469.37 134.31 469.81 134.72L476.51 140.84C476.61 140.93 476.71 141.03 476.8 141.13Z",fill:"#685128"}),(0,r.tZ)("path",{d:"M468.23 133.79C468.28 134.27 468.3 134.75 468.3 135.24C468.3 143.24 461.81 149.73 453.81 149.73C451.35 149.73 449.03 149.12 446.99 148.03C442.43 145.59 439.32 140.78 439.32 135.24C439.32 128.47 443.96 122.78 450.24 121.2C450.53 121.12 450.83 121.05 451.13 121C452 120.83 452.89 120.75 453.81 120.75C459.31 120.75 464.1 123.82 466.55 128.33C467.45 129.99 468.03 131.83 468.23 133.79Z",fill:"#685128"}),(0,r.tZ)("path",{d:"M458.04 162.21C458.04 162.21 460.29 164.68 462.33 164.65C462.23 165.05 462.1 165.44 461.91 165.81L452.32 185.18C451.48 186.87 449.96 187.95 448.27 188.32C445.25 188.58 442.24 186.45 442.24 186.45L439.82 185.55C435.9 184.24 428.23 176.44 428.23 176.44C425.77 174.18 425.62 170.26 428.09 167.85L437.54 158.68L443.68 152.72C444.64 151.79 445.85 151.26 447.1 151.11C447.1 151.11 450.39 158.08 456.02 161L458.04 162.21Z",fill:"#685128"}),(0,r.tZ)("path",{d:"M447.55 120.06C448.48 120.4 449.37 120.76 450.22 121.13L450.24 121.2C443.96 122.78 439.32 128.47 439.32 135.24C439.32 140.78 442.43 145.59 446.99 148.03C446.71 149.04 446.74 150.11 447.1 151.11C445.85 151.26 444.64 151.79 443.68 152.72L437.54 158.68L437.38 158.52C423.69 160.13 367.64 177.97 367.64 177.97C367.64 177.97 364.96 142.82 401.45 124.04C405 122.22 408.44 120.79 411.75 119.7C426.47 114.88 438.74 116.77 447.55 120.06Z",fill:"#029831"}),(0,r.tZ)("path",{d:"M448.27 188.32C448.39 189.38 448.3 190.48 447.9 191.54L439.06 215.11C438.07 217.74 435.69 219.37 433.12 219.57C431.54 219.48 428.86 218.55 428.86 218.55L426.74 217.54C421.31 216.84 410.15 207.9 410.15 207.9C406.97 205.58 406.34 200.98 408.94 197.88L425.23 178.51C426.05 177.53 427.1 176.84 428.23 176.44C428.23 176.44 435.9 184.24 439.82 185.55L442.24 186.45C442.24 186.45 445.25 188.58 448.27 188.32Z",fill:"#685128"}),(0,r.tZ)("path",{d:"M377.41 34.96C431.47 55.96 446.9 117.38 447.55 120.06C438.74 116.77 426.47 114.88 411.75 119.7L411.69 119.51C378.14 87.88 377.41 34.96 377.41 34.96Z",fill:"#029831"}),(0,r.tZ)("path",{d:"M379.56 289.59C376.08 287.46 374.5 282.98 376.25 279L388.72 250.7C389.72 248.43 391.63 246.8 393.87 246.08C389.59 244.14 387.99 238.83 390.57 234.84L405.98 211.06C406.99 209.51 408.48 208.42 410.15 207.9C410.15 207.9 421.31 216.84 426.74 217.54L428.86 218.55C428.86 218.55 431.54 219.48 433.12 219.57C433.24 220.49 433.21 221.45 432.98 222.4L426.42 249.82C425.62 253.19 422.75 255.44 419.56 255.72C419.74 256.52 419.84 257.36 419.77 258.22L417.48 288.9C417.2 292.65 414.53 295.56 411.16 296.43L414.65 318.75V318.94C401.28 318.01 391.44 322.04 391.44 322.04C383.19 317.7 374.4 318.07 366.89 320.06L366.78 319.63L378.59 292.2C378.77 291.26 379.1 290.39 379.56 289.59Z",fill:"#685128"}),(0,r.tZ)("path",{d:"M414.65 318.75L411.16 296.43C414.53 295.56 417.2 292.65 417.48 288.9L419.77 258.22C419.84 257.36 419.74 256.52 419.56 255.72C422.75 255.44 425.62 253.19 426.42 249.82L432.98 222.4C433.21 221.45 433.24 220.49 433.12 219.57C435.69 219.37 438.07 217.74 439.06 215.11L447.9 191.54C448.3 190.48 448.39 189.38 448.27 188.32C449.96 187.95 451.48 186.87 452.32 185.18L461.91 165.81C462.1 165.44 462.23 165.05 462.33 164.65C464.01 164.9 465.75 164.3 466.89 162.92C467.01 162.78 467.12 162.64 467.22 162.49L477.3 147.3C478.58 145.36 478.36 142.81 476.8 141.13C476.71 141.03 476.61 140.93 476.51 140.84L469.81 134.72C469.37 134.31 468.87 134 468.34 133.78",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M446.99 148.03C446.71 149.04 446.74 150.11 447.1 151.11C445.85 151.26 444.64 151.79 443.68 152.72L437.54 158.68L428.09 167.85C425.62 170.26 425.77 174.18 428.23 176.44C427.1 176.84 426.05 177.53 425.23 178.51L408.94 197.88C406.34 200.98 406.97 205.58 410.15 207.9C408.48 208.42 406.99 209.51 405.98 211.06L390.57 234.84C387.99 238.83 389.59 244.14 393.87 246.08C391.63 246.8 389.72 248.43 388.72 250.7L376.25 279C374.5 282.98 376.08 287.46 379.56 289.59C379.1 290.39 378.77 291.26 378.59 292.2L366.78 319.63",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M393.18 245.42C393.18 245.42 402.04 251.33 409.43 252.81",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M410.15 207.9C410.15 207.9 421.31 216.84 426.74 217.54",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M428.23 176.44C428.23 176.44 435.9 184.24 439.82 185.55",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M447.1 151.11C447.1 151.11 450.39 158.08 456.02 161",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M379.56 289.59C379.56 289.59 386.2 296.23 400.68 295.62",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M413.06 254.27C413.06 254.27 416.7 255.46 419.56 255.72",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M428.86 218.55C428.86 218.55 431.54 219.48 433.12 219.57",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M442.24 186.45C442.24 186.45 445.25 188.58 448.27 188.32",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M458.04 162.21C458.04 162.21 460.29 164.68 462.33 164.65",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M404.99 295.66C405.48 295.66 408.99 297.7 411.16 296.43",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M468.23 133.79C468.28 134.27 468.3 134.75 468.3 135.24C468.3 143.24 461.81 149.73 453.81 149.73C451.35 149.73 449.03 149.12 446.99 148.03C442.43 145.59 439.32 140.78 439.32 135.24C439.32 128.47 443.96 122.78 450.24 121.2C450.53 121.12 450.83 121.05 451.13 121C452 120.83 452.89 120.75 453.81 120.75C459.31 120.75 464.1 123.82 466.55 128.33C467.45 129.99 468.03 131.83 468.23 133.79V133.79Z",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M476.54 141.15C476.63 141.14 476.71 141.13 476.8 141.13C477.18 141.09 477.57 141.08 477.96 141.08C484.24 141.08 489.53 145.31 491.14 151.08C491.47 152.25 491.64 153.48 491.64 154.76C491.64 162.32 485.51 168.44 477.96 168.44C475.67 168.44 473.51 167.88 471.62 166.88C469.84 165.96 468.28 164.64 467.07 163.05",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M451.09 120.75C451.09 120.75 449.58 90.2299 458.71 68.5C467.83 46.77 516.66 20.2 516.66 20.2C516.66 20.2 516.77 36.8799 514.97 53.32L500.7 58.3699L513.33 64.8C512.46 69.56 511.35 73.9199 509.95 77.3499C505.71 87.7999 491.29 104.17 480.64 115.38",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M466.79 128.2C467.59 126.89 471.05 121.89 471.05 121.89C471.05 121.89 474.48 118.6 480.68 115.46C491.1 110.18 509.34 105.28 532.22 117.06C568.71 135.84 566.03 170.99 566.03 170.99C566.03 170.99 520.16 155.31 503.35 152.12C502.3 151.93 501.36 151.78 500.56 151.68L491.44 151",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M450.22 121.13C449.37 120.76 448.48 120.4 447.55 120.06C438.74 116.77 426.47 114.88 411.75 119.7C408.44 120.79 405 122.22 401.45 124.04C364.96 142.82 367.64 177.97 367.64 177.97C367.64 177.97 423.69 160.13 437.38 158.52",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M447.57 120.15C447.57 120.15 447.56 120.12 447.55 120.06C446.9 117.38 431.47 55.96 377.41 34.96C377.41 34.96 378.14 87.88 411.69 119.51",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M503.31 152.35C503.31 152.35 511.56 177.9 499.49 209.9C486.01 203.46 471.92 180.52 471.32 167.44",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M347.6 329.26C347.6 329.26 355.89 322.95 366.89 320.06C374.4 318.07 383.19 317.7 391.44 322.04C391.44 322.04 401.28 318.01 414.64 318.94C423.84 319.58 434.7 322.58 445.17 330.86",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M414.16 207.9C414.16 207.9 410.04 203.49 411.16 200.9C411.98 199 420.75 189.21 425.39 184.1C425.97 183.46 427 184.11 426.68 184.91L419.47 203.21C418.8 204.92 418.64 206.79 419.03 208.58L419.6 211.24L414.16 207.88V207.9Z",fill:"#A88C5A"}),(0,r.tZ)("path",{d:"M433.66 175.75C433.61 175.71 433.56 175.67 433.52 175.63C433.06 175.09 430.27 171.7 431.24 169.74C432.01 168.19 439.85 160.38 444.05 156.26C444.59 155.73 445.47 156.33 445.16 157L438.42 171.79C437.73 173.31 437.51 175 437.8 176.65L437.89 177.16C437.99 177.74 437.33 178.15 436.83 177.82L433.67 175.74L433.66 175.75Z",fill:"#A88C5A"}),(0,r.tZ)("path",{d:"M396.92 244.43C396.85 244.38 396.79 244.32 396.74 244.24C396.14 243.42 392.45 238.19 393.57 235.02C394.45 232.5 403.89 219.55 408.94 212.71C409.58 211.84 410.73 212.72 410.38 213.82L402.69 237.82C401.9 240.29 401.72 243 402.17 245.6L402.31 246.41C402.47 247.32 401.66 248.02 401.01 247.53L396.93 244.43H396.92Z",fill:"#A88C5A"}),(0,r.tZ)("path",{d:"M383.51 287.24C383.44 287.18 383.38 287.1 383.33 287.01C382.73 286.03 379.04 279.8 380.16 276.01C381.04 273.01 390.48 257.56 395.53 249.4C396.17 248.36 397.32 249.42 396.97 250.72L389.28 279.34C388.49 282.29 388.31 285.52 388.76 288.61L388.9 289.57C389.06 290.66 388.25 291.5 387.6 290.91L383.52 287.22L383.51 287.24Z",fill:"#A88C5A"}),(0,r.tZ)("path",{d:"M371.16 171.08C371.45 170.56 378.51 139.82 405.63 126.99C393.15 143.74 385.12 165.49 385.12 165.49L371.16 171.08Z",fill:"#51FF53"}),(0,r.tZ)("path",{d:"M410.97 113.84C410.97 113.84 389.61 99.02 379.94 39.72C397.81 75.72 404.21 98.85 422.51 113.84C417.92 113.84 409.31 112.43 410.97 113.84Z",fill:"#51FF53"}),(0,r.tZ)("path",{d:"M456.02 113.84C456.02 113.84 456.71 81.3099 466.79 66.9199C476.87 52.5299 507.71 29.5699 507.71 29.5699C507.71 29.5699 474.47 57.3299 468.3 89.1899C464.53 114.55 463.85 120.75 463.85 120.75L456.03 113.84H456.02Z",fill:"#51FF53"}),(0,r.tZ)("path",{d:"M449.34 124.58C447.22 130.96 444.74 136.08 450.22 145.43C445.46 141.72 438.14 133.78 449.34 124.58Z",fill:"#A88C5A"}),(0,r.tZ)("path",{d:"M471.31 126.55C471.31 126.55 485.49 111.02 506.06 113.84C492.04 118.78 474.04 133.78 474.04 133.78L471.31 126.55Z",fill:"#51FF53"})]}),(0,r.BX)("defs",{children:[(0,r.BX)("linearGradient",{id:"paint0_linear_954_4340",x1:"340.73",y1:"676.66",x2:"340.73",y2:"403.04",gradientUnits:"userSpaceOnUse",children:[(0,r.tZ)("stop",{offset:"0.3",stopColor:"#1B2332",stopOpacity:"0"}),(0,r.tZ)("stop",{offset:"0.37",stopColor:"#1C2437",stopOpacity:"0.03"}),(0,r.tZ)("stop",{offset:"0.45",stopColor:"#202845",stopOpacity:"0.1"}),(0,r.tZ)("stop",{offset:"0.56",stopColor:"#262F5E",stopOpacity:"0.22"}),(0,r.tZ)("stop",{offset:"0.67",stopColor:"#2E397F",stopOpacity:"0.38"}),(0,r.tZ)("stop",{offset:"0.8",stopColor:"#3946AB",stopOpacity:"0.59"}),(0,r.tZ)("stop",{offset:"0.93",stopColor:"#4655DE",stopOpacity:"0.84"}),(0,r.tZ)("stop",{offset:"1",stopColor:"#4F5FFF"})]}),(0,r.BX)("linearGradient",{id:"paint1_linear_954_4340",x1:"342.61",y1:"663.9",x2:"342.61",y2:"531.55",gradientUnits:"userSpaceOnUse",children:[(0,r.tZ)("stop",{stopColor:"#1B2332",stopOpacity:"0"}),(0,r.tZ)("stop",{offset:"0.15",stopColor:"#2F333A",stopOpacity:"0.12"}),(0,r.tZ)("stop",{offset:"0.47",stopColor:"#635D4F",stopOpacity:"0.43"}),(0,r.tZ)("stop",{offset:"0.93",stopColor:"#B6A070",stopOpacity:"0.92"}),(0,r.tZ)("stop",{offset:"1",stopColor:"#C4AB76"})]}),(0,r.BX)("linearGradient",{id:"paint2_linear_954_4340",x1:"217.38",y1:"314.6",x2:"217.38",y2:"50.21",gradientUnits:"userSpaceOnUse",children:[(0,r.tZ)("stop",{stopColor:"#1B2332",stopOpacity:"0"}),(0,r.tZ)("stop",{offset:"0.19",stopColor:"#4B4A35",stopOpacity:"0.22"}),(0,r.tZ)("stop",{offset:"0.48",stopColor:"#92843B",stopOpacity:"0.55"}),(0,r.tZ)("stop",{offset:"0.73",stopColor:"#C7AE3F",stopOpacity:"0.79"}),(0,r.tZ)("stop",{offset:"0.91",stopColor:"#E7C942",stopOpacity:"0.94"}),(0,r.tZ)("stop",{offset:"1",stopColor:"#F4D343"})]}),(0,r.tZ)("clipPath",{id:"clip0_954_4340",children:(0,r.tZ)("rect",{width:"690.9",height:"690.9",fill:"white"})})]})]})},Iu=n(38137),ju=n(1138),Nu=n(14016),Lu=n(18622),zu=n(33279),Pu={title:"Threads",filters:{inbox:{key:"toggle-inbox",label:"Inbox",icon:(0,r.tZ)(ju.Z,{})},unread:{key:"toggle-unread",label:"Unread",icon:(0,r.tZ)(Iu.Z,{})},participating:{key:"toggle-participating",label:"Participating",icon:(0,r.tZ)(Lu.Z,{})},resolved:{key:"toggle-resolved",label:"Resolved",icon:(0,r.tZ)(qe.Z,{})}},sorts:{chronological:{key:"toggle-chronological",label:"Chronological",icon:(0,r.tZ)(ks.Z,{})},codeOrder:{key:"toggle-codeOrder",label:"Code order",icon:(0,r.tZ)(Nu.Z,{})}},search:{placeholder:"Search threads\u2026"},markAsRead:"Mark as read",empty:{image:{alt:"an illustration of an escape key that resembles a sunny beach, with an umbrella and palm tree"},noThreadsCreated:{text:{primary:"You haven\u2019t started any threads yet.",secondary:function(e){return(0,r.BX)(r.HY,{children:["Select code and press"," ",(0,r.tZ)(zu.Z,{shortcut:e,small:!0})," to get started."]})}}},noThreadsFound:{text:{primary:"No threads found.",secondary:"Try adjusting your search or filters."}}}},Au=["TextMessageContentType","PreviewMessageContentType"];var Xu=n(83223),Uu=n(55877),Fu=n.n(Uu),Mu=n(90725),Wu=n(28898),Ou=function(e){var t={},n=!0,r=!1,i=void 0;try{for(var o,a=e.messages[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;l.user&&(t[l.user.id]=l.user)}}catch(s){r=!0,i=s}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return Object.values(t)};function Hu(){var e=(0,le.Z)(["\n  query AnnotationThreadInput {\n    currentUser {\n      id\n    }\n  }\n"]);return Hu=function(){return e},e}var Vu={},qu=(0,se.Ps)(Hu());var $u=n(18332),Yu=n(25245),Ku=i.forwardRef((function(e,t){var n,o,l=e.annote,s=e.placeholder,c=e.onChangeMessage,d=e.onFinalizeMessage,f=function(){""!==v.trim()&&(d({messageId:k||Ot()(),message:v.trim()}),C(null),g(""),setTimeout(R))},h=null===(n=function(e){var t=(0,ae.Z)({},Vu,e);return ce.a(qu,t)}().data)||void 0===n||null===(o=n.currentUser)||void 0===o?void 0:o.id,m=(0,a.Z)(i.useState(""),2),v=m[0],g=m[1],b=(0,a.Z)(i.useState(!1),2),Z=b[0],y=b[1],x=i.useRef(null),w=(0,a.Z)(i.useState(null),2),k=w[0],C=w[1],S=(0,Tu.Z)(),_=(0,Rl.Z)(),T=_.ref,R=_.update,B=(0,a.Z)((0,$u.Z)({"@":function(){var e=(0,je.Z)((function(e){var t,n;return(0,Ne.__generator)(this,(function(i){return t=S.filter((function(e){return e.id!==h})),e&&(n=e.toLowerCase(),t=t.filter((function(e){return e.username.toLowerCase().startsWith(n)}))),[2,t.slice(0,5).map((function(e){return{icon:(0,r.tZ)(Wu.Z,{url:e.image,style:{height:"24px",width:"24px",minWidth:"24px",minHeight:"24px"}}),value:e.username}}))]}))}));return function(t){return e.apply(this,arguments)}}()}),2),E=B[0].suggestions,G=B[1],D=(0,Ss.Kb)({items:(null===E||void 0===E?void 0:E.results)||[],defaultHighlightedIndex:0,isOpen:Boolean(null===E||void 0===E?void 0:E.results.length),onSelectedItemChange:function(e){var t=e.selectedItem;if(E&&t){var n=E.applySuggestion({targetValue:v,suggestionValue:t.value}),r=n.fullValue,i=n.cursorIndex;g(r),setTimeout((function(){x.current&&(x.current.setSelectionRange(i,i),x.current.focus(),R())}))}}}),I=D.isOpen,j=D.getInputProps,N=D.getMenuProps,L=D.getItemProps,z=D.highlightedIndex,P=D.getComboboxProps;i.useEffect((function(){var e="threads/drafts/".concat(l.id),t=Ic.Z.get(e,"string");t&&g(t);var n=x.current;return function(){if(n){var t=n.value;0!==t.length?Ic.Z.set(e,t):Ic.Z.remove(e)}}}),[]),i.useEffect((function(){setTimeout((function(){x.current&&x.current.focus()}))}),[x]);var A=Ou(l).filter((function(e){return e.id!==h})),X="Add a comment";return 1===A.length?X="Reply to @".concat(A[0].username):A.length>1&&(X="Reply"),l.isResolved&&(X="Reply to unresolve this thread"),s&&(X=s),(0,r.BX)("div",{className:"jsx-83fb19ea8f375c79",children:[(0,r.BX)("div",(0,tt.Z)((0,ae.Z)({},P()),{className:"jsx-83fb19ea8f375c79 input-group",children:[(0,r.tZ)("textarea",(0,tt.Z)((0,ae.Z)({},j({autoFocus:!0,placeholder:X,value:v,onCompositionStart:function(){return y(!0)},onCompositionEnd:function(){return y(!1)},onChange:function(e){var t=e.target.value,n=k||Ot()();k||C(n),g(t),c({messageId:n,message:t})},onKeyDown:function(e){e.stopPropagation(),I||(e.nativeEvent.preventDownshiftDefault=!0,"Enter"!==e.key||e.shiftKey||Z||(e.preventDefault(),f()))},rows:1,ref:function(e){x.current=e,t&&"object"===typeof t&&(t.current=e),G(e),T(e)}})),{className:"jsx-83fb19ea8f375c79 "+(wl()("inputbox",{hasContent:v.length>0})||"")})),(0,r.tZ)(p.hU,{alt:"Send message",onClick:f,disabled:0===v.length,children:(0,r.tZ)(Yu.Z,{})})]})),(0,r.tZ)("div",(0,tt.Z)((0,ae.Z)({},N({})),{className:"jsx-83fb19ea8f375c79",children:I?(0,r.tZ)("div",{className:"jsx-83fb19ea8f375c79 mention-suggestions-container",children:E.results.map((function(e,t){return(0,i.createElement)("div",(0,tt.Z)((0,ae.Z)({},L({item:e,index:t})),{key:e.value,className:"jsx-83fb19ea8f375c79 "+(wl()("mention-suggestion",{selected:z===t})||""),children:[e.icon,(0,r.tZ)("div",{className:"jsx-83fb19ea8f375c79",children:e.value})]}))}))}):null})),(0,r.tZ)(u(),{id:"83fb19ea8f375c79",children:'.input-group.jsx-83fb19ea8f375c79{display:grid;grid-template-columns:1fr -webkit-min-content;grid-template-columns:1fr min-content;grid-gap:10px;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-webkit-justify-content:start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:start}.inputbox.jsx-83fb19ea8f375c79{background:var(--background-higher);color:var(--foreground-default);border:none;-webkit-border-radius:var(--border-radius-8);-moz-border-radius:var(--border-radius-8);border-radius:var(--border-radius-8);padding:var(--space-8);outline:none;resize:none;font-family:"IBM Plex Sans",sans-serif;font-size:var(--font-size-default);line-height:16px;overflow-y:auto;max-height:-webkit-calc(var(--font-size-default)*18);max-height:-moz-calc(var(--font-size-default)*18);max-height:calc(var(--font-size-default)*18)}.inputbox.jsx-83fb19ea8f375c79::-webkit-input-placeholder{white-space:pre}.inputbox.jsx-83fb19ea8f375c79:-moz-placeholder{white-space:pre}.inputbox.jsx-83fb19ea8f375c79::-moz-placeholder{white-space:pre}.inputbox.jsx-83fb19ea8f375c79:-ms-input-placeholder{white-space:pre}.inputbox.jsx-83fb19ea8f375c79::-ms-input-placeholder{white-space:pre}.inputbox.jsx-83fb19ea8f375c79::placeholder{white-space:pre}.inputbox.hasContent.jsx-83fb19ea8f375c79{-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px}.mention-suggestions-container.jsx-83fb19ea8f375c79{padding-top:1em;display:grid;grid-row-gap:var(--space-4);overflow:hidden}.mention-suggestion.jsx-83fb19ea8f375c79{display:grid;grid-template-columns:-webkit-min-content -webkit-max-content;grid-template-columns:min-content max-content;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;grid-column-gap:var(--space-8);padding:var(--space-8)0;cursor:pointer;color:var(--foreground-default)}.mention-suggestion.selected.jsx-83fb19ea8f375c79{background-color:var(--background-root)}.mention-suggestion.selected.jsx-83fb19ea8f375c79>*.jsx-83fb19ea8f375c79{-webkit-transform:scale(1.1);-moz-transform:scale(1.1);-ms-transform:scale(1.1);-o-transform:scale(1.1);transform:scale(1.1)}'})]})}));Ku.displayName="ThreadInputForwarded";var Ju=Ku,Qu=n(93604),ed=n(35977);function td(e){var t=e.message,n=e.messageStyle,o=i.useMemo((function(){return"TextMessageContentType"===t.content.__typename?(0,Ru.kW)(t.content.text,{}):"PreviewMessageContentType"===t.content.__typename&&"string"===typeof t.content.preview?(0,Ru.kW)(t.content.preview,{}):null}),[t.content]),a="PreviewMessageContentType"===t.content.__typename&&"string"!==typeof t.content.preview;return t.user&&(o||a)?(0,r.BX)("div",{className:"jsx-e1dab5bcce309da6 "+(n||""),children:[(0,r.BX)("div",{className:"jsx-e1dab5bcce309da6 message",children:[o?(0,r.tZ)(Ru.YI,{message:o,codeStyles:{color:"var(--accent-orange-stronger)",background:"var(--background-highest)"}}):null,a?(0,r.BX)("span",{className:"jsx-e1dab5bcce309da6 typing-indicator",children:[(0,r.tZ)("span",{className:"jsx-e1dab5bcce309da6 dot"}),(0,r.tZ)("span",{className:"jsx-e1dab5bcce309da6 dot"}),(0,r.tZ)("span",{className:"jsx-e1dab5bcce309da6 dot"})]}):null]}),(0,r.tZ)(u(),{id:"e1dab5bcce309da6",children:".message.jsx-e1dab5bcce309da6{background:var(--background-higher);padding:var(--space-4)var(--space-8);-webkit-border-radius:var(--border-radius-8);-moz-border-radius:var(--border-radius-8);border-radius:var(--border-radius-8);font-size:var(--font-size-default);overflow-wrap:break-word;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;max-width:100%;white-space:pre-wrap}.userhighlight.jsx-e1dab5bcce309da6 .message.jsx-e1dab5bcce309da6{background:transparent}.typing-indicator.jsx-e1dab5bcce309da6{min-height:1em;display:grid;grid-auto-flow:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;grid-gap:var(--space-8)}.dot.jsx-e1dab5bcce309da6{width:6px;height:6px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;display:inline-block;background-color:var(--foreground-dimmest);-webkit-animation:pulse.6s infinite;-moz-animation:pulse.6s infinite;-o-animation:pulse.6s infinite;animation:pulse.6s infinite}.dot.jsx-e1dab5bcce309da6:nth-child(1){-webkit-animation-delay:0s;-moz-animation-delay:0s;-o-animation-delay:0s;animation-delay:0s}.dot.jsx-e1dab5bcce309da6:nth-child(2){-webkit-animation-delay:.2s;-moz-animation-delay:.2s;-o-animation-delay:.2s;animation-delay:.2s}.dot.jsx-e1dab5bcce309da6:nth-child(3){-webkit-animation-delay:.4s;-moz-animation-delay:.4s;-o-animation-delay:.4s;animation-delay:.4s}@-webkit-keyframes pulse{0%{background-color:var(--foreground-dimmest)}50%{background-color:var(--foreground-dimmest)}100%{background-color:var(--foreground-dimmest)}}@-moz-keyframes pulse{0%{background-color:var(--foreground-dimmest)}50%{background-color:var(--foreground-dimmest)}100%{background-color:var(--foreground-dimmest)}}@-o-keyframes pulse{0%{background-color:var(--foreground-dimmest)}50%{background-color:var(--foreground-dimmest)}100%{background-color:var(--foreground-dimmest)}}@keyframes pulse{0%{background-color:var(--foreground-dimmest)}50%{background-color:var(--foreground-dimmest)}100%{background-color:var(--foreground-dimmest)}}"})]}):null}function nd(e){var t=e.message,n=i.useMemo((function(){var e=t.timeCreated;return e?(0,As.Z)(new Date(e),"do MMM, hh:mm a"):""}),[t]),o=t.user;return(0,r.tZ)("div",{className:"resolved-message",children:(0,r.BX)(Cl.Ug,{align:"center",spacing:1,children:[o?(0,r.tZ)(Wu.Z,{url:o.image,size:"m"}):null,(0,r.tZ)(qe.Z,{color:"var(--foreground-default)",size:24}),(0,r.BX)(kl.Z,{size:"xsmall",children:["Resolved ",n]})]})})}function rd(e){var t=e.message,n=i.useMemo((function(){var e=t.timeCreated;return e?(0,As.Z)(new Date(e),"do MMM, hh:mm a"):""}),[t]),o=t.user;return(0,r.tZ)("div",{className:"resolved-message",children:(0,r.BX)(Cl.Ug,{align:"center",spacing:1,children:[o?(0,r.tZ)(Wu.Z,{url:o.image,size:"m"}):null,(0,r.tZ)(qe.Z,{size:24,color:"var(--foreground-dimmest)"}),(0,r.BX)(kl.Z,{size:"xsmall",children:["Unresolved ",n]})]})})}var id=function(e){var t=new Date(e),n=new Date;return(0,ed.Z)(n,t)<60?"now":(0,Qu.F)(t,!0)};function od(e){var t=e.messageGroup,n=t.messages,i=t.user,o=t.timeCreated;return i?(0,r.BX)("div",{className:"jsx-3469fc8bae278840 message-group",children:[(0,r.BX)("div",{className:"jsx-3469fc8bae278840 message-info",children:[(0,r.tZ)("div",{className:"jsx-3469fc8bae278840 avatar",children:(0,r.tZ)(Wu.Z,{url:i.image,size:"xs",style:{minHeight:"15px",minWidth:"15px",height:"15px",width:"15px"}})}),(0,r.tZ)("div",{className:"jsx-3469fc8bae278840 username",children:i.username}),(0,r.tZ)("div",{className:"jsx-3469fc8bae278840 time",children:id(o)})]}),(0,r.tZ)("div",{className:"jsx-3469fc8bae278840 messages",children:n.map((function(e){return(0,r.tZ)(td,{message:e},e.id)}))}),(0,r.tZ)(u(),{id:"3469fc8bae278840",children:".message-group.jsx-3469fc8bae278840{background-color:var(--background-default);color:var(--foreground-default);display:grid;position:relative;grid-template-rows:auto auto;grid-row-gap:var(--space-8);grid-template-columns:minmax(0,1fr)}.message-info.jsx-3469fc8bae278840{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;font-size:var(--font-size-small)}.messages.jsx-3469fc8bae278840{display:grid;grid-row-gap:var(--space-4);grid-template-columns:minmax(0,1fr)}.avatar.jsx-3469fc8bae278840{margin-right:5px}.username.jsx-3469fc8bae278840{color:var(--foreground-dimmer);font-weight:var(--font-weight-medium);margin-right:3px}.time.jsx-3469fc8bae278840{color:var(--foreground-dimmest)}"})]}):null}function ad(e){var t=e.messageGroup;if("TextMessageContentType"===t.messageType||"PreviewMessageContentType"===t.messageType)return(0,r.tZ)(od,{messageGroup:t});if("StatusMessageContentType"===t.messageType){var n=t.messages[0];if("StatusMessageContentType"===n.content.__typename&&"resolved"===n.content.status)return(0,r.tZ)(nd,{message:n});if("StatusMessageContentType"===n.content.__typename&&"unresolved"===n.content.status)return(0,r.tZ)(rd,{message:n})}return null}function ld(e){var t=e.generalThreadsOpen,n=e.setGeneralThreadsOpen,o=e.generalThread,a=e.handleChangeMessage,l=void 0===a?function(){}:a,s=e.handleFinalizeMessage,c=void 0===s?function(){}:s,d=e.createAnnotationAnchorPlaceholder,f=void 0===d?function(){}:d,p=(0,ge.Z)(),h=i.useMemo((function(){return o?function(e){var t=[],n=null,r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s,c,u,d,f=a.value;!n||(null===f||void 0===f||null===(s=f.user)||void 0===s?void 0:s.id)!==(null===n||void 0===n||null===(c=n.user)||void 0===c?void 0:c.id)||(null===f||void 0===f||null===(u=f.anchor)||void 0===u?void 0:u.id)!==(null===n||void 0===n?void 0:n.anchorId)||!Au.includes(n.messageType)||!Au.includes(f.content.__typename)||new Date(f.timeCreated).getTime()-new Date(n.timeCreated).getTime()>6e5?(n&&t.push(n),n={user:f.user,timeCreated:f.timeCreated,anchorId:null===f||void 0===f||null===(d=f.anchor)||void 0===d?void 0:d.id,messages:[f],messageType:f.content.__typename}):n.messages.push(f)}}catch(p){i=!0,o=p}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return n&&t.push(n),t}((0,ie.Z)(o.messages).sort((function(e,t){return new Date(e.timeCreated).getTime()-new Date(t.timeCreated).getTime()}))):[]}),[o]);i.useEffect((function(){o||f({annotationAnchor:{id:Fu()(),replId:p,isGeneral:!0,indexStart:null,indexEnd:null,isResolved:!1,otVersion:null,path:null}})}),[o,p,f]),i.useEffect((function(){o||f({annotationAnchor:{id:Fu()(),replId:p,isGeneral:!0,indexStart:null,indexEnd:null,isResolved:!1,otVersion:null,path:null}})}),[o,p,f]);var m=i.useRef(null);(0,Xu.Z)(t&&o||null);return i.useEffect((function(){m.current&&(m.current.scrollTop=m.current.scrollHeight)}),[m,o]),o?(0,r.BX)("div",{onClick:function(){return n(!0)},className:"jsx-571d11d33063a57f "+"jsx-".concat(Mu.Q.__hash)+" "+(wl()("general-thread")||""),children:[(0,r.tZ)("div",{className:"jsx-571d11d33063a57f "+"jsx-".concat(Mu.Q.__hash)+" message-group-container-container",children:(0,r.tZ)("div",{ref:m,className:"jsx-571d11d33063a57f "+"jsx-".concat(Mu.Q.__hash)+" message-group-container",children:h.map((function(e){return(0,r.tZ)(ad,{messageGroup:e},e.messages[0].id)}))})}),(0,r.tZ)("div",{className:"jsx-571d11d33063a57f "+"jsx-".concat(Mu.Q.__hash)+" thread-input-container",children:(0,r.tZ)(Ju,{placeholder:"Send message",annote:o,onChangeMessage:function(e){l({anchor:o,message:e.message,messageId:e.messageId}),n(!0)},onFinalizeMessage:function(e){c({anchor:o,message:e.message,messageId:e.messageId}),n(!0),(0,Gt.j)(Gt.U3.MESSAGE_SENT,{replId:p,source:"chat",newThread:0===o.messages.length})}})}),(0,r.tZ)(u(),{id:Mu.Q.__hash,children:Mu.Q}),(0,r.tZ)(u(),{id:"571d11d33063a57f",children:'.general-thread.jsx-571d11d33063a57f{padding-top:0,border-radius:var(--border-radius-8)var(--border-radius-8)0 0;background:var(--background-default);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex:1 1 0;-moz-box-flex:1;-ms-flex:1 1 0px;flex:1 1 0;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;overflow:hidden;grid-template-rows:-webkit-min-content 1fr -webkit-min-content;grid-template-rows:min-content 1fr min-content;grid-gap:var(--space-8);height:"100%"}.message-group-container-container.jsx-571d11d33063a57f{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;overflow:hidden;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;height:0;-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1}.message-group-container.jsx-571d11d33063a57f{padding:var(--space-12);display:grid;grid-row-gap:var(--space-16);overflow-y:auto}.thread-input-container.jsx-571d11d33063a57f{width:100%;border-top:1px solid var(--outline-dimmer);padding:var(--space-8)var(--space-12)}'})]}):null}var sd=n(98284),cd=n(24949),ud=n(65632),dd=n(64614),fd=n(24957),pd=n(2230),hd=function(e){var t=(0,pd.Z)(e,null,null).updateThread;return{handleToggleResolved:function(e){return t({changes:{isResolved:e}})}}};var md,vd,gd=function(e){var t=e.thread,n=e.onClick,o=t.messages.filter((function(e){return!e.seen})).length,a=function(e){var t=(0,fd.Vy)(e.path?e:null);return null===t||void 0===t?void 0:t.getSnippet()}(t),l=(0,pd.Z)(t.id,null,null).thread,s=(0,Ct.Dv)(Cu.Q),c=hd(t.id).handleToggleResolved,u="Jump to code",d="Resolve this thread",f="Re-open",h=function(e,t){var n=function(e){return 1===e?"reply":"replies"};return e<=1?"View ".concat(1===t?"unread":""," thread"):t?"View ".concat(t," unread ").concat(n(t)):"View ".concat(e-1," ").concat(n(e-1))},m=function(e,t){return"Opened ".concat(e," by ").concat(t)},v=t.messages[0],g=i.useMemo((function(){if(!(null===v||void 0===v?void 0:v.timeCreated))return"some time ago";var e=(0,dd.Z)(v.timeCreated);return"now"===e?"just now":e+" ago"}),[v]);return t.user?(0,r.BX)(p.Tg,{css:[p.gU.filled,p.l0.overflow("hidden"),s===t.id&&{borderColor:p.TV.accentPrimaryDefault}],onClick:function(){n(t)},children:[(0,r.BX)(p.Tg,{elevated:!0,css:[p.l0.flex.row,p.l0.align.center,p.l0.justify.spaceBetween,p.l0.flex.grow(1),p.l0.px(8),p.l0.py(8)],children:[(0,r.tZ)(p.G7,{css:[p.l0.flex.row,p.l0.align.center,p.l0.rowWithGap(4)],children:(0,r.tZ)(p.xv,{color:"dimmer",variant:"small",children:m(g,t.user.username)})}),(0,r.BX)(p.G7,{css:[p.l0.flex.row,p.l0.align.center,p.l0.rowWithGap(4)],children:[a&&t.path?(0,r.tZ)(p.hU,{alt:u,onClick:function(){return n(t)},children:(0,r.tZ)(tl.Z,{})}):null,t.isResolved?(0,r.tZ)(p.zx,{text:f,small:!0,colorway:"primary",onClick:function(){c(!1)}}):(0,r.tZ)(p.hU,{alt:d,onClick:function(){c(!0)},children:(0,r.tZ)(qe.Z,{})})]})]}),a&&t.path?(0,r.tZ)(sd.Fy,{elevation:"root",path:t.path,snippet:a,fontSize:12,maxHeight:"42px",minHeight:"42px",allowScroll:!1}):null,v?(0,r.tZ)(p.G7,{css:[p.l0.p(8),p.l0.py(12)],children:(0,r.tZ)(cd.Z,{thread:l,message:v},v.id)}):null,t.messages.length>1&&(0,r.BX)(p.G7,{css:[p.l0.pb(12),p.l0.px(8),p.l0.flex.row,p.l0.align.center,p.l0.rowWithGap(4),p.l0.color.foregroundDimmer],children:[(0,r.tZ)(p.G7,{css:[p.l0.position.relative],children:(0,r.tZ)(ud.Z,{unreadDot:o>0})}),(0,r.tZ)(p.xv,{variant:"small",children:h(t.messages.length,o)})]})]}):null},bd=function(e){var t=e.path,n=e.threads,i=e.onThreadClick,o=n.some((function(e){return e.messages.some((function(e){return!e.seen}))}));return(0,r.tZ)(p.G7,{css:[p.l0.pb(8)],children:(0,r.tZ)(p.Qd,{css:[p.TV.singleLine,p.l0.px(8)],headerContent:(0,r.BX)(p.G7,{css:[p.l0.flex.row,p.l0.align.center,p.l0.justify.spaceBetween,p.l0.flex.growAndShrink(1),p.l0.mr(8)],children:[(0,r.BX)(p.G7,{css:[p.l0.flex.row,p.l0.align.center,p.l0.rowWithGap(8),p.l0.flex.growAndShrink(1)],children:[(0,r.tZ)(ti.Z,{path:t,size:20}),(0,r.tZ)(p.xv,{css:[p.l0.flex.shrink(1)],children:t})]}),o?(0,r.tZ)("div",{css:[p.l0.flex.shrink(0),p.l0.width(8),p.l0.height(8),p.l0.backgroundColor.redStronger,p.l0.borderRadius("full")]}):null]}),children:(0,r.tZ)("div",{css:[p.l0.mt(8),p.l0.colWithGap(8)],children:n.map((function(e){return(0,r.tZ)(gd,{thread:e,onClick:i},e.id)}))})})})},Zd=n(36764);function yd(e){var t=e.primary,n=e.secondary;return(0,r.tZ)(p.G7,{css:[p.l0.align.center,p.l0.justify.center,p.l0.flex.grow(1)],children:(0,r.BX)(p.G7,{css:[p.l0.align.center,p.l0.justify.center,p.l0.flex.grow(1)],children:[(0,r.tZ)(p.G7,{css:[p.l0.maxWidth(140),p.l0.maxHeight(140),p.l0.position.relative,p.l0.align.center,p.l0.justify.center,{pointerEvents:"none"}],children:(0,r.tZ)(Du,{})}),(0,r.tZ)(p.xv,{variant:"subheadDefault",css:p.l0.mt(32),children:t}),(0,r.tZ)("div",{css:[p.l0.color.foregroundDimmest],children:(0,r.tZ)(p.xv,{variant:"text",css:p.l0.mt(8),children:n})})]})})}!function(e){e.CHRONOLOGICAL="chronological",e.CODE_ORDER="codeOrder"}(md||(md={})),function(e){e.PARTICIPATING="participating",e.RESOLVED="resolved",e.UNREAD="unread",e.INBOX="inbox"}(vd||(vd={}));var xd,wd,kd=function(e){var t=e.isPane,n=e.isChatOnly,o=(0,ge.Z)(),l=(0,Xi.D)({controlName:"flag-typing-presence"}),s=(0,Su.Z)(o,{onReceiveAnnotationUpdate:function(){}}),c=s.annotations,d=s.loading,f=s.generalThread,h=s.createAnnotationAnchorPlaceholder,m=s.createAnnotationMessage,g=s.updateThreadPreview,b=function(e){var t=(0,ae.Z)({},Eu,e);return ce.a(Gu,t)}(),Z=b.data,y=b.loading,w=d||y,k=(0,a.Z)(i.useState(!1),2),S=k[0],_=k[1],T=(0,C.Z)(),R=(0,Ct.b9)(Cu.Q),B=(0,v.Z)(),E=B.container,G=B.session,D=(0,a.Z)(i.useState(""),2),I=D[0],j=D[1],N=(0,a.Z)(i.useState("INBOX"),2),L=N[0],z=N[1],P=(0,a.Z)(i.useState("CHRONOLOGICAL"),2),A=P[0],X=P[1],U=i.useMemo((function(){var e,t=null===Z||void 0===Z||null===(e=Z.currentUser)||void 0===e?void 0:e.id,n=c.filter((function(e){if("INBOX"===L)return!e.isResolved;if("RESOLVED"===L)return e.isResolved;if("PARTICIPATING"===L)return!t||function(e,t){var n;return(null===(n=e.user)||void 0===n?void 0:n.id)===t||e.messages.some((function(e){var n=e.user;return(null===n||void 0===n?void 0:n.id)===t}))}(e,t);if("UNREAD"===L){var n=e.messages.some((function(e){return!e.seen}));return n}return!0}));return n}),[Z,c,L]),F=i.useMemo((function(){return U.filter((function(e){var t,n;return 0===I.length||null!==(n=null===(t=e.path)||void 0===t?void 0:t.toLowerCase().includes(I.toLowerCase()))&&void 0!==n&&n}))}),[I,U]),M=i.useMemo((function(){return(0,ie.Z)(F).sort((function(e,t){if("CHRONOLOGICAL"===A){var n,r,i=new Date(null===(n=e.messages[0])||void 0===n?void 0:n.timeCreated),o=new Date(null===(r=t.messages[0])||void 0===r?void 0:r.timeCreated);return i&&o?i<o?1:-1:0}return"CODE_ORDER"===A?(0,x.IV)(e.path,t.path):0})).reduce((function(e,t){var n=t.path;return n&&"undefined"!==typeof n?(e[n]=e[n]||[],e[n].push(t),e):e}),{})}),[F,A]),W=i.useMemo((function(){var e=(0,ae.Z)({},M),t=Object.values(e).map((function(e){return(0,ie.Z)(e).sort((function(e,t){if("CHRONOLOGICAL"===A){var n,r,i=new Date(null===(n=e.messages[0])||void 0===n?void 0:n.timeCreated),o=new Date(null===(r=t.messages[0])||void 0===r?void 0:r.timeCreated);return i&&o?i<o?1:-1:0}var a,l,s,c;return"CODE_ORDER"===A?(null!==(l=null!==(a=e.indexStart)&&void 0!==a?a:e.indexEnd)&&void 0!==l?l:0)<(null!==(c=null!==(s=t.indexStart)&&void 0!==s?s:t.indexEnd)&&void 0!==c?c:0)?-1:1:0}))}));return t.reduce((function(e,t,n){return e[Object.keys(M)[n]]=t,e}),{})}),[M,A]),O=(0,Tu.Z)().map((function(e){return e.username})),H=function(e){var t=(0,a.Z)((0,Zd.n)(),1)[0];return function(){t({variables:{replId:e}})}}(o),V=function(){var e=(0,je.Z)((function(e){return(0,Ne.__generator)(this,(function(t){switch(t.label){case 0:if(!e.path)return[2];if(T===e.path)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,E.exec("test","-f",e.path)];case 2:return null!==t.sent().error?[2]:[3,4];case 3:return t.sent(),[2];case 4:return G.openFile(e.path),R(e.id),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),q=_u.Wo.StartThread.keyboardShortcut;return n?(0,r.tZ)(ld,{generalThreadsOpen:S,setGeneralThreadsOpen:_,generalThread:f,handleChangeMessage:function(e){var t=e.anchor,n=e.message,r=e.messageId;g({threadId:t.id,message:l?n:null,messageId:r})},handleFinalizeMessage:function(e){var t=e.anchor,n=e.message,r=e.messageId,i=(0,Ru.kW)(n,{users:(0,ie.Z)(O).concat(["everyone"])});m({anchor:t,annotationMessage:{id:r,text:n,mentions:i.mentions}})},createAnnotationAnchorPlaceholder:h}):(0,r.BX)(p.Tg,{className:"threads-inbox",elevated:!t,css:[!t&&[p.l0.borderRadius(8),p.l0.pb(8),p.l0.shadow(2),{borderWidth:p.TV.borderWidthDefault,borderStyle:"solid",borderColor:p.TV.outlineDimmest}],p.l0.height("100%"),p.l0.width("100%"),p.l0.overflow("hidden"),p.l0.position.relative],"aria-busy":w,children:[w?(0,r.tZ)(p.G7,{css:[p.l0.display.flex,p.l0.align.center,p.l0.justify.center,p.l0.height("100%")],children:(0,r.tZ)(me.Z,{size:24})}):(0,r.BX)(r.HY,{children:[(0,r.BX)(p.G7,{className:"threads-inbox-header",css:[p.l0.py(12),p.l0.px(8),p.l0.position.sticky,p.l0.top(0),p.l0.backgroundColor.backgroundDefault,{zIndex:10}],children:[t?null:(0,r.tZ)(p.G7,{css:[p.l0.pb(12)],children:(0,r.tZ)(p.xv,{variant:"subheadDefault",children:Pu.title})}),(0,r.BX)(p.G7,{css:[p.l0.flex.row,p.l0.align.center,p.l0.flex.wrap,{gap:8}],children:[(0,r.tZ)(p.II,{placeholder:Pu.search.placeholder,value:I,onChange:function(e){return j(e.target.value)},css:[p.l0.flex.grow(1)]}),(0,r.BX)(p.G7,{css:[p.l0.flex.row,p.l0.maxWidth("100%"),{gap:8}],children:[(0,r.tZ)(p.G7,{css:[p.l0.flex.shrink(1)],children:(0,r.tZ)(p.ZE,{cssProps:[p.l0.flex.shrink(1),{span:p.l0.flex.shrink(1)}],icon:Pu.filters[vd[L]].icon,suffix:(0,r.tZ)(ar.ChevronDown,{}),label:Pu.filters[vd[L]].label,onAction:function(e){switch(e){case"toggle-inbox":z("INBOX");break;case"toggle-unread":z("UNREAD");break;case"toggle-participating":z("PARTICIPATING");break;case"toggle-resolved":z("RESOLVED")}},children:Object.entries(Pu.filters).map((function(e){var t=(0,a.Z)(e,2),n=(t[0],t[1]);return(0,r.tZ)(ku.ck,{"aria-label":n.label,children:(0,r.BX)(p.G7,{css:p.l0.rowWithGap(8),children:[n.icon,(0,r.tZ)(p.xv,{children:n.label})]})},n.key)}))})}),(0,r.tZ)(p.G7,{css:[p.l0.flex.shrink(1)],children:(0,r.tZ)(p.ZE,{cssProps:[p.l0.flex.shrink(1),{span:p.l0.flex.shrink(1)}],icon:Pu.sorts[md[A]].icon,suffix:(0,r.tZ)(ar.ChevronDown,{}),label:Pu.sorts[md[A]].label,onAction:function(e){switch(e){case Pu.sorts.chronological.key:X("CHRONOLOGICAL");break;case Pu.sorts.codeOrder.key:X("CODE_ORDER")}},children:Object.entries(Pu.sorts).map((function(e){var t=(0,a.Z)(e,2),n=(t[0],t[1]);return(0,r.tZ)(ku.ck,{"aria-label":n.label,children:(0,r.BX)(p.G7,{css:p.l0.rowWithGap(8),children:[n.icon,(0,r.tZ)(p.xv,{children:n.label})]})},n.key)}))})}),(0,r.tZ)(p.G7,{css:[p.l0.flex.shrink(1)],children:(0,r.tZ)(p.zx,{iconLeft:(0,r.tZ)(qe.Z,{}),text:Pu.markAsRead,onClick:H,css:{span:p.l0.flex.shrink(1)}})})]})]})]}),0===c.length?(0,r.tZ)(yd,{primary:Pu.empty.noThreadsCreated.text.primary,secondary:Pu.empty.noThreadsCreated.text.secondary(q)}):(0,r.tZ)(r.HY,{children:Object.keys(W).length>0?(0,r.tZ)(p.G7,{css:[p.l0.flex.growAndShrink(1),p.l0.overflowY("auto")],children:Object.keys(W).map((function(e,t){return(0,r.tZ)(bd,{path:e||"-",threads:Object.values(W)[t],onThreadClick:function(e){V(e)}},e)}))}):(0,r.tZ)(yd,{primary:Pu.empty.noThreadsFound.text.primary,secondary:Pu.empty.noThreadsFound.text.secondary})})]}),(0,r.tZ)(u(),{id:Mu.Q.__hash,children:Mu.Q})]})},Cd={Content:function(){return(0,r.tZ)(kd,{isPane:!0})},Icon:function(e){var t=e.size;return(0,r.tZ)(ju.Z,{size:t})},getTitle:function(){return"Threads"}},Sd=n(4368),_d=n(83241),Td=n(15210);!function(e){e.RAW="RAW",e.PROXY="PROXY",e.THROW="THROW",e.HANDLER="HANDLER"}(xd||(xd={})),function(e){e.GET="GET",e.SET="SET",e.APPLY="APPLY",e.CONSTRUCT="CONSTRUCT",e.ENDPOINT="ENDPOINT",e.RELEASE="RELEASE"}(wd||(wd={}));var Rd=Symbol("Comlink.proxy"),Bd=Symbol("Comlink.endpoint"),Ed=Symbol("Comlink.releaseProxy"),Gd=Symbol("Comlink.thrown"),Dd=function(e){return"object"===typeof e&&null!==e||"function"===typeof e},Id=new Map([["proxy",{canHandle:function(e){return Dd(e)&&e[Rd]},serialize:function(e){var t=new MessageChannel,n=t.port1,r=t.port2;return jd(e,n),[r,[r]]},deserialize:function(e){return e.start(),zd(e,[],t);var t}}],["throw",{canHandle:function(e){return Dd(e)&&Gd in e},serialize:function(e){var t=e.value;return[(0,Wi.Z)(t,Error)?{isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:{isError:!1,value:t},[]]},deserialize:function(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}}]]);function jd(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:self,n=arguments.length>2?arguments[2]:void 0;function r(i){if(i&&i.data&&(!n||i.origin===n.origin&&i.source===n.source)){var l,s=(0,ae.Z)({path:[]},i.data),c=s.id,u=s.type,d=s.path,f=(i.data.argumentList||[]).map(Md);try{var p=d.slice(0,-1).reduce((function(e,t){return e[t]}),e),h=d.reduce((function(e,t){return e[t]}),e);switch(u){case wd.GET:l=h;break;case wd.SET:p[d.slice(-1)[0]]=Md(i.data.value),l=!0;break;case wd.APPLY:l=h.apply(p,f);break;case wd.CONSTRUCT:l=Ud((0,Td.Z)(h,(0,ie.Z)(f)));break;case wd.ENDPOINT:var m=new MessageChannel,v=m.port1,g=m.port2;jd(e,g),l=Xd(v,[v]);break;case wd.RELEASE:l=void 0;break;default:return}}catch(b){l=(0,o.Z)({value:b},Gd,0)}Promise.resolve(l).catch((function(e){return(0,o.Z)({value:e},Gd,0)})).then((function(e){var n=(0,a.Z)(Fd(e),2),i=n[0],o=n[1];t.postMessage((0,tt.Z)((0,ae.Z)({},i),{id:c}),o),u===wd.RELEASE&&(t.removeEventListener("message",r),Nd(t))}))}}return t.addEventListener("message",r),t.start&&t.start(),function(){t.removeEventListener("message",r),Nd(t)}}function Nd(e){(function(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function Ld(e){if(e)throw new Error("Proxy has been released and is not useable")}function zd(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=!1,i=new Proxy(n,{get:function(n,o){if(Ld(r),o===Ed)return function(){return Wd(e,{type:wd.RELEASE,path:t.map((function(e){return e.toString()}))}).then((function(){Nd(e),r=!0}))};if("then"===o){if(0===t.length)return{then:function(){return i}};var a=Wd(e,{type:wd.GET,path:t.map((function(e){return e.toString()}))}).then(Md);return a.then.bind(a)}return zd(e,(0,ie.Z)(t).concat([o]))},set:function(n,i,o){Ld(r);var l=(0,a.Z)(Fd(o),2),s=l[0],c=l[1];return Wd(e,{type:wd.SET,path:(0,ie.Z)(t).concat([i]).map((function(e){return e.toString()})),value:s},c).then(Md)},apply:function(n,i,o){Ld(r);var l=t[t.length-1];if(l===Bd)return Wd(e,{type:wd.ENDPOINT}).then(Md);if("bind"===l)return zd(e,t.slice(0,-1));var s=(0,a.Z)(Pd(o),2),c=s[0],u=s[1];return Wd(e,{type:wd.APPLY,path:t.map((function(e){return e.toString()})),argumentList:c},u).then(Md)},construct:function(n,i){Ld(r);var o=(0,a.Z)(Pd(i),2),l=o[0],s=o[1];return Wd(e,{type:wd.CONSTRUCT,path:t.map((function(e){return e.toString()})),argumentList:l},s).then(Md)}});return i}function Pd(e){var t,n=e.map(Fd);return[n.map((function(e){return e[0]})),(t=n.map((function(e){return e[1]})),Array.prototype.concat.apply([],t))]}var Ad=new WeakMap;function Xd(e,t){return Ad.set(e,t),e}function Ud(e){return Object.assign(e,(0,o.Z)({},Rd,!0))}function Fd(e){var t=!0,n=!1,r=void 0;try{for(var i,o=Id[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var l=(0,a.Z)(i.value,2),s=l[0],c=l[1];if(c.canHandle(e)){var u=(0,a.Z)(c.serialize(e),2),d=u[0],f=u[1];return[{type:xd.HANDLER,name:s,value:d},f]}}}catch(p){n=!0,r=p}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return[{type:xd.RAW,value:e},Ad.get(e)||[]]}function Md(e){switch(e.type){case xd.HANDLER:return Id.get(e.name).deserialize(e.value);case xd.RAW:return e.value}}function Wd(e,t,n){return new Promise((function(r){var i=new Array(4).fill(0).map((function(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)})).join("-");e.addEventListener("message",(function t(n){n.data&&n.data.id&&n.data.id===i&&(e.removeEventListener("message",t),r(n.data))})),e.start&&e.start(),e.postMessage((0,ae.Z)({id:i},t),n)}))}var Od=n(25108);function Hd(e){return e.error?{error:e.error,success:!1}:{success:!0,error:null}}var Vd=n(93803),qd=n(17780);var $d=n(38418),Yd=n(95068),Kd=n(3032),Jd=function(e){return Ud($d.e.sub(Yd.QP,(function(){var t=$d.e.get(Yd.QP);e(t)})))},Qd=function(e){$d.e.set(Kd.U,e)},ef=n(50146),tf=n(60336),nf=n(5768),rf=n(11731),of=n(12727),af=function(e){var t;return null===(t=$d.e.get(of.Eh))||void 0===t?void 0:t.find((function(t){var n;return!t.isHidden&&(null===(n=$d.e.get(t.data))||void 0===n?void 0:n.type)===e}))},lf=function(e){var t,n=null===(t=$d.e.get(of.Eh))||void 0===t?void 0:t.find((function(t){var n=$d.e.get(t.data);return(null===n||void 0===n?void 0:n.type)===e}));return n?{paneId:n.paneId,isHidden:n.isHidden,isDialog:n.isDialog,type:n.type,data:$d.e.get(n.data)}:null},sf=function(e){$d.e.set(rf.Oe,e)},cf=function(e){$d.e.set(ef.WM,e)},uf=function(e){$d.e.set(ef.AW,e)};function df(){return $d.e.get(tf.ij)}function ff(e){$d.e.set(nf.sq,{initialLayoutState:e,codeEditorPath:void 0})}function pf(e){var t=e.extensionIframe,n=e.services,r=new URL(t.src).origin;function i(e){return o.apply(this,arguments)}function o(){return(o=(0,je.Z)((function(e){return(0,Ne.__generator)(this,(function(n){return t.contentWindow?(t.contentWindow.postMessage(e,r),[2]):(alert("No contentWindow"),[2])}))}))).apply(this,arguments)}function a(){return(a=(0,je.Z)((function(e){return(0,Ne.__generator)(this,(function(t){return i({id:e.id,payload:{success:!0}}),[2]}))}))).apply(this,arguments)}function l(e){return s.apply(this,arguments)}function s(){return(s=(0,je.Z)((function(e){return(0,Ne.__generator)(this,(function(t){return i({id:e.id,payload:{error:"commandNotFound",command:e.payload.type}}),[2]}))}))).apply(this,arguments)}var c=(0,ae.Z)({},function(e){var t=e.fs;function n(){return(n=(0,je.Z)((function(e,n){var r,i;return(0,Ne.__generator)(this,(function(o){switch(o.label){case 0:return"string"!==typeof n?[3,1]:(r=n,[3,4]);case 1:return(0,Wi.Z)(n,Blob)?(i=un.Z.from,[4,n.arrayBuffer()]):[3,3];case 2:return r=i.apply(un.Z,[o.sent()]),[3,4];case 3:r=un.Z.from(n),o.label=4;case 4:return[4,t.writeFile(e,r)];case 5:return[2,Hd(o.sent())]}}))}))).apply(this,arguments)}function r(){return(r=(0,je.Z)((function(e){var n;return(0,Ne.__generator)(this,(function(r){switch(r.label){case 0:return[4,t.readFile(e)];case 1:return(n=r.sent()).error?[2,{error:n.error,content:null}]:[2,{error:null,content:n.content.toString()}]}}))}))).apply(this,arguments)}function i(){return(i=(0,je.Z)((function(e){var n;return(0,Ne.__generator)(this,(function(r){switch(r.label){case 0:return[4,t.readDir(e)];case 1:return(n=r.sent()).error?[2,{error:n.error,children:null}]:[2,{error:null,children:n.children}]}}))}))).apply(this,arguments)}function o(){return(o=(0,je.Z)((function(e){return(0,Ne.__generator)(this,(function(n){switch(n.label){case 0:return[4,t.createDir(e)];case 1:return[2,Hd(n.sent())]}}))}))).apply(this,arguments)}function a(){return(a=(0,je.Z)((function(e){return(0,Ne.__generator)(this,(function(n){switch(n.label){case 0:return[4,t.deleteDir(e)];case 1:return[2,Hd(n.sent())]}}))}))).apply(this,arguments)}function l(){return(l=(0,je.Z)((function(e){return(0,Ne.__generator)(this,(function(n){switch(n.label){case 0:return[4,t.deleteFile(e)];case 1:return[2,Hd(n.sent())]}}))}))).apply(this,arguments)}function s(){return(s=(0,je.Z)((function(e,n){var r,i;return(0,Ne.__generator)(this,(function(o){switch(o.label){case 0:return[4,t.stat(e)];case 1:return(r=o.sent()).exists?r.type!==k.Tv.File?[3,3]:[4,t.moveFile(e,n)]:[2,{error:"File or directory does not exist",success:!1}];case 2:return i=o.sent(),[3,5];case 3:return[4,t.moveDir(e,n)];case 4:i=o.sent(),o.label=5;case 5:return[2,Hd(i)]}}))}))).apply(this,arguments)}function c(){return(c=(0,je.Z)((function(e,n){return(0,Ne.__generator)(this,(function(r){switch(r.label){case 0:return[4,t.copyFile(e,n)];case 1:return[2,Hd(r.sent())]}}))}))).apply(this,arguments)}return{readFile:function(e){return r.apply(this,arguments)},readDir:function(e){return i.apply(this,arguments)},createDir:function(e){return o.apply(this,arguments)},deleteDir:function(e){return a.apply(this,arguments)},writeFile:function(e,t){return n.apply(this,arguments)},deleteFile:function(e){return l.apply(this,arguments)},copyFile:function(e,t){return c.apply(this,arguments)},move:function(e,t){return s.apply(this,arguments)},watchFile:function(e,n){(0,x.Mb)(e)&&Od.warn("It appears that you are trying to use watchFile on a text file. This works, but you should use watchTextFile instead.");var r=t.watchFile(e,{onChange:function(e){n.onChange(e.asBuffer)},onError:function(e){n.onError(e.message)},onMoveOrDelete:function(e){n.onMoveOrDelete({eventType:e.eventType,node:e.node})}});return Ud((function(){r()}))},watchTextFile:function(e,n){(0,x.Mb)(e)||Od.warn("It appears that you are trying to use watchTextFile on a non-OT file");var r=t.watchTextFile(e,{onReady:function(e){var t=e.fetchChanges,r=e.initialContent,i=e.transformSelection,o=e.updateSelections,a=e.version,l=e.writeChange;n.onReady(Ud({writeChange:l,fetchChanges:t,initialContent:r,version:a,transformSelection:i,updateSelections:o}))},onChange:function(){var e=(0,je.Z)((function(e){var t,r,i,o;return(0,Ne.__generator)(this,(function(a){return t=e.latestContent,r=e.changeSource,i=e.changes,o=e.version,n.onChange({latestContent:t.toString(),version:o,changeSource:r,changes:i.toJSON()}),[2]}))}));return function(t){return e.apply(this,arguments)}}(),onError:function(e){n.onError(e.message)},onMoveOrDelete:function(e){n.onMoveOrDelete({eventType:e.eventType,node:e.node})}});return Ud((function(){r()}))}}}({fs:n.fs}),function(e){var t=e.container,n=null;function r(){return i.apply(this,arguments)}function i(){return(i=(0,je.Z)((function(){var e;return(0,Ne.__generator)(this,(function(r){switch(r.label){case 0:return n?[2]:[4,t.exec("bash","-c","echo $REPLIT_DB_URL")];case 1:if((e=r.sent()).error||!e.output)throw new Error("unable to find REPLIT_DB_URL");return n=e.output.trim(),[2]}}))}))).apply(this,arguments)}function o(){return(o=(0,je.Z)((function(e,i){return(0,Ne.__generator)(this,(function(o){switch(o.label){case 0:return[4,r()];case 1:return o.sent(),[4,t.exec("curl",n,"-s","-d","".concat(e,"=").concat(i))];case 2:return o.sent(),[2]}}))}))).apply(this,arguments)}function a(){return(a=(0,je.Z)((function(e){return(0,Ne.__generator)(this,(function(i){switch(i.label){case 0:return[4,r()];case 1:return i.sent(),[4,t.exec("curl","-s","".concat(n,"/").concat(e))];case 2:return[2,i.sent().output]}}))}))).apply(this,arguments)}function l(){return(l=(0,je.Z)((function(e){var i;return(0,Ne.__generator)(this,(function(o){switch(o.label){case 0:return[4,r()];case 1:return o.sent(),[4,t.exec("curl","-s","".concat(n,"?prefix=").concat(e))];case 2:return(i=o.sent()).error||!i.output?[2,{error:i.error}]:[2,{keys:i.output.split("\n")}]}}))}))).apply(this,arguments)}function s(){return(s=(0,je.Z)((function(e){var i;return(0,Ne.__generator)(this,(function(o){switch(o.label){case 0:return[4,r()];case 1:return o.sent(),[4,t.exec("curl","-s","-XDELETE","".concat(n,"/").concat(e))];case 2:return(i=o.sent()).error||!i.output?[2,{error:i.error}]:[2,{keys:i.output.split("\n")}]}}))}))).apply(this,arguments)}return{setReplDbValue:function(e,t){return o.apply(this,arguments)},getReplDbValue:function(e){return a.apply(this,arguments)},listReplDbKeys:function(e){return l.apply(this,arguments)},deleteReplDbKey:function(e){return s.apply(this,arguments)}}}({container:n.container}),{watchActiveFile:Jd,openFile:Qd},{getLayoutState:df,setLayoutState:ff,isPaneTypeVisible:af,findPaneByType:lf,selectTab:sf,insertFloatingPaneIfNotExist:cf,removeFloatingPanesByType:uf}),u=(0,ae.Z)({handshake:function(e){return a.apply(this,arguments)}},function(e){var t=e.send;return{queryGraphql:function(){var e=(0,je.Z)((function(e){var n;return(0,Ne.__generator)(this,(function(r){switch(r.label){case 0:return[4,null===qd.l||void 0===qd.l?void 0:qd.l.query({query:(0,se.ZP)(e.payload.query),variables:e.payload.variables})];case 1:return n=r.sent(),t({id:e.id,payload:n}),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),mutateGraphql:function(){var e=(0,je.Z)((function(e){var n;return(0,Ne.__generator)(this,(function(r){switch(r.label){case 0:return[4,null===qd.l||void 0===qd.l?void 0:qd.l.mutate({mutation:(0,se.ZP)(e.payload.mutation),variables:e.payload.variables})];case 1:return n=r.sent(),t({id:e.id,payload:n}),[2]}}))}));return function(t){return e.apply(this,arguments)}}()}}({send:i}),(0,Vd.Z)({send:i,services:n}));function d(){return(d=(0,je.Z)((function(e){var t,n;return(0,Ne.__generator)(this,(function(r){return t=e.payload.type,(n=u[t])?[2,n(e)]:[2,l(e)]}))}))).apply(this,arguments)}var f=function(e){if(e.origin===r&&t.contentWindow===e.source){var n=e.data;n.payload&&function(e){d.apply(this,arguments)}(n)}};if(!t.contentWindow)throw new Error("No contentWindow");var p=jd(c,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:self,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"*";return{postMessage:function(t,r){e.postMessage(t,n,r)},addEventListener:t.addEventListener.bind(t),removeEventListener:t.removeEventListener.bind(t)}}(t.contentWindow,self,r),{origin:r,source:t.contentWindow});return window.addEventListener("message",f),function(){p(),window.removeEventListener("message",f)}}function hf(e){var t=e.extensionUrl,n=i.useRef(null),o=(0,v.Z)();return(0,i.useEffect)((function(){if(n.current)return pf({extensionIframe:n.current,services:o})}),[o]),(0,r.tZ)(p.G7,{className:"extension-pane",css:[p.l0.backgroundColor.backgroundDefault,p.l0.height("100%"),p.l0.borderRadius(4),{overflow:"hidden"}],children:(0,r.tZ)("iframe",(0,ae.Z)({css:{width:"100%",height:"100%",border:"none"},title:"extension",ref:n,src:t},_d.Z))})}var mf={Content:function(e){var t=e.pane;return(0,r.tZ)(hf,{extensionUrl:t.data.url})},Icon:function(e){var t=e.size;return(0,r.tZ)(Sd.Z,{size:t})},getTitle:function(e){return e.data.name}},vf={Content:function(){return(0,r.tZ)(hf,{extensionUrl:"https://docs.replit.com/"})},Icon:function(e){var t=e.size;return(0,r.tZ)(rl.Z,{size:t})},getTitle:function(){return"Docs"}},gf=n(73147),bf=["youtube.com","vimeo.com","wistia.com","sadanandpai.github.io"],Zf={Content:function(e){var t=e.pane.data;return(0,r.tZ)(yf,{title:t.title,embedUrl:t.embedUrl})},Icon:function(e){var t=e.size;return(0,r.tZ)(ol.Z,{size:t})},getTitle:function(e){return e.data.title}};function yf(e){return function(e){var t=new URL(e).hostname;return bf.some((function(e){return t===e||t.endsWith("."+e)}))}(e.embedUrl)?(0,r.tZ)("iframe",{title:e.title,src:e.embedUrl,frameBorder:"0",css:[p.l0.coverContainer,p.l0.borderRadius(0,0,8,8)]}):(0,r.BX)("div",{children:["Only YouTube, Vimeo, and Wistia videos are supported."," ",(0,r.tZ)("a",{href:gf.xz,target:"_blank",children:"Request more formats here."})]})}var xf=n(75026),wf={Content:function(){return(0,r.tZ)(p.Tg,{background:"default",css:p.l0.flex.growAndShrink(1),children:(0,r.tZ)(kd,{isPane:!0,isChatOnly:!0})})},Icon:function(e){var t=e.size;return(0,r.tZ)(xf.Z,{size:t})},getTitle:function(){return"Chat"}};function kf(){var e=(0,le.Z)(["\n  fragment ReplDomain on Domain {\n    hosting_deployment_id\n    domain\n    state\n  }\n"]);return kf=function(){return e},e}function Cf(){var e=(0,le.Z)(["\n  fragment CurrentHostingBuild on HostingBuild {\n    id\n    description\n    status\n    timeCreated\n    repl {\n      id\n      guaranteedProvisioningSku\n    }\n    user {\n      id\n      displayName\n    }\n  }\n"]);return Cf=function(){return e},e}function Sf(){var e=(0,le.Z)(["\n  query HostingDeployment($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        domains {\n          ... on Domain {\n            ...ReplDomain\n          }\n        }\n        hostingDeployment {\n          ... on HostingDeployment {\n            id\n            currentBuild {\n              ...CurrentHostingBuild\n            }\n          }\n          ... on NotFoundError {\n            message\n          }\n          ... on UnauthorizedError {\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return Sf=function(){return e},e}function _f(){var e=(0,le.Z)(["\n  mutation CreateHostingBuild($input: CreateHostingBuildInput!) {\n    createHostingBuild(input: $input) {\n      ... on HostingBuild {\n        ...CurrentHostingBuild\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return _f=function(){return e},e}var Tf={},Rf=(0,se.Ps)(kf()),Bf=(0,se.Ps)(Cf()),Ef=(0,se.Ps)(Sf(),Rf,Bf);var Gf=(0,se.Ps)(_f(),Bf);function Df(e){var t=(0,ae.Z)({},Tf,e);return Le.D(Gf,t)}var If=n(7055),jf=n(16329),Nf=function(e){var t=e.hostedDeployment;return(0,r.tZ)(p.G7,{css:[p.l0.py(12)],children:(0,r.tZ)(jf.Z,{replId:t.currentBuild.repl.id,deploymentId:t.id,onLink:function(){},onUnlink:function(){}})})};function Lf(){var e=(0,le.Z)(["\n  fragment HostingActivityLogLine on HostingActivityLog {\n    id\n    build {\n      id\n    }\n    type\n    user {\n      id\n      displayName\n    }\n    timeCreated\n  }\n"]);return Lf=function(){return e},e}function zf(){var e=(0,le.Z)(["\n  query HostingDeploymentActivityLogs(\n    $replId: String!\n    $after: String\n    $count: Int\n  ) {\n    repl(id: $replId) {\n      ... on Repl {\n        hostingDeployment {\n          ... on HostingDeployment {\n            id\n            activityLogs(after: $after, count: $count) {\n              items {\n                ...HostingActivityLogLine\n              }\n              pageInfo {\n                hasNextPage\n                nextCursor\n              }\n            }\n          }\n          ... on NotFoundError {\n            message\n          }\n          ... on UnauthorizedError {\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return zf=function(){return e},e}var Pf={},Af=(0,se.Ps)(Lf()),Xf=(0,se.Ps)(zf(),Af);var Uf,Ff,Mf=n(4972),Wf=n(67669);!function(e){e.Current="current"}(Uf||(Uf={}));var Of,Hf=(Ff={},(0,o.Z)(Ff,Uf.Current,{title:"Current",color:p.TV.blueStronger}),(0,o.Z)(Ff,Wf.dD.Deploy,{title:"Deploy",color:p.TV.accentPositiveDefault}),(0,o.Z)(Ff,Wf.dD.Rollback,{title:"Rollback",color:p.TV.blurpleStronger}),(0,o.Z)(Ff,Wf.dD.Fail,{title:"Fail",color:p.TV.accentNegativeDefault}),Ff),Vf=function(e){var t=e.type,n=e.isCurrent,i=t in Hf?Hf[n?Uf.Current:t]:{title:"",color:p.TV.greenDefault},o=i.title,a=i.color;return(0,r.BX)(p.G7,{css:[p.l0.align.center,p.l0.rowWithGap(8),{textTransform:"capitalize"}],children:[(0,r.tZ)(p.G7,{as:"span",css:[p.l0.width("8px"),p.l0.height("8px"),p.l0.borderRadius("full"),{backgroundColor:a,boxShadow:"0 0 12px ".concat(a)}]}),(0,r.tZ)("div",{className:"always-on-indicator","aria-label":o,"data-microtip-position":"bottom",role:"tooltip"}),(0,r.tZ)(p.xv,{children:o})]})},qf=(Of={},(0,o.Z)(Of,Uf.Current,{icon:(0,r.tZ)(ar.Deploy,{}),text:"Current deployment"}),(0,o.Z)(Of,Wf.dD.Deploy,{icon:(0,r.tZ)(ar.Deploy,{}),text:"Build deployed"}),(0,o.Z)(Of,Wf.dD.Rollback,{icon:(0,r.tZ)(ar.Deploy,{}),text:"Roll back deployed"}),(0,o.Z)(Of,Wf.dD.Fail,{icon:(0,r.tZ)(Pn.Z,{}),text:"Deployment failed"}),Of),$f=p.KD.div,Yf=function(e){var t=e.activityLogItem,n=e.isCurrent?Uf.Current:t.type,o=(0,a.Z)(i.useState(!1),2),l=o[0],s=o[1],c=(0,a.Z)(i.useState(!1),2),u=c[0],d=c[1],f=i.useRef(!1);i.useEffect((function(){f.current=!0;var e=setTimeout((function(){d(l)}),200);return function(){clearTimeout(e)}}),[l]);var h=n in qf?qf[n]:{icon:(0,r.tZ)(r.HY,{}),text:""},m=h.icon,v=h.text;return(0,r.tZ)(p.G7,{css:[p.l0.p(8)],onMouseEnter:function(){return s(!0)},onMouseLeave:function(){return s(!1)},children:(0,r.BX)(fl.Z,{isOpen:u,onClickOutside:function(){return d(!1)},padding:8,children:[(0,r.tZ)($f,{children:m}),(0,r.tZ)(p.G7,{css:[p.l0.maxWidth(240)],children:(0,r.tZ)(p.xv,{multiline:!0,children:v})})]})})},Kf=function(e){var t=e.hostedDeployment,n=function(e){var t=(0,ae.Z)({},Pf,e);return ce.a(Xf,t)}({variables:{replId:t.currentBuild.repl.id,count:20},fetchPolicy:"cache-and-network"}),o=n.data,l=n.loading,s=n.error,c=n.fetchMore,u=function(e){var t;return"Repl"===(null===e||void 0===e?void 0:e.repl.__typename)&&"HostingDeployment"===(null===(t=e.repl.hostingDeployment)||void 0===t?void 0:t.__typename)&&"HostingActivityLogConnection"===e.repl.hostingDeployment.activityLogs.__typename&&e.repl.hostingDeployment.activityLogs}(o),d=u&&u.pageInfo.hasNextPage,f=function(){var e=(0,je.Z)((function(){return(0,Ne.__generator)(this,(function(e){switch(e.label){case 0:return l||u&&null==u.pageInfo.nextCursor||!u||!u.pageInfo.hasNextPage?[2]:[4,c({variables:{input:{after:u.pageInfo.nextCursor,count:20}}})];case 1:return e.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}(),h=(0,Mf.Z)({onLoadMore:f,rootMargin:"0px 0px 300px 0px"}).targetRef,m=(0,a.Z)(i.useState(null),2),v=m[0],g=m[1],b=(0,a.Z)(i.useState(null===s||void 0===s?void 0:s.message),2),Z=b[0],y=b[1];return i.useEffect((function(){if(Z)y(Z);else if(u)g(u.items);else{var e,t;if("Repl"!==(null===o||void 0===o?void 0:o.repl.__typename))return void y(null===o||void 0===o?void 0:o.repl.__typename);if("HostingDeployment"!==(null===(e=o.repl.hostingDeployment)||void 0===e?void 0:e.__typename))switch(null===(t=o.repl.hostingDeployment)||void 0===t?void 0:t.__typename){case"NotFoundError":case"UnauthorizedError":y(o.repl.hostingDeployment.message)}y("An unexpected error occurred.")}}),[o,u,Z]),(0,r.BX)(p.G7,{css:[p.l0.py(12)],children:[Z?(0,r.tZ)(p.G7,{css:[p.l0.pb(8),p.l0.center,p.l0.align.stretch],children:(0,r.tZ)(p.E_,{colorway:"warning",icon:(0,r.tZ)(Pn.Z,{}),text:Z})}):null,v&&0===v.length?(0,r.tZ)(p.G7,{css:[p.l0.pb(8),p.l0.center,p.l0.align.stretch],children:(0,r.tZ)(p.E_,{colorway:"grey",icon:(0,r.tZ)($n.Z,{}),text:"Deployment has no history"})}):null,v&&v.length>0?v.map((function(e,n){var i=t.currentBuild.id===e.build.id;return(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(12),p.l0.py(12),p.l0.align.center,n<v.length-1&&{borderBottom:"1px solid ".concat(p.TV.outlineDimmest)}],children:[(0,r.BX)(p.xv,{variant:"text",css:[p.l0.width("60%"),p.l0.flex.shrink(1)],children:[(0,If.Z)(new Date(e.timeCreated),Date.now(),{addSuffix:!0})," ","by ",e.user.displayName]}),(0,r.tZ)(p.G7,{css:[p.l0.flex.grow(1),p.l0.align.start],children:(0,r.tZ)(Vf,{type:e.type,isCurrent:i})}),(0,r.tZ)(p.G7,{css:[p.l0.width(32),p.l0.align.end],children:(0,r.tZ)(Yf,{activityLogItem:e,isCurrent:i})})]},e.id)})):null,l?(0,r.tZ)(p.G7,{css:[p.l0.p(8),p.l0.center],children:(0,r.tZ)(me.Z,{})}):null,!l&&d?(0,r.tZ)(p.G7,{css:[p.l0.center,p.l0.pt(16)],children:(0,r.tZ)(p.hU,{tooltipHidden:!0,alt:"Show more",onClick:f,ref:h,children:(0,r.tZ)(Wa.Z,{})})}):null]})};function Jf(){var e=(0,le.Z)(["\n  fragment ReplLogLine on ReplLog {\n    __typename\n    timestamp\n    line\n  }\n"]);return Jf=function(){return e},e}function Qf(){var e=(0,le.Z)(["\n  query HostingDeploymentLogs($replId: String!, $deploymentId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        __typename\n        hostingDeploymentLogs(deploymentId: $deploymentId) {\n          ... on ReplLogs {\n            result {\n              ...ReplLogLine\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return Qf=function(){return e},e}var ep={},tp=(0,se.Ps)(Jf()),np=(0,se.Ps)(Qf(),tp);var rp=function(e){var t,n,i,o=e.hostedDeployment,a=o.id,l=function(e){var t=(0,ae.Z)({},ep,e);return ce.a(np,t)}({variables:{replId:o.currentBuild.repl.id,deploymentId:a}}),s=l.data,c=l.loading,u=l.error;return(0,r.tZ)(p.G7,{css:[p.l0.pt(16)],children:(0,r.BX)(p.G7,{css:[p.l0.minHeight(200)],children:[c?(0,r.tZ)(p.G7,{css:[p.l0.flex.grow(1),p.l0.flex.row,p.l0.align.center,p.l0.justify.center],children:(0,r.tZ)(me.Z,{size:24})}):null,"Repl"===(null===s||void 0===s||null===(t=s.repl)||void 0===t?void 0:t.__typename)&&"ReplLogs"===(null===s||void 0===s||null===(n=s.repl)||void 0===n||null===(i=n.hostingDeploymentLogs)||void 0===i?void 0:i.__typename)?(0,r.tZ)(ip,{logs:s.repl.hostingDeploymentLogs.result}):null,u?(0,r.tZ)(p.E_,{colorway:"warning",icon:(0,r.tZ)(Pn.Z,{}),text:u.message}):null]})})},ip=function(e){var t=e.logs;return(0,r.tZ)(p.G7,{css:[p.l0.overflow("auto")],children:(0,r.tZ)("table",{css:[{borderCollapse:"separate"}],children:(0,r.tZ)("tbody",{children:t.map((function(e,t){var n=[p.l0.font.code,p.l0.fontSize(12),{border:"1px solid transparent",padding:"6px"},t%2===0?[p.l0.backgroundColor.backgroundHigher,{borderTopColor:"".concat(p.TV.backgroundHighest)},{borderBottomColor:"".concat(p.TV.backgroundHighest)}]:null];return(0,r.BX)("tr",{children:[(0,r.tZ)("td",{css:[n,p.l0.color.accentPrimaryDefault],children:e.timestamp}),(0,r.tZ)("td",{css:[n],children:e.line})]},"logLine-".concat(t))}))})})})},op=n(88330),ap=n(12383),lp=n(31352),sp=n(77919),cp=n(43935),up=function(e){var t=e.hostedDeployment.currentBuild.repl.id,n=168,i=(0,op.Z)((0,ap.Z)(new Date),167);return(0,r.BX)(p.G7,{css:[p.l0.colWithGap(24),p.l0.pt(16),p.l0.pr(8)],children:[(0,r.tZ)(lp.Z,{replId:t,start:i,hours:n,deployment:!0}),(0,r.tZ)(sp.Z,{replId:t,metric:cp.Pc.Url,start:i,hours:n,deployment:!0,count:5}),(0,r.tZ)(sp.Z,{replId:t,metric:cp.Pc.Referrer,start:i,hours:n,deployment:!0,count:5})]})},dp=n(37806),fp=n(73515),pp=n(96357),hp=p.KD.div,mp=function(e){var t=e.id,n=e.title,o=e.information,l=e.children,s=(0,dn.H)()(t),c=(0,a.Z)(i.useState(!1),2),u=c[0],d=c[1],f=(0,a.Z)(i.useState(!1),2),h=f[0],m=f[1],v=i.useRef(!1);return i.useEffect((function(){v.current=!0;var e=setTimeout((function(){m(u)}),200);return function(){clearTimeout(e)}}),[u]),(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8)],children:[(0,r.tZ)(p.G7,{tag:"label",htmlFor:s,children:(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(8),p.l0.justify.start,p.l0.color.greyStronger],onMouseEnter:function(){return d(!0)},onMouseLeave:function(){return d(!1)},children:[(0,r.tZ)(p.xv,{children:n}),(0,r.BX)(fl.Z,{isOpen:h,onClickOutside:function(){return m(!1)},padding:8,children:[(0,r.tZ)(hp,{children:(0,r.tZ)($n.Z,{})}),(0,r.tZ)(p.G7,{css:[p.l0.maxWidth(240)],children:(0,r.tZ)(p.xv,{multiline:!0,children:o})})]})]})}),l]})},vp=n(87194),gp=n(75192),bp=n(50217);function Zp(e){return yp.apply(this,arguments)}function yp(){return(yp=(0,je.Z)((function(e){var t,n,r;return(0,Ne.__generator)(this,(function(i){if(t=e.replId,n=e.buildId,!qd.l)throw new Error("Expected apollo client");return r={url:"/data/repls/".concat(t,"/build/").concat(n,"/get_connection_metadata"),clientVersion:"dfd1286",flags:{}},[2,(0,bp.Z)(r)]}))}))).apply(this,arguments)}var xp=n(45528),wp=n(25108);function kp(e){var t=e.setBsodSentryEventId,n=(0,$l.Z)({onUnrecoverableError:function(e){if(!e.message.toLowerCase().includes("repl not found")){wp.error(e),qi.Tb(e);var n=(0,gp.Qw)(e,{tags:{hostingDeployments:"true"}});t(n)}}}),r=(0,vp.Z)({container:n});return{container:n,fs:r,dotReplit:(0,hr.Z)({container:n,fs:r})}}function Cp(e){return Sp.apply(this,arguments)}function Sp(){return(Sp=(0,je.Z)((function(e){var t,n,r,i,o;return(0,Ne.__generator)(this,(function(a){if(t=e.canonicalReplServices,n=e.container,r=e.buildId,!(i=t.container.getContext()))throw new Error("An unexpected error occurred. Please try again or contact support.");return o=(0,xp.U)({repl:{id:r,slug:r,language:i.repl.language,user:i.repl.user,currentUserPermissions:i.repl.currentUserPermissions},currentUser:i.currentUser,asViewer:!1}),n.connect({context:o,fetchConnectionMetadata:(0,je.Z)((function(){return(0,Ne.__generator)(this,(function(e){return[2,Zp({replId:i.repl.id,buildId:r})]}))}))}),[2]}))}))).apply(this,arguments)}var _p=function(){var e=(0,je.Z)((function(e){var t,n,r;return(0,Ne.__generator)(this,(function(i){switch(i.label){case 0:return[4,e.getConfig()];case 1:if(t=i.sent(),n=t.config,(r=t.error)===Gr.Yt.NotFound)return[2];if(r)throw new Error("Failed to get .replit config with Error: "+r);return[2,n]}}))}));return function(t){return e.apply(this,arguments)}}(),Tp=function(){var e=(0,je.Z)((function(e,t){var n;return(0,Ne.__generator)(this,(function(r){switch(r.label){case 0:return[4,e.writeFile(".env",cn.Z.serialize(cn.Z.parse(t.toString())))];case 1:if(n=r.sent().error)throw new Error("Failed to write envs to file with Error: "+n);return[2]}}))}));return function(t,n){return e.apply(this,arguments)}}(),Rp=function(){var e=(0,je.Z)((function(e){var t;return(0,Ne.__generator)(this,(function(n){switch(n.label){case 0:return[4,e.readFile(".env")];case 1:if((t=n.sent()).error===k.Df.NotFound)return[2];if(t.error)throw new Error("Failed to read envs from file with Error: "+t.error);return[2,t.content]}}))}));return function(t){return e.apply(this,arguments)}}(),Bp=function(){var e=(0,je.Z)((function(e){var t;return(0,Ne.__generator)(this,(function(n){switch(n.label){case 0:return[4,e.deleteFile(".env")];case 1:if((t=n.sent().error)===k.Df.NotFound)return[2];if(t)throw new Error("Failed to delete envs file with Error: "+t);return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),Ep=function(e){var t=e.hostedDeployment,n=(0,a.Z)((0,dp.yF)(),2),o=n[0],l=n[1],s=(0,a.Z)(i.useState(null),2),c=s[0],u=s[1],d=(0,a.Z)(i.useState(null),2),f=d[0],h=d[1],m=(0,a.Z)(i.useState(null),2),g=m[0],b=m[1],Z=(0,a.Z)(i.useState(null),2),y=Z[0],x=Z[1],w=(0,a.Z)(i.useState((function(){return kp({setBsodSentryEventId:function(e){return l(e)}})})),1)[0],C=(0,a.Z)(i.useState("ready"),2),S=C[0],_=C[1],T=(0,v.Z)();return i.useEffect((function(){if("ready"===S){_("reading"),Cp({canonicalReplServices:T,container:w.container,buildId:t.currentBuild.id}).catch((function(e){throw e}));var e=function(){var e=(0,je.Z)((function(){var e,t,n,r,i,o,a,l,s;return(0,Ne.__generator)(this,(function(c){switch(c.label){case 0:return[4,w.dotReplit.getConfig()];case 1:if(e=c.sent(),t=e.config,(n=e.error)===Gr.Yt.NotFound)return[2];if(n)throw new Error("Failed to get .replit config with Error: "+n);return r="",o=(0,pp.m)(null!==(i=t.run)&&void 0!==i?i:void 0),t.deployment&&(a=t.deployment,l=a.build,s=a.run,l&&(r=(0,pp.m)(l)),s&&(o=(0,pp.m)(s))),u(r),h(o),[2]}}))}));return function(){return e.apply(this,arguments)}}(),n=function(){var e=(0,je.Z)((function(){var e;return(0,Ne.__generator)(this,(function(t){switch(t.label){case 0:return[4,w.fs.readFile(".env")];case 1:if((e=t.sent()).error===k.Df.NotFound)return[2];if(e.error)throw new Error("Failed to read deployment repl envs with Error: "+e.error);return x(cn.Z.parse(e.content.toString())),[2]}}))}));return function(){return e.apply(this,arguments)}}();Promise.all([n(),e()]).then((function(){_("done")})).catch((function(e){b(e.message)}))}}),[t,T,w,S]),o?(0,r.tZ)(fp.Z,{eventId:o,devHide:function(){return l(null)}}):(0,r.BX)(p.G7,{css:[p.l0.py(16),p.l0.colWithGap(16)],children:[!g&&["ready","reading"].includes(S)?(0,r.tZ)(p.G7,{css:[p.l0.center,p.l0.p(12)],children:(0,r.tZ)(me.Z,{})}):(0,r.BX)(r.HY,{children:[(0,r.tZ)(mp,{id:"settingsBuildCommand",title:"Build command",information:"The build command is the command-line statement that compiles your app at build time.",children:(0,r.tZ)(p.II,{value:c||"No Build command set",css:[c?p.l0.color.greyStrongest:p.l0.color.greyDefault],disabled:!0})}),(0,r.tZ)(mp,{id:"settingsRunCommand",title:"Run command",information:"The run command is the command-line statement that launches your app after it has been built.",children:(0,r.tZ)(p.II,{value:f||"No Run command set",css:[f?p.l0.color.greyStrongest:p.l0.color.greyDefault],disabled:!0})}),(0,r.tZ)(mp,{id:"settingsEnvVars",title:"Environment variables",information:"Choose which environment variables should be used for your deployment.",children:y?Object.entries(y).map((function(e){var t=(0,a.Z)(e,2),n=t[0],i=t[1];return(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(12)],children:[(0,r.tZ)(p.II,{value:n,css:[p.l0.maxWidth("35%"),p.l0.color.greyStrongest],disabled:!0}),(0,r.tZ)(p.II,{value:i,css:[p.l0.color.greyStrongest],disabled:!0})]},n)})):(0,r.tZ)(p.II,{value:"No Environment variables set",css:[p.l0.color.greyDefault],disabled:!0})})]}),g?(0,r.tZ)(p.G7,{css:[p.l0.center,p.l0.align.stretch],children:(0,r.tZ)(p.E_,{colorway:"warning",icon:(0,r.tZ)(Pn.Z,{}),text:g})}):null]})},Gp=n(62991),Dp=n.n(Gp),Ip=n(94158),jp=function(e){return"string"===typeof e},Np=function(e){var t=e.type,n=e.value,i=e.loading,o=e.disabled,a=e.onChange,l=jp(n);return(0,r.BX)(r.HY,{children:[l?null:(0,r.tZ)(p.zx,{onClick:function(){return a("")},text:i?"":"Add ".concat(t," command"),iconLeft:i?(0,r.tZ)(me.Z,{}):(0,r.tZ)(Mn.Z,{}),disabled:o}),l?(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(12)],children:[(0,r.tZ)(p.II,{value:n,onChange:function(e){return a(e.target.value)},css:[p.l0.color.greyStrongest],disabled:o}),(0,r.tZ)(p.hU,{css:[p.gU.outlined,p.l0.p(16)],onClick:function(){return a(null)},alt:"Remove ".concat(t," command"),disabled:o,children:(0,r.tZ)(Ip.Z,{})})]}):null]})},Lp=n(14840),zp=function(e){var t=e.stage,n=e.activeStage;return t===e.erroredStage?(0,r.tZ)(ar.Warning,{}):0===n?(0,r.tZ)(p.xv,{}):t<n?(0,r.tZ)(ar.Check,{}):t===n?(0,r.tZ)(me.Z,{}):(0,r.tZ)(ar.Clock,{})},Pp=function(e){var t=e.stage,n=e.activeStage;return t===e.erroredStage?"accentNegativeDefault":0===n?"greyDefault":t<n?"accentPositiveDefault":t===n?"accentPrimaryDefault":"backgroundHigher"},Ap=function(e){var t=e.stage,n=e.activeStage,i=e.text,o=e.erroredStage,a=e.lastStage,l=void 0!==a&&a;return(0,r.BX)(r.HY,{children:[(0,r.tZ)(p.DR,{text:i,css:[{backgroundColor:Lp.TV[Pp({stage:t,activeStage:n,erroredStage:o})]}],iconRight:(0,r.tZ)(zp,{stage:t,activeStage:n,erroredStage:o})}),l?null:(0,r.tZ)("div",{css:{width:60,height:1,backgroundColor:Lp.TV[Pp({stage:t,activeStage:n,erroredStage:o})]}})]})},Xp=n(23697),Up=n(15794),Fp=n(11559),Mp=n(64926),Wp=n(52867),Op=n(48920),Hp=n(39791);function Vp(){return(Vp=(0,je.Z)((function(e){var t,n,r,i,o,a;return(0,Ne.__generator)(this,(function(l){switch(l.label){case 0:return t=e.config,n=e.services,(r=e.onStageTerminalOutput)("Build: ".concat(t.buildId," \n\r")),[4,(0,Hp.Z)(n.container,n.dotReplit)];case 1:return l.sent()?(i=(0,Mp.Z)({container:n.container,dotReplit:n.dotReplit}),r("Installing packages...\n\r"),i.onOutput(r),[4,i.installPackages()]):[3,3];case 2:if(!l.sent())throw new Error("Failed to install packages\n\r");l.label=3;case 3:return t.buildCommand?(o=(0,Fp.Z)({container:n.container}),r("Starting Build...\n\r"),o.onOutput(r),[4,o.request({args:["sh","-c",t.buildCommand]})]):(r("Skipping Build as no Build command set...\n\r"),[2]);case 4:if(a=l.sent().error)throw new Error(a);return[2]}}))}))).apply(this,arguments)}function qp(){return qp=(0,je.Z)((function(e){var t,n,r,i,o,a,l;return(0,Ne.__generator)(this,(function(s){switch(s.label){case 0:return t=e.config,n=e.services,r=e.onStageTerminalOutput,t.runCommand?[4,n.dotReplit.updateDotReplit([{op:"remove",path:"interpreter"},(0,fr.KQ)(t.runCommand)])]:(r("Skipping Run as no Run command set...\n\r"),[2]);case 1:if(i=s.sent(),o=i.error,a=i.errorMessage,o)throw new Error("".concat(o,": ").concat(a));return l=(0,Wp.Z)({container:n.container,beforeRun:(0,je.Z)((function(){return(0,Ne.__generator)(this,(function(e){return[2]}))}))}),r("Starting Run...\n\r"),l.onOutput((function(e){var t=e;e.includes("Hint: hit control+c anytime to enter REPL.")&&(t=e.replace("Hint: hit control+c anytime to enter REPL.","")),r(t)})),[4,new Promise((function(e,t){r("Listening for container port to open...\n\r"),l.getRunState()===Op.A.IDLE&&l.run();var i=!1;l.onStateChanged((function(e){if(e===Op.A.IDLE){if(i)return t(new Error("Run command failed"));l.run(),i=!0}}));var o=setTimeout((function(){t(new Error("Opening container port timed out"))}),3e4);n.container.onPortOpened((function(){clearTimeout(o),setTimeout((function(){if(l.getRunState()!==Op.A.RUNNING)return t(new Error("Run command failed"));e(null)}),1e3)}))}))];case 2:return s.sent(),[2]}}))})),qp.apply(this,arguments)}var $p=function(){var e=(0,je.Z)((function(e){var t,n;return(0,Ne.__generator)(this,(function(r){return t=e.onStageComplete,n=e.onStageError,function(e){return qp.apply(this,arguments)}(e).then((function(){t({type:"next"})})).catch((function(e){return n(e.message)})),[2]}))}));return function(t){return e.apply(this,arguments)}}();function Yp(){return(Yp=(0,je.Z)((function(e){var t,n,r;return(0,Ne.__generator)(this,(function(i){switch(i.label){case 0:return t=e.config,(n=e.onStageTerminalOutput)("Sending request to server...\n\r"),[4,(0,Up.uz)("/deployments/check/".concat(t.buildId),{})];case 1:if(!("deploymentStatus"in(r=i.sent())))throw new Error("Error expected deploymentStatus");if(n("Server returned status: ".concat(r.deploymentStatus,"\n\r")),200!==r.deploymentStatus)throw new Error("Failed to get HTTP 200 OK success status response code");return[2]}}))}))).apply(this,arguments)}var Kp=function(){var e=(0,je.Z)((function(e){var t,n;return(0,Ne.__generator)(this,(function(r){return t=e.onStageComplete,n=e.onStageError,function(e){return Yp.apply(this,arguments)}(e).then((function(){t({type:"next"})})).catch((function(e){return n(e.message)})),[2]}))}));return function(t){return e.apply(this,arguments)}}();function Jp(){return(Jp=(0,je.Z)((function(e){var t,n,r,i,o,a,l,s,c;return(0,Ne.__generator)(this,(function(u){switch(u.label){case 0:if(t=e.config,n=t.buildId,r=t.targetDeploymentId,i=e.hostedDeployment,o=e.deployHostingBuild,(a=e.onStageTerminalOutput)("Promoting build...\n\r"),!r)throw new Error("Expected a target deployment id");return[4,o({variables:{input:{buildId:n,targetDeploymentId:r}}})];case 1:switch(c=u.sent(),null===(l=c.data)||void 0===l||null===(s=l.deployHostingBuild)||void 0===s?void 0:s.__typename){case"DeployHostingBuildResult":return a("Restarting server...\n\r"),a("Deployment successful!\n\r"),[2,{id:r,domains:(null===i||void 0===i?void 0:i.domains)||[],currentBuild:c.data.deployHostingBuild.deployment.currentBuild}];case"NotFoundError":case"UnauthorizedError":case"UserError":throw new Error(c.data.deployHostingBuild.message);default:throw new Error("Unexpected typename")}return[2]}}))}))).apply(this,arguments)}var Qp=function(){var e=(0,je.Z)((function(e){var t,n;return(0,Ne.__generator)(this,(function(r){return t=e.onStageComplete,n=e.onStageError,function(e){return Jp.apply(this,arguments)}(e).then((function(e){return t({type:"deployed",payload:e})})).catch((function(e){return n(e.message)})),[2]}))}));return function(t){return e.apply(this,arguments)}}();function eh(){var e=(0,le.Z)(["\n  mutation CreateHostingDeployment($input: CreateHostingDeploymentInput!) {\n    createHostingDeployment(input: $input) {\n      ... on CreateHostingDeploymentResult {\n        deployment {\n          id\n          currentBuild {\n            id\n          }\n        }\n        firstBuild {\n          id\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return eh=function(){return e},e}function th(){var e=(0,le.Z)(["\n  mutation DeployHostingBuild($input: DeployHostingBuildInput!) {\n    deployHostingBuild(input: $input) {\n      ... on DeployHostingBuildResult {\n        deployment {\n          id\n          currentBuild {\n            ...CurrentHostingBuild\n          }\n          repl {\n            id\n            url\n          }\n          activityLogs {\n            items {\n              id\n              type\n              build {\n                id\n                description\n                status\n                repl {\n                  id\n                  url\n                }\n              }\n              deployment {\n                id\n              }\n            }\n            pageInfo {\n              hasNextPage\n              nextCursor\n            }\n          }\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return th=function(){return e},e}function nh(){var e=(0,le.Z)(["\n  mutation FailHostingBuild($input: FailHostingBuildInput!) {\n    failHostingBuild(input: $input) {\n      ... on FailHostingBuildResult {\n        deployment {\n          id\n          currentBuild {\n            ...CurrentHostingBuild\n          }\n          repl {\n            id\n            url\n          }\n          activityLogs {\n            items {\n              id\n              type\n              build {\n                id\n                description\n                status\n                repl {\n                  id\n                  url\n                }\n              }\n              deployment {\n                id\n              }\n            }\n            pageInfo {\n              hasNextPage\n              nextCursor\n            }\n          }\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return nh=function(){return e},e}var rh={},ih=(0,se.Ps)(eh());var oh=(0,se.Ps)(th(),Bf);var ah=(0,se.Ps)(nh(),Bf);var lh,sh,ch=[{id:0,title:"Options",type:"component",func:function(e){var t=e.config,n=e.services,o=e.hostedDeployment,l=e.canonicalReplServices,s=e.onStageComplete,c=e.onStageError,u=(0,a.Z)((0,dp.yF)(),2),d=u[0],f=u[1],h=(0,a.Z)(i.useState(null),2),m=h[0],v=h[1],g=(0,a.Z)(i.useState(null),2),b=g[0],Z=g[1],y=(0,a.Z)(i.useState("dev"),2),x=y[0],w=y[1],S=(0,a.Z)(i.useState(!0),2),_=S[0],T=S[1],R=(0,a.Z)(i.useState("ready"),2),B=R[0],E=R[1],G=(0,a.Z)(i.useState((function(){return kp({setBsodSentryEventId:function(e){return f(e)}})})),1)[0],D=(0,C.Z)();i.useEffect((function(){if("ready"===B){E("syncing");var e=function(){var e=(0,je.Z)((function(){var e,r,i,a;return(0,Ne.__generator)(this,(function(s){switch(s.label){case 0:return"redeploy"===t.deployType&&o?(Cp({canonicalReplServices:l,container:G.container,buildId:o.currentBuild.id}).catch((function(e){throw e})),[4,G.fs.readFile(".env")]):[2];case 1:return e=s.sent(),[4,l.fs.readFile(".env")];case 2:return r=s.sent(),e.error||r.error?e.error===k.Df.NotFound&&r.error===k.Df.NotFound?[2]:e.error!==k.Df.NotFound||r.error?e.error||r.error!==k.Df.NotFound?[3,4]:[4,Tp(n.fs,e.content)]:(w("diff"),[2]):[3,5];case 3:case 6:return s.sent(),w("diff"),[2];case 4:throw new Error("Failed with unexpected Error: "+(null===e||void 0===e?void 0:e.error)+", "+(null===r||void 0===r?void 0:r.error));case 5:return i=cn.Z.parse(r.content.toString()),a=cn.Z.parse(e.content.toString()),Dp()(i,a)?[2]:[4,Tp(n.fs,e.content)]}}))}));return function(){return e.apply(this,arguments)}}(),r=function(){var e=(0,je.Z)((function(){var e,t,n,r,i,o,a,s,c;return(0,Ne.__generator)(this,(function(u){switch(u.label){case 0:return[4,_p(l.dotReplit)];case 1:return(e=u.sent())?(t=null,n=null,e.deployment?(r=e.deployment,i=r.build,o=r.run,i&&(t=(0,pp.m)(i)),o&&(n=(0,pp.m)(o)),[3,4]):[3,2]):[2];case 2:return[4,l.dotReplit.getRunConfig()];case 3:s=u.sent(),(null===(a=s.interp)||void 0===a?void 0:a.command)?n=(0,pp.m)(null===(c=s.interp)||void 0===c?void 0:c.command):s.run?n=(0,pp.m)(s.run.run):e.run&&(n=(0,pp.m)(s.run)),u.label=4;case 4:return[2,{buildCmd:t,runCmd:n}]}}))}));return function(){return e.apply(this,arguments)}}(),i=function(){var t=(0,je.Z)((function(){var t,n,i;return(0,Ne.__generator)(this,(function(o){switch(o.label){case 0:return[4,e()];case 1:return o.sent(),[4,r()];case 2:return(t=o.sent())&&(n=t.runCmd,i=t.buildCmd,v(i),Z(n)),[2]}}))}));return function(){return t.apply(this,arguments)}}();i().then((function(){E("done"),T(!1)})).catch((function(e){c(e.message),T(!1)}))}}),[t,o,l,n,G,B,E,c]);var I=function(){var e=(0,je.Z)((function(){var e,t,r,i,o,a;return(0,Ne.__generator)(this,(function(u){switch(u.label){case 0:return E("deploying"),e={buildCommand:void 0,runCommand:void 0,autoPromote:!1},t=[],jp(m)?(e.buildCommand=m,t.push({path:"deployment/build",op:"add",value:JSON.stringify(["sh","-c",m])})):t.push({path:"deployment/build",op:"remove"}),jp(b)?(e.runCommand=b,t.push({path:"deployment/run",op:"add",value:JSON.stringify(["sh","-c",b])})):t.push({path:"deployment/run",op:"remove"}),0===t.length?[3,2]:[4,l.dotReplit.updateDotReplit(t)];case 1:if(r=u.sent(),i=r.error)return c(i),[2];u.label=2;case 2:if("dev"!==x)return[3,9];u.label=3;case 3:return u.trys.push([3,8,,9]),[4,Bp(n.fs)];case 4:return u.sent(),[4,Rp(l.fs)];case 5:return(o=u.sent())?[4,Tp(n.fs,o)]:[3,7];case 6:u.sent(),u.label=7;case 7:return[3,9];case 8:return a=u.sent(),c(a.message),[2];case 9:return s({type:"config_set",payload:e}),[2]}}))}));return function(){return e.apply(this,arguments)}}(),j=(0,dn.H)();if(d)return(0,r.tZ)(fp.Z,{eventId:d,devHide:function(){return f(null)}});var N=_||"deploying"===B;return(0,r.BX)(p.G7,{css:[p.l0.colWithGap(16)],children:[(0,r.tZ)(mp,{id:"buildCommand",title:"Build command",information:"The build command is the command-line statement that compiles your app at build time.",children:(0,r.tZ)(Np,{type:"Build",value:m,onChange:v,loading:_,disabled:N})}),(0,r.tZ)(mp,{id:"runCommand",title:"Run command",information:"The run command is the command-line statement that launches your app after it has been built.",children:(0,r.tZ)(Np,{type:"Run",value:b,onChange:Z,loading:_,disabled:N})}),(0,r.tZ)(mp,{id:"envVars",title:"Environment variables",information:"Choose which environment variables should be used for your deployment.",children:(0,r.BX)(p.hE,{tag:"fieldset",id:j("envVars"),name:j("envVars"),value:x,onChange:function(e){return w(e)},row:!0,css:[p.l0.width("100%")],disabled:N,children:[(0,r.tZ)(p.rK,{id:j("false"),value:"dev",text:"Same as development"}),(0,r.tZ)(p.rK,{id:j("true"),value:"diff",text:"Different from development"})]})}),"diff"===x?(0,r.tZ)(p.G7,{css:[p.l0.position.relative,{minHeight:40},N&&{pointerEvents:"none",opacity:.75}],children:(0,r.tZ)(M.Z,{readRawEnv:function(){return n.fs.readFile(".env")},writeRawEnv:function(e){return n.fs.writeFile(".env",e)},activeFile:D})}):null,(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(8),p.l0.pt(16)],children:[_?null:(0,r.tZ)(p.zx,{text:"Cancel",onClick:function(){return s({type:"canceled"})},disabled:N}),(0,r.tZ)(p.G7,{css:[p.l0.flex.grow(1)],children:(0,r.tZ)(p.zx,{colorway:"primary",onClick:I,text:_||"deploying"===B?"":"Deploy",iconLeft:_||"deploying"===B?(0,r.tZ)(me.Z,{}):(0,r.tZ)(ar.Deploy,{}),disabled:N})})]})]})}},{id:1,title:"Build",type:"function",func:function(e){var t=e.onStageComplete,n=e.onStageError;(function(e){return Vp.apply(this,arguments)})(e).then((function(){t({type:"next"})})).catch((function(e){n(e.message)}))}},{id:2,title:"Run",type:"function",func:$p},{id:3,title:"Check",type:"function",func:Kp},{id:4,title:"Promote",type:"function",func:Qp}],uh=function(e){var t=e.deployType,n=e.replId,o=e.buildId,l=e.targetDeploymentId,s=e.hostedDeployment,c=e.onStageEvent,u=(0,a.Z)((0,dp.yF)(),2),d=u[0],f=u[1],h=(0,a.Z)(i.useState({deployType:t,buildId:o,targetDeploymentId:l}),2),m=h[0],g=h[1],b=(0,a.Z)(i.useState(0),2),Z=b[0],y=b[1],x=(0,a.Z)(i.useState(null),2),w=x[0],k=x[1],C=(0,a.Z)(i.useState(null),2),S=C[0],_=C[1],T=(0,a.Z)(i.useState((function(){return kp({setBsodSentryEventId:function(e){return f(e)}})})),1)[0],R=(0,a.Z)((0,Xp.Z)(),2),B=R[0],E=R[1],G=(0,a.Z)(function(e){var t=(0,ae.Z)({},rh,e);return Le.D(ih,t)}(),1)[0],D=(0,a.Z)(function(e){var t=(0,ae.Z)({},rh,e);return Le.D(oh,t)}(),1)[0],I=(0,a.Z)(function(e){var t=(0,ae.Z)({},rh,e);return Le.D(ah,t)}(),1)[0],j=(0,v.Z)(),N=i.useCallback(function(){var e=(0,je.Z)((function(e,t){var n,r,i,a;return(0,Ne.__generator)(this,(function(l){switch(l.label){case 0:return _({stageId:t||0,message:e}),c({type:"failed"}),m.targetDeploymentId?[4,I({variables:{input:{buildId:o,targetDeploymentId:m.targetDeploymentId}},onCompleted:function(e,t){var n=e.failHostingBuild;if(null===t||void 0===t?void 0:t.client){if("FailHostingBuildResult"!==(null===n||void 0===n?void 0:n.__typename))return;t.client.writeQuery({query:Ef,data:{repl:{hostingDeployment:n.deployment}}})}}})]:[3,2];case 1:if(r=l.sent(),i=r.data,a=r.errors,!i||a)return N("An unexpected error occurred. Please try again or contact support."),[2];switch(null===i||void 0===i||null===(n=i.failHostingBuild)||void 0===n?void 0:n.__typename){case"FailHostingBuildResult":break;case"NotFoundError":case"UnauthorizedError":case"UserError":throw new Error(i.failHostingBuild.message);default:throw new Error("Unexpected typename")}l.label=2;case 2:return[2]}}))}));return function(t,n){return e.apply(this,arguments)}}(),[o,m.targetDeploymentId,I,_,c]),L=i.useCallback((0,je.Z)((function(){var e,t,r,i,o;return(0,Ne.__generator)(this,(function(a){switch(a.label){case 0:return[4,G({variables:{input:{replId:n,buildId:m.buildId}}})];case 1:if(t=a.sent(),r=t.data,i=t.errors,!r||i)return N("An unexpected error occurred. Please try again or contact support."),[2];switch(null===(e=r.createHostingDeployment)||void 0===e?void 0:e.__typename){case"UnauthorizedError":case"UserError":return N(r.createHostingDeployment.message),[2];case"CreateHostingDeploymentResult":return o=r.createHostingDeployment.deployment.id,c({type:"target_deployment_created",payload:{targetDeploymentId:o}}),[2,o]}return[2]}}))})),[n,m.buildId,G,c,N]),z=i.useCallback(function(){var e=(0,je.Z)((function(e){var t,n;return(0,Ne.__generator)(this,(function(r){switch(r.label){case 0:switch(e.type){case"config_set":return[3,1];case"next":return[3,4];case"deployed":return[3,5]}return[3,6];case 1:return(n=m.targetDeploymentId)?[3,3]:[4,L()];case 2:n=r.sent(),r.label=3;case 3:return(t=n)?(g((function(n){return(0,tt.Z)((0,ae.Z)({},n,e.payload),{targetDeploymentId:t})})),y((function(e){return e+1})),[3,6]):[2];case 4:case 5:return y((function(e){return e+1})),[3,6];case 6:return c(e),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),[c,L,m]);i.useEffect((function(){Cp({canonicalReplServices:j,container:T.container,buildId:o}).catch((function(e){throw e}))}),[o,j,T.container]),i.useEffect((function(){if(!S&&!(w&&w.id===Z||Z>ch.length)){var e=ch[Z];e&&("function"===e.type&&e.func({config:m,services:T,canonicalReplServices:j,hostedDeployment:s,onStageComplete:z,onStageTerminalOutput:function(e){null!==B&&B.write(e.replace(/\n/g,"\n\r"))},onStageError:function(t){null!==B&&(B.write("\x1b[31m".concat(t.replace(/\n/g,"\n\r"))),N("An error occurred during "+e.title,e.id))},deployHostingBuild:D}),k(e))}}),[S,w,Z,T,j,s,m,B,z,D,N]);var P,A=w&&"component"===w.type?w.func:null;return d?(0,r.tZ)(fp.Z,{eventId:d,devHide:function(){return f(null)}}):(0,r.BX)(p.G7,{css:[p.l0.colWithGap(12)],children:[Z>0?(0,r.tZ)(p.G7,{css:[p.l0.rowWithGap(0),p.l0.align.center,p.l0.justify.center,p.l0.mb(16)],children:ch.filter((function(e){return 0!==e.id})).map((function(e){var t=e.id,n=e.title;return(0,r.tZ)(Ap,{stage:t,text:n,activeStage:Z,lastStage:4===t,erroredStage:null!==(P=null===S||void 0===S?void 0:S.stageId)&&void 0!==P?P:void 0},t)}))}):null,(0,r.BX)(p.G7,{children:[A?(0,r.tZ)(A,{config:m,services:T,canonicalReplServices:j,hostedDeployment:s,onStageComplete:z,onStageError:function(e){return N(e,null===w||void 0===w?void 0:w.id)},deployHostingBuild:D}):null,(0,r.tZ)(p.G7,{css:[w&&"function"===w.type?p.l0.display.flex:p.l0.display.none,p.l0.py(12),p.l0.pl(16),p.l0.borderRadius(8),p.l0.overflow("hidden"),{border:"1px solid var(--outline-dimmest)"}],children:(0,r.tZ)(p.KD.div,{css:[p.l0.width("100%"),p.l0.maxWidth("100%")],ref:E})})]}),S?(0,r.tZ)(p.G7,{css:[p.l0.center,p.l0.align.stretch],children:(0,r.tZ)(p.E_,{colorway:"warning",icon:(0,r.tZ)(Pn.Z,{}),text:S.message})}):null]})},dh=n(88808),fh=n(14631),ph=n(8236),hh=(lh={},(0,o.Z)(lh,el.Fe.Building,{title:"Building",color:p.TV.orangeStronger}),(0,o.Z)(lh,el.Fe.Failed,{title:"Failed",color:p.TV.accentNegativeDefault}),(0,o.Z)(lh,el.Fe.Success,{title:"Success",color:p.TV.accentPositiveDefault}),lh),mh=function(e){var t=e.status,n=t in hh?hh[t]:{title:"",color:p.TV.greyDefault},i=n.title,o=n.color;return(0,r.BX)(p.G7,{css:[p.l0.align.center,p.l0.rowWithGap(8),{textTransform:"capitalize"}],children:[(0,r.tZ)(p.G7,{as:"span",css:[p.l0.width("8px"),p.l0.height("8px"),p.l0.borderRadius("full"),{backgroundColor:o,boxShadow:"0 0 12px ".concat(o)}]}),(0,r.tZ)("div",{className:"always-on-indicator","aria-label":i,"data-microtip-position":"bottom",role:"tooltip"}),(0,r.tZ)(p.xv,{children:i})]})},vh=function(e){var t=e.title,n=e.fc,i=e.icon,o=e.onClickBack;return(0,r.BX)(p.G7,{children:[(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(8),p.l0.align.center],children:[(0,r.tZ)(p.hU,{size:24,alt:"Back",css:[p.gU.outlined,p.l0.p(16),p.l0.mr(8)],onClick:o,children:(0,r.tZ)(Bt.Z,{})}),(0,r.tZ)(i,{}),(0,r.tZ)(p.xv,{variant:"subheadDefault",children:t})]}),(0,r.tZ)(n,(0,ae.Z)({},e))]})},gh=function(e){var t=e.hostedDeployment,n=[{href:"https://".concat(t.id,".id.repl.co"),private:!0}].concat((0,ie.Z)(t.domains.filter((function(e){return e.hosting_deployment_id===t.id})).map((function(e){return{href:"https://".concat(e.domain),private:!1,state:"verified"!==e.state?e.state:void 0}}))));return(0,r.tZ)(p.G7,{css:[p.l0.colWithGap(8),p.l0.flex.growAndShrink(1)],children:n.map((function(e,t){return(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(8),p.l0.align.center],children:[(0,r.tZ)(p.xv,{css:[p.l0.flex.shrink(1)],children:(0,r.tZ)("a",{href:e.href,target:"_blank",css:[p.l0.color.foregroundDefault],children:e.href})}),e.private?(0,r.tZ)(q.Z,{color:p.TV.foregroundDefault}):null,(0,r.tZ)("a",{href:e.href,target:"_blank",css:[p.l0.display.flex,p.l0.align.center],children:(0,r.tZ)(Kn.Z,{color:p.TV.foregroundDefault})}),e.state?(0,r.BX)(p.xv,{children:["(",e.state,")"]}):null]},"domains-".concat(t))}))})},bh=function(e){var t=e.label,n=e.children;return(0,r.BX)(p.G7,{css:[p.l0.flex.row,p.l0.align.baseline,p.l0.mb(12)],children:[(0,r.tZ)(p.G7,{css:p.l0.minWidth(100),children:(0,r.tZ)(p.xv,{css:[p.l0.color.greyStronger],children:t})}),n]})};!function(e){e.Ready="ready",e.BuildCreated="buildCreated",e.BuildFailed="buildFailed",e.Redeploying="redeploying",e.Redeployed="redeployed"}(sh||(sh={}));var Zh,yh=function(e){var t=e.replId,n=e.hostedDeployment,o=e.onDeployed,l=(0,a.Z)(i.useState(!1),2),s=l[0],c=l[1],u=(0,a.Z)(i.useState(null),2),d=u[0],f=u[1],h=(0,a.Z)(i.useState(sh.Ready),2),m=h[0],v=h[1],g=(0,a.Z)(i.useState(null),2),b=g[0],Z=g[1],y=(0,a.Z)(i.useState(null),2),x=y[0],w=y[1],k=(0,a.Z)(Df(),1)[0],C=(0,Xi.D)({controlName:"flag-analytics-v2"}),S=[[{id:1,title:"Domains",icon:dh.Z,fc:Nf},!0],[{id:2,title:"History",icon:Rt.Z,fc:Kf},!0],[{id:3,title:"Analytics",icon:fh.Z,fc:up},C],[{id:4,title:"Logs",icon:Pr.Z,fc:rp},!0],[{id:5,title:"Settings",icon:J.Z,fc:Ep},!0]],_=function(){var e=(0,je.Z)((function(){var e,r,i,o,a;return(0,Ne.__generator)(this,(function(l){switch(l.label){case 0:return[sh.BuildCreated,sh.Redeploying].includes(m)?[2]:([sh.Ready,sh.Redeployed,sh.BuildFailed].includes(m)&&w(null),c(!0),[4,k({variables:{input:{replId:t,description:""}}})]);case 1:if(r=l.sent(),i=r.data,o=r.errors,!i||o)return f("An unexpected error occurred. Please try again or contact support."),c(!1),[2];switch(null===(e=i.createHostingBuild)||void 0===e?void 0:e.__typename){case"UnauthorizedError":case"NotFoundError":f(i.createHostingBuild.message);break;case"HostingBuild":a=i.createHostingBuild.id,w({deployType:"redeploy",buildId:a,targetDeploymentId:n.id}),v(sh.BuildCreated)}return c(!1),[2]}}))}));return function(){return e.apply(this,arguments)}}(),T=[sh.Redeploying].includes(m),R=x&&[sh.BuildCreated,sh.BuildFailed,sh.Redeploying,sh.Redeployed].includes(m),B=[sh.Ready,sh.Redeployed,sh.BuildFailed].includes(m);return(0,r.BX)(p.G7,{css:[p.l0.colWithGap(12)],children:[(0,r.BX)(p.G7,{children:[b?null:(0,r.tZ)(p.G7,{css:[p.l0.rowWithGap(8),p.l0.align.center,p.l0.overflowX("scroll"),p.l0.pb(12),p.l0.px(8),{margin:"0 calc(".concat(p.TV.space8," * -1)")}],children:S.map((function(e){var t=(0,a.Z)(e,2),n=t[0],i=n.id,o=n.title,l=n.icon,s=n.fc,c=t[1];return c?(0,r.tZ)(p.zx,{text:o,iconLeft:(0,r.tZ)(l,{}),onClick:function(){Z([{id:i,title:o,icon:l,fc:s},c])},disabled:T},i):null}))}),b&&b[1]?(0,r.tZ)(vh,(0,tt.Z)((0,ae.Z)({},b[0]),{hostedDeployment:n,onClickBack:function(){v((function(e){return[sh.Redeployed,sh.BuildFailed].includes(e)?sh.Ready:e})),Z(null)}})):null,b?null:(0,r.BX)(p.G7,{css:[p.l0.colWithGap(12)],children:[(0,r.BX)(p.G7,{css:[{borderBottom:"1px solid ".concat(p.TV.outlineDimmest)}],children:[(0,r.BX)(bh,{label:"Deployed",children:[(0,If.Z)(new Date(n.currentBuild.timeCreated),Date.now(),{addSuffix:!0})," ","by ",n.currentBuild.user.displayName]}),(0,r.tZ)(bh,{label:"Status",children:(0,r.tZ)(mh,{status:n.currentBuild.status})}),(0,r.tZ)(bh,{label:"Domains",children:(0,r.tZ)(gh,{hostedDeployment:n})}),(0,r.tZ)(bh,{label:"Resources",children:ph.Cw[n.currentBuild.repl.guaranteedProvisioningSku]})]}),R?(0,r.tZ)(uh,(0,tt.Z)((0,ae.Z)({replId:t},x),{onStageEvent:function(e){switch(e.type){case"config_set":v(sh.Redeploying);break;case"deployed":v(sh.Redeployed),o(e.payload);break;case"failed":v(sh.BuildFailed);break;case"canceled":v(sh.Ready)}},hostedDeployment:n})):null,B?(0,r.tZ)(p.zx,{onClick:_,text:"Redeploy",iconLeft:s?(0,r.tZ)(me.Z,{}):(0,r.tZ)(ar.Deploy,{})}):null]})]}),d?(0,r.tZ)(p.G7,{css:[p.l0.center,p.l0.align.stretch],children:(0,r.tZ)(p.E_,{colorway:"warning",icon:(0,r.tZ)(Pn.Z,{}),text:d})}):null]})},xh=n(38164),wh=n(64759),kh=n(13331),Ch=[{boost:ph.T6.Standard,alwaysOn:!1,concurrency:"limited",disabled:!0,monthlyCycles:0,name:"Basic",color:p.TV.backgroundHighest,selected:!1},{boost:ph.T6.Boosted1,alwaysOn:!0,concurrency:"unlimited",disabled:!1,monthlyCycles:600,name:"Standard",color:p.TV.blueStrongest,selected:!0},{boost:ph.T6.Boosted2,alwaysOn:!0,concurrency:"unlimited",disabled:!0,monthlyCycles:2100,name:"Performance",color:p.TV.yellowStrongest,selected:!1},{boost:ph.T6.Boosted3,alwaysOn:!0,concurrency:"unlimited",disabled:!0,monthlyCycles:4500,name:"Professional",color:p.TV.orangeStrongest,selected:!1},{boost:ph.T6.Boosted4,alwaysOn:!0,concurrency:"unlimited",disabled:!0,monthlyCycles:10500,name:"Shipping Season",color:p.TV.orangeStronger,selected:!1}],Sh=function(e){var t=e.enabled,n=e.selected,i=t?"Always On":"Wake-up required",o=t?(0,r.tZ)(ar.SmallCircle,{}):void 0;return(0,r.tZ)(p.DR,{text:i,iconLeft:o,colorway:n?"primary":void 0})},_h=function(e){var t,n=e.boost,i=e.selected,o=e.color,a=n===ph.T6.Standard?void 0:(0,r.tZ)(kh.Z,{});switch(n){case ph.T6.Standard:t="No Boost";break;case ph.T6.Boosted1:t="4x Boost";break;case ph.T6.Boosted2:t="8x Boost";break;case ph.T6.Boosted3:t="16x Boost";break;case ph.T6.Boosted4:t="32x Boost"}return(0,r.tZ)(p.DR,{text:t,iconLeft:a,css:{backgroundColor:i?o:void 0,color:i?"#0F1726":void 0}})},Th=function(e){var t=e.selected,n=e.mode,i="limited"===n?"Limited":"Unlimited",o="limited"===n?void 0:(0,r.tZ)(wh.Z,{}),a="limited"===n?"Only 1 limited Repl can run at a time":"This Repl will not be subject to concurrent run limits";return(0,r.tZ)(p.u,{tooltip:a,children:(0,r.tZ)(p.DR,{text:i,iconLeft:o,colorway:t?"primary":void 0})})},Rh=function(e){var t=e.onContinue,n=e.loading;return(0,r.BX)(p.G7,{css:[p.l0.colWithGap(16)],children:[(0,r.tZ)(p.G7,{css:[p.l0.colWithGap(8)],children:Ch.map((function(e,t){return(0,r.BX)(p.Tg,{background:"higher",css:[p.l0.borderRadius(12),p.l0.colWithGap(8),p.l0.px(12),p.l0.py(8),{border:e.selected?"1px solid "+p.TV.accentPrimaryStronger:"1px solid transparent"},e.disabled?[p.l0.color.foregroundDimmest]:null,e.selected?[p.l0.backgroundColor.accentPrimaryDimmest]:null],children:[(0,r.BX)(p.G7,{css:[p.l0.flex.row],children:[(0,r.tZ)(p.G7,{css:[p.l0.flex.grow(1),p.l0.colWithGap(8)],children:(0,r.tZ)(p.xv,{css:[p.l0.fontWeight.medium],children:e.name})}),(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(4)],children:[(0,r.BX)(p.G7,{css:[p.l0.flex.shrink(1),p.l0.rowWithGap(2),p.l0.align.center,p.l0.position.relative,e.selected?p.l0.color.accentPrimaryStrongest:null,e.selected&&{"&:after":[p.l0.position.absolute,p.l0.top("50%"),p.l0.left(0),p.l0.width("100%"),{borderBottom:"".concat(p.TV.borderWidthDefault," solid ").concat(p.TV.foregroundDimmer),content:'""'}]}],children:[(0,r.tZ)(xh.Z,{}),(0,r.BX)(p.xv,{css:[p.l0.fontWeight.normal],children:[e.monthlyCycles.toLocaleString(),"/month"]})]}),e.selected?(0,r.tZ)(p.xv,{css:[p.l0.fontWeight.medium],children:"FREE"}):null]})]}),(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(4)],children:[(0,r.tZ)(_h,{selected:e.selected,boost:e.boost,color:e.color}),(0,r.tZ)(Sh,{selected:e.selected,enabled:e.alwaysOn}),(0,r.tZ)(Th,{selected:e.selected,mode:e.concurrency})]})]},"tier-".concat(t))}))}),(0,r.tZ)(p.xv,{color:"dimmer",css:[p.l0.textAlign.center,p.l0.pb(16)],children:"Only basic hosting is available during the beta program."}),(0,r.tZ)(p.G7,{css:{width:"100%",position:"sticky",bottom:0,paddingBottom:16,backgroundColor:p.TV.backgroundDefault,boxShadow:"0 -8px 16px 16px "+p.TV.backgroundDefault},children:(0,r.tZ)(p.zx,{colorway:"primary",onClick:t,text:"Continue",iconLeft:n?(0,r.tZ)(me.Z,{}):(0,r.tZ)(r.HY,{}),iconRight:(0,r.tZ)(ar.ArrowRight,{})})})]})};function Bh(e){return void 0!==e.id&&void 0!==e.currentBuild}!function(e){e.Welcome="welcome",e.TierSelection="tierSelection",e.BuildFailed="buildFailed"}(Zh||(Zh={}));var Eh=function(e){var t=e.replId,n=e.onDeployed,o=(0,a.Z)(i.useState({id:void 0,currentBuild:void 0,domains:[]}),2),l=o[0],s=o[1],c=(0,a.Z)(i.useState(null),2),u=c[0],d=c[1],f=(0,a.Z)(i.useState(null),2),h=f[0],m=f[1],v=(0,a.Z)(i.useState(!1),2),g=v[0],b=v[1],Z=(0,a.Z)(i.useState(Zh.Welcome),2),y=Z[0],x=Z[1],w=(0,a.Z)(Df(),1)[0],k=function(){var e=(0,je.Z)((function(){var e,n,r;return(0,Ne.__generator)(this,(function(i){switch(i.label){case 0:return[Zh.Welcome,Zh.BuildFailed].includes(y)?[2]:(b(!0),[4,w({variables:{input:{replId:t,description:""}}})]);case 1:if(!(null===(n=i.sent())||void 0===n?void 0:n.data)||n.errors)return m("An unexpected error occurred. Please try again or contact support."),[2];switch(null===(e=n.data.createHostingBuild)||void 0===e?void 0:e.__typename){case"UnauthorizedError":case"NotFoundError":m(n.data.createHostingBuild.message);break;case"HostingBuild":r=n.data.createHostingBuild,d({deployType:"initial",buildId:r.id}),s((function(e){return(0,tt.Z)((0,ae.Z)({},e),{currentBuild:r})}))}return b(!1),[2]}}))}));return function(){return e.apply(this,arguments)}}(),C=function(){var e=(0,je.Z)((function(e){return(0,Ne.__generator)(this,(function(t){switch(e.type){case"target_deployment_created":s((function(t){return(0,tt.Z)((0,ae.Z)({},t),{id:e.payload.targetDeploymentId})}));break;case"failed":s((function(e){return Bh(l)?(l.currentBuild.status=el.Fe.Failed,l):e})),x(Zh.BuildFailed);break;case"canceled":d(null),x(Zh.Welcome);break;case"deployed":n(e.payload)}return[2]}))}));return function(t){return e.apply(this,arguments)}}();if(u){var S=[Zh.BuildFailed].includes(y);return(0,r.BX)(p.G7,{css:[p.l0.colWithGap(12),p.l0.p(8)],children:[(0,r.tZ)(W.Z,{truncate:!0,level:4,children:"New deployment"}),(0,r.tZ)(uh,(0,tt.Z)((0,ae.Z)({replId:t},u),{onStageEvent:C})),S?(0,r.tZ)(p.zx,{onClick:function(){Bh(l)?n(l):m("An unexpected error occurred. Please try again or contact support.")},text:"Back",iconLeft:g?(0,r.tZ)(me.Z,{}):(0,r.tZ)(Bt.Z,{})}):null]})}return(0,r.BX)(p.G7,{css:[p.l0.p(8)],children:[y===Zh.Welcome?(0,r.BX)(p.G7,{css:[p.l0.align.center,p.l0.textAlign.center],children:[(0,r.tZ)(p.G7,{css:[p.l0.p(32)],children:(0,r.tZ)(ar.Deploy,{size:48})}),(0,r.tZ)(p.xv,{variant:"headerDefault",multiline:!0,css:[p.l0.mb(8)],children:"Share your Repl with the world"}),(0,r.tZ)(p.xv,{multiline:!0,css:[p.l0.mb(32)],children:"Allow people to use your app without being interrupted by changes in progress."}),(0,r.tZ)(p.G7,{css:[p.l0.px(8)],children:(0,r.tZ)(p.zx,{colorway:"primary",onClick:function(){return x(Zh.TierSelection)},text:"Create a deployment"})})]}):null,y===Zh.TierSelection?(0,r.tZ)(Rh,{loading:g,onContinue:k}):null,h?(0,r.tZ)(p.G7,{css:[p.l0.pb(8),p.l0.center,p.l0.align.stretch],children:(0,r.tZ)(p.E_,{colorway:"warning",icon:(0,r.tZ)(Pn.Z,{}),text:h})}):null]})};var Gh={Content:function(){var e=(0,ge.Z)(),t=function(e){var t=(0,ae.Z)({},Tf,e);return ce.a(Ef,t)}({variables:{replId:e}}),n=t.data,o=t.loading,l=t.error,s=(0,a.Z)(i.useState(null),2),c=s[0],u=s[1],d=(0,a.Z)(i.useState(null===l||void 0===l?void 0:l.message),2),f=d[0],h=d[1];return i.useEffect((function(){if(null===n||void 0===n?void 0:n.repl)if("Repl"===n.repl.__typename){if(n.repl.hostingDeployment&&!c)switch(n.repl.hostingDeployment.__typename){case"HostingDeployment":var e,t;u({id:n.repl.hostingDeployment.id,domains:null!==(t=null===(e=n.repl.domains)||void 0===e?void 0:e.filter((function(e){return"Domain"===(null===e||void 0===e?void 0:e.__typename)})))&&void 0!==t?t:[],currentBuild:n.repl.hostingDeployment.currentBuild});break;case"NotFoundError":case"UnauthorizedError":h(n.repl.hostingDeployment.message);break;default:h("Unexpected typename.")}}else h("Unexpected typename.")}),[null===n||void 0===n?void 0:n.repl,c]),o?(0,r.tZ)(p.G7,{css:[p.l0.center,p.l0.coverContainer],children:(0,r.tZ)(me.Z,{size:24})}):(0,r.tZ)(p.G7,{css:[p.l0.height("100%"),p.l0.overflowY("auto"),H.F3],children:(0,r.tZ)(p.G7,{css:[p.l0.p(8),p.l0.colWithGap(8),p.l0.flex.grow(1)],children:(0,r.BX)(p.G7,{css:[p.l0.flex.grow(1),p.l0.py(8),p.l0.position.relative],children:[f?(0,r.tZ)(p.E_,{colorway:"warning",icon:(0,r.tZ)(Pn.Z,{}),text:f}):null,c?(0,r.tZ)(yh,{replId:e,hostedDeployment:c,onDeployed:u}):(0,r.tZ)(Eh,{replId:e,onDeployed:u})]})})})},Icon:function(e){var t=e.size;return(0,r.tZ)(ar.Deploy,{size:t})},getTitle:function(){return"Deployments"}},Dh=n(19353),Ih=n(66670),jh=n(46241);function Nh(){var e=(0,le.Z)(["\n  query SshConfigurator($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        slug\n        user {\n          id\n          username\n        }\n      }\n    }\n  }\n"]);return Nh=function(){return e},e}var Lh={},zh=(0,se.Ps)(Nh());var Ph=["ssh-dsa","ssh-ecdsa","ssh-ed25519","ssh-rsa"];function Ah(e){return function(t){t.stopPropagation(),e(t)}}function Xh(e,t){if(!e)return"Please add a key for this secret";if(!e.trim())return"The key must include a non-space character";if(t.includes(e))return"You already have this key";var n=e.split(" ");return 3!==n.length?"This seems to be an invalid key.":Ph.includes(n[0])?null:"Key type is not valid."}function Uh(e){return(0,r.BX)(p.G7,{css:[p.l0.colWithGap(4)],children:[(0,r.tZ)("label",{htmlFor:e.id,children:(0,r.tZ)(p.xv,{variant:"small",color:"dimmer",children:e.label})}),e.children,e.error?(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(2),p.l0.align.center],children:[(0,r.tZ)(jh.Z,{}),(0,r.tZ)(p.xv,{variant:"small",css:p.l0.color.accentNegativeStrongest,children:e.error})]}):null]})}function Fh(e){var t=e.authorizedKey,n=e.otherKeys,o=e.onUpdateKey,l=e.onSave,s=(0,a.Z)(i.useState(),2),c=s[0],u=s[1],d=i.useRef(null),f=function(){var e=Xh(t.key,n);if(e)return u(e),void(d.current&&d.current.focus());l()};i.useEffect((function(){c&&(Xh(t.key,n)||u(null))}),[t.key,c,n]);var h=Ah((function(e){"Enter"===e.key&&(e.preventDefault(),f())})),m=(0,dn.H)()("key"),v="ssh-keygen -t ed25519 -f ~/.ssh/replit && cat ~/.ssh/replit.pub";return(0,r.BX)(p.Tg,{elevated:!0,css:[p.l0.p(16),p.l0.borderRadius(8),p.l0.colWithGap(16)],children:[(0,r.tZ)(Uh,{id:m,label:"Key (in OpenSSH Public Key format)",error:c,children:(0,r.tZ)(p.II,{id:m,ref:d,name:"key",value:t.key,spellCheck:!1,onChange:function(e){o(e.currentTarget.value)},onKeyDown:h})}),(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8)],children:[(0,r.tZ)(p.xv,{multiline:!0,children:"Need a hand? Generate a key:"}),(0,r.BX)(p.Tg,{tag:"pre",elevated:!0,css:[p.l0.borderRadius(8),p.l0.p(8),p.l0.rowWithGap(8),p.l0.justify.spaceBetween,p.l0.align.center],children:[(0,r.tZ)(p.xv,{css:[p.l0.overflow("auto"),p.l0.font.code,p.l0.flex.growAndShrink(1),{"::-webkit-scrollbar":[p.l0.display.none]}],maxLines:1,children:v}),(0,r.tZ)(p.hU,{onClick:function(){return(0,ve.Z)(v)},alt:"Copy",children:(0,r.tZ)(Ze.Z,{})})]}),(0,r.tZ)(p.xv,{multiline:!0,children:"Paste the result in the form above."})]}),(0,r.tZ)(p.G7,{css:[p.l0.rowWithGap(8),p.l0.justify.spaceBetween],children:(0,r.tZ)(p.G7,{css:p.l0.rowWithGap(8),children:(0,r.tZ)(p.zx,{colorway:"primary",onClick:Ah(f),text:"Add SSH Key"})})})]})}function Mh(e){var t=e.onAdd,n=e.otherKeys,o=(0,a.Z)(i.useState({key:""}),2),l=o[0],s=o[1];return(0,r.tZ)(Fh,{authorizedKey:l,otherKeys:n,onUpdateKey:function(e){s((function(t){return t?(0,tt.Z)((0,ae.Z)({},t),{key:e}):t}))},onSave:function(){s({key:""}),l.key&&t(l)}})}function Wh(e){var t=e.authorizedKey,n=e.onDelete;return(0,r.BX)(p.G7,{css:[p.gU.filled,p.l0.p(8),p.l0.rowWithGap(8),p.l0.align.center,p.l0.justify.spaceBetween,p.l0.borderRadius(8)],children:[(0,r.tZ)(Dh.Z,{size:24}),(0,r.BX)(p.xv,{css:[p.l0.flex.growAndShrink(1)],maxLines:1,children:[t.keytype," ",t.key.substring(0,8),"...",t.key.substring(t.key.length-8)," ",t.comment]}),(0,r.tZ)(p.hU,{onClick:function(){return n(t)},alt:"Delete",size:28,children:(0,r.tZ)(Ih.Z,{})})]})}function Oh(e){if(!e.length)return null;var t=e.split(" ");return t.length<3?null:{keytype:t[0],key:t[1],comment:t[2]}}function Hh(e){return Vh.apply(this,arguments)}function Vh(){return(Vh=(0,je.Z)((function(e){return(0,Ne.__generator)(this,(function(t){switch(t.label){case 0:return[4,e.createDir(".config")];case 1:return t.sent(),[4,e.createDir(".config/ssh")];case 2:return t.sent(),[2]}}))}))).apply(this,arguments)}function qh(e){var t,n,o,l=e.fs,s=(0,dr.Z)(),c=(0,a.Z)(i.useState(null),2),u=c[0],d=c[1],f=function(e){var t=(0,ae.Z)({},Lh,e);return ce.a(zh,t)}({variables:{replId:(0,ge.Z)()}}).data,h="Repl"===(null===f||void 0===f?void 0:f.repl.__typename)?f.repl:null;i.useEffect((function(){function e(){return(e=(0,je.Z)((function(){var e,t;return(0,Ne.__generator)(this,(function(n){switch(n.label){case 0:return[4,Hh(l)];case 1:return n.sent(),[4,l.readFile(".config/ssh/.authorized_keys")];case 2:if((e=n.sent()).error===k.Df.NotFound)return s.current&&d({}),[2];if(e.error)throw new Error("Error getting .authorized_keys");return s.current?(t={},e.content.toString().split("\n").forEach((function(e){if(!e.startsWith("#")){var n=Oh(e);null!==n&&(t[n.key]=n)}})),d(t),[2]):[2]}}))}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[l,d,s]);var m=function(){var e=(0,je.Z)((function(e){var t,n;return(0,Ne.__generator)(this,(function(r){switch(r.label){case 0:if(!u)throw new Error("trying to write authorized keys before loading");return t=function(e,t){var n=(0,ae.Z)({},e);if("add"===t.type){var r=Oh(t.key);r&&(n[r.key]=r)}else delete n[t.key];return n}(u,e),d(t),n="# generated file, use the SSH tool instead of editing\n"+Object.values(t).map((function(e){return"".concat((t=e).keytype," ").concat(t.key," ").concat(t.comment);var t})).join("\n"),[4,l.writeFile(".config/ssh/.authorized_keys",un.Z.from(n))];case 1:return r.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=(0,je.Z)((function(e){return(0,Ne.__generator)(this,(function(t){switch(t.label){case 0:return[4,m((0,ae.Z)({type:"add"},e))];case 1:return t.sent(),(0,Gt.j)(Gt.U3.SSH_CONFIGURATOR_USED,{action:"added"}),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=(0,je.Z)((function(e){return(0,Ne.__generator)(this,(function(t){switch(t.label){case 0:return[4,m({type:"delete",key:e.key})];case 1:return t.sent(),(0,Gt.j)(Gt.U3.SSH_CONFIGURATOR_USED,{action:"deleted"}),[2]}}))}));return function(t){return e.apply(this,arguments)}}();if(!u||!h)return(0,r.tZ)(p.G7,{css:[p.l0.center,p.l0.coverContainer],children:(0,r.tZ)(me.Z,{size:24})});var b="ssh -i ~/.ssh/replit ".concat(h.id,"@").concat(h.slug,".").concat(null===(t=h.user)||void 0===t?void 0:t.username,".repl.co"),Z="Host ".concat(h.slug,".").concat(null===(n=h.user)||void 0===n?void 0:n.username,".repl.co\n  User ").concat(h.id,"\n  IdentityFile ~/.ssh/replit"),y="ssh ".concat(h.slug,".").concat(null===(o=h.user)||void 0===o?void 0:o.username,".repl.co");return(0,r.BX)(p.G7,{css:p.l0.colWithGap(32),children:[(0,r.BX)(p.G7,{css:p.l0.colWithGap(16),children:[Object.values(u).map((function(e){return(0,r.tZ)(Wh,{authorizedKey:e,onDelete:g},e.key)})),(0,r.tZ)(Mh,{onAdd:v,otherKeys:Object.keys(u)})]}),(0,r.BX)(p.G7,{css:p.l0.colWithGap(16),children:[(0,r.tZ)(W.Z,{level:4,children:"How to SSH to your Repl"}),(0,r.tZ)(p.G7,{children:(0,r.tZ)(p.xv,{multiline:!0,children:0===Object.keys(u).length?"Before you can SSH to your Repl, you need to add an SSH key using the form above.":null})}),(0,r.tZ)(W.Z,{level:5,children:"SSH Command"}),(0,r.tZ)(p.xv,{multiline:!0,children:"After you create an SSH key using the instructions above, you can SSH to your Repl using this command:"}),(0,r.BX)(p.Tg,{tag:"pre",elevated:!0,css:[p.l0.borderRadius(8),p.l0.p(8),p.l0.rowWithGap(8)],children:[(0,r.tZ)(p.xv,{css:[p.l0.overflow("auto"),p.l0.font.code,p.l0.flex.growAndShrink(1),{"::-webkit-scrollbar":[p.l0.display.none]}],maxLines:1,children:b}),(0,r.tZ)(p.hU,{onClick:function(){return(0,ve.Z)(b)},alt:"Copy",children:(0,r.tZ)(Ze.Z,{})})]}),(0,r.tZ)(W.Z,{level:5,children:"SSH Configuration File"}),(0,r.BX)(p.xv,{multiline:!0,children:["You can add this snippet to your SSH configuration file (typically"," ",(0,r.tZ)(p.xv,{css:[p.l0.font.code,p.l0.display.inline,p.l0.align.baseline],multiline:!0,children:"~/.ssh/config"}),"):"]}),(0,r.BX)(p.Tg,{tag:"pre",elevated:!0,css:[p.l0.borderRadius(8),p.l0.p(8),p.l0.rowWithGap(8)],children:[(0,r.tZ)(p.xv,{css:[p.l0.overflow("auto"),p.l0.font.code,p.l0.flex.growAndShrink(1),{"::-webkit-scrollbar":[p.l0.display.none]}],multiline:!0,children:Z}),(0,r.tZ)(p.hU,{onClick:function(){return(0,ve.Z)(Z)},alt:"Copy",children:(0,r.tZ)(Ze.Z,{})})]}),(0,r.tZ)(p.xv,{multiline:!0,children:"Then, to connect to your Repl you can simply run:"}),(0,r.BX)(p.Tg,{tag:"pre",elevated:!0,css:[p.l0.borderRadius(8),p.l0.p(8),p.l0.rowWithGap(8)],children:[(0,r.tZ)(p.xv,{css:[p.l0.overflow("auto"),p.l0.font.code,p.l0.flex.growAndShrink(1),{"::-webkit-scrollbar":[p.l0.display.none]}],maxLines:1,children:y}),(0,r.tZ)(p.hU,{onClick:function(){return(0,ve.Z)(y)},alt:"Copy",children:(0,r.tZ)(Ze.Z,{})})]})]})]})}var $h=n(76311);function Yh(e){var t=e.children;return(0,r.tZ)(p.G7,{css:[p.l0.height("100%"),p.l0.overflowY("auto"),H.F3],children:(0,r.BX)(p.G7,{css:[p.l0.p(8),p.l0.colWithGap(8),p.l0.flex.grow(1)],children:[(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(8)],children:[(0,r.tZ)(W.Z,{truncate:!0,level:4,children:"SSH Configuration"}),(0,r.tZ)($h.Z,{link:"https://replit.com/@util/ssh-beta#README.md"})]}),(0,r.BX)(p.xv,{variant:"small",color:"dimmer",multiline:!0,children:["Add authorized keys to configure SSH access to this Repl."," ",(0,r.tZ)("a",{href:"https://replit.com/@util/ssh-beta#README.md",target:"_blank",children:"Learn more here"}),"."]}),(0,r.tZ)(p.G7,{css:[p.l0.flex.grow(1),p.l0.py(8),p.l0.position.relative],children:t})]})})}var Kh=n(68704),Jh={Content:function(){return(0,r.tZ)(Qh,{})},Icon:function(e){var t=e.size;return(0,r.tZ)(Kh.Z,{size:t})},getTitle:function(){return"SSH"}};function Qh(){var e=(0,v.Z)().fs;return(0,r.tZ)(Yh,{children:(0,r.tZ)(qh,{fs:e})})}var em=n(15606),tm=n(85873),nm=n(83502),rm=n(34856),im=(0,Ct.cn)([]),om=(0,Ct.cn)(Ot()());function am(e){return{user:e.attribution,message:e.text}}var lm=function(e){var t=e.currentUser,n=(0,a.Z)((0,Ct.KO)(im),2),o=n[0],l=n[1],s=(0,i.useState)(!1),c=s[0],u=s[1],d=(0,Rl.Z)().ref,f=(0,i.useState)(""),h=f[0],m=f[1],v=(0,nm.v)(),g=(0,ge.Z)(),b=(0,a.Z)((0,Ct.KO)(om),1)[0],Z=function(){var e=(0,je.Z)((function(e){var n,r,i,a;function s(){return c.apply(this,arguments)}function c(){return c=(0,je.Z)((function(){var e,t,r;return(0,Ne.__generator)(this,(function(o){switch(o.label){case 0:return[4,i.read()];case 1:return e=o.sent(),t=e.done,r=e.value,t?[2]:(a+=r,l((0,ie.Z)(n).concat([{text:a,author:{username:"Ghostwriter",image:"/public/images/ghostwriter/blurple-circle.svg"},attribution:"Assistant"}])),[2,s()])}}))})),c.apply(this,arguments)}return(0,Ne.__generator)(this,(function(c){switch(c.label){case 0:return e.preventDefault(),h?(u(!0),m(""),n=(0,ie.Z)(o).concat([{text:h,author:{username:t.username,image:t.image},attribution:"Human"}]),l((0,ie.Z)(n).concat([{temporary:!0,text:"Please wait while I think through your request\u2026",author:{username:"Ghostwriter",image:"/public/images/ghostwriter/blurple-circle.svg"},attribution:"Assistant"}])),[4,fetch("/ai/chat",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({chat_history:o.map(am),prompt:h,model:v,replId:g,chatId:b})})]):[2,null];case 1:if(200!==(r=c.sent()).status)throw new Error("Request failed");if(!r.body)throw new Error("Expected body on response object");return i=r.body.pipeThrough(new TextDecoderStream).getReader(),a="",[4,s()];case 2:return c.sent(),u(!1),[2]}}))}));return function(t){return e.apply(this,arguments)}}();return(0,r.BX)(p.Tg,{elevated:!0,css:[p.l0.flex.growAndShrink(0),p.l0.p(8),p.l0.colWithGap(12),{borderTop:"1px solid ".concat(p.TV.outlineDimmer)}],children:[(0,r.tZ)(rm.Z,{content:"Connected to Ghostwriter",status:rm.O.SUCCESS}),(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(8),p.l0.align.center],tag:"form",disabled:c,onSubmit:Z,children:[(0,r.tZ)(p.qE,{src:t.image,username:t.image,size:24}),(0,r.tZ)(p.G7,{css:[p.l0.flex.growAndShrink(1)],children:(0,r.tZ)(p.B,{readOnly:c,type:"text",placeholder:"Ask a question about code\u2026",ref:d,css:[p.l0.height(32),p.l0.align.start,{resize:"vertical",width:"100%",flexGrow:1}],onChange:function(e){return m(e.target.value)},value:h,onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),e.shiftKey?m((function(e){return e+"\n"})):Z(e))}})}),(0,r.tZ)(p.hU,{alt:"Send message",size:28,type:"submit",disabled:c,children:(0,r.tZ)(Yu.Z,{})})]})]})},sm=function(e){var t=e.title,n=e.children;return(0,r.BX)(p.Tg,{elevated:!0,css:[p.l0.p(12),p.l0.borderRadius(8),p.l0.colWithGap(8)],children:[(0,r.tZ)(p.xv,{variant:"subheadDefault",multiline:!0,children:t}),n]})},cm=function(){return(0,r.BX)(p.G7,{css:[p.l0.py(24),p.l0.px(8),p.l0.colWithGap(32),p.l0.width("100%"),p.l0.flex.grow(1)],children:[(0,r.BX)(p.G7,{css:[p.l0.colWithGap(16),p.l0.align.center],children:[(0,r.tZ)(p.G7,{css:[p.l0.maxWidth(200)],children:(0,r.tZ)(Yn.Z,{src:"/public/images/ghostwriter/orb.jpg",css:[{userSelect:"none",mixBlendMode:"screen",filter:"brightness(110%) saturate(1.2)",maskImage:"linear-gradient(".concat(p.TV.backgroundRoot,", transparent)")}],width:200,height:200,objectFit:"contain","aria-hidden":"true",alt:"",draggable:!1})}),(0,r.tZ)(p.xv,{variant:"subheadBig",children:"Chat with Ghostwriter"})]}),(0,r.tZ)(p.RX,{}),(0,r.BX)(p.G7,{css:[p.l0.colWithGap(16)],children:[(0,r.tZ)(p.xv,{variant:"subheadBig",children:"Tips and Tricks"}),(0,r.tZ)(sm,{title:"Make your questions detailed",children:(0,r.tZ)(p.xv,{variant:"text",multiline:!0,children:"Write prompts in fully-formed sentences, and include as much detail and context as you can."})}),(0,r.tZ)(sm,{title:"Ask follow-up questions",children:(0,r.tZ)(p.xv,{variant:"text",multiline:!0,children:"You can chat with Ghostwriter like a real pair programmer. Try asking follow-up questions by mentioning a previous message."})}),(0,r.tZ)(sm,{title:"Quickly insert generated code",children:(0,r.tZ)(p.xv,{variant:"text",multiline:!0,children:"When Ghostwriter responds with a code snippet, you can click a button to insert it directly into your code."})})]})]})};function um(){var e=(0,le.Z)(["\n  query GhostwriterChatCurrentUserQuery {\n    currentUser {\n      username\n      id\n      image\n    }\n  }\n"]);return um=function(){return e},e}var dm={},fm=(0,se.Ps)(um());var pm=function(){return(0,r.BX)(p.G7,{css:[p.l0.colWithGap(16),p.l0.align.center,p.l0.p(24),p.l0.height("100%"),p.l0.justify.center],children:[(0,r.tZ)(p.G7,{css:[p.l0.maxWidth(200)],children:(0,r.tZ)(Yn.Z,{src:"/public/images/ghostwriter/orb.jpg",css:[{userSelect:"none",mixBlendMode:"screen",filter:"brightness(110%) saturate(1.2)",maskImage:"linear-gradient(".concat(p.TV.backgroundRoot,", transparent)")}],width:200,height:200,objectFit:"contain","aria-hidden":"true",alt:"",draggable:!1})}),(0,r.tZ)(p.xv,{variant:"subheadBig",children:"Chat with Ghostwriter"}),(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(8),p.l0.align.center],children:[(0,r.tZ)(me.Z,{}),(0,r.tZ)(p.xv,{color:"dimmer",children:"Loading\u2026"})]})]})},hm=n(9903),mm=n(4914),vm=n(38572),gm=function(e){var t=e.author;return(0,r.tZ)(p.n5,{src:t.image,username:t.username})},bm=function(e){var t=(0,C.Z)(),n=(0,be.Z)(t);return e.inline||!n?(0,r.tZ)(hm.Z,(0,ae.Z)({},e)):(0,r.BX)(p.G7,{css:[p.l0.colWithGap(12)],children:[(0,r.tZ)(hm.Z,(0,ae.Z)({},e)),(0,r.tZ)(p.G7,{css:[p.l0.font.default,p.l0.align.start],children:(0,r.tZ)(p.zx,{text:"Insert code at cursor in ".concat(t),iconLeft:(0,r.tZ)(tl.Z,{}),colorway:"primary",onClick:function(){n({code:String(e.children).trimEnd()})}})})]})},Zm=function(e){var t=e.message,n=t.text,o=t.author,a=t.temporary,l=t.attribution,s=e.autoScroll,c=(0,i.useRef)(null);return(0,i.useLayoutEffect)((function(){s&&c.current&&(0,vm.Z)({element:c.current})})),(0,r.BX)(p.G7,{css:[p.l0.px(8),p.l0.py(12),p.l0.colWithGap(8),"Assistant"===l?{background:"linear-gradient(90.7deg, rgba(82, 57, 204, 0.1) 0.6%, rgba(166, 148, 255, 0.1) 137.79%)",borderWidth:"1px 0px",borderStyle:"solid",borderColor:"rgba(121, 94, 255, 0.5)"}:null],innerRef:c,children:[(0,r.tZ)(gm,{author:o}),(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(8),p.l0.align.center],children:[a?(0,r.tZ)(me.Z,{}):null,n?(0,r.tZ)(lc.ZP,{components:{code:bm},css:[mm.Z,{p:{color:a?p.TV.foregroundDimmer:p.TV.foregroundDefault}}],children:n}):null]})]})},ym=function(){var e=(0,Ct.Dv)(im),t=function(e){var t=(0,ae.Z)({},dm,e);return ce.a(fm,t)}(),n=t.data,i=t.loading,o=t.error;return i?(0,r.tZ)(pm,{}):o||!(null===n||void 0===n?void 0:n.currentUser)?(0,r.BX)(p.G7,{children:["error: ",o||"User not found, please log in or reload"]}):(0,r.BX)(p.Tg,{css:[p.l0.flex.column,p.l0.maxHeight("100%"),p.l0.flex.grow(1)],children:[e.length?(0,r.tZ)(p.G7,{css:[p.l0.colWithGap(16),p.l0.overflow("auto"),p.l0.flex.growAndShrink(1),p.l0.pt(12)],children:e.map((function(t,n){return(0,r.tZ)(Zm,{message:t,autoScroll:n===e.length-1},n)}))}):(0,r.tZ)(cm,{}),(0,r.tZ)(lm,{currentUser:n.currentUser})]})},xm={Content:function(){return(0,r.tZ)(ym,{})},Icon:function(e){var t=e.size;return(0,r.tZ)(tm.Z,{size:t})},getTitle:function(){return"Ghostwriter Chat"}};function wm(){return{filetree:j,codeEditor:L.D,webview:Lr.R,media:ni,pedit:Xa,vnc:Xr,unitTests:yl,autograder:Jl,education:ac,instructions:pc,preferences:Q,adminPanel:Kc,runnerOutput:U,shell:Vr,packager:ne,envEditor:$,commands:zr,draw:Jr,git:Ui,history:Ga,database:Ie,neon:lr,replAuth:Nr,markdown:E,kaboombar:vc,debugger:mu,tutorial:bu,config:wu,threadInbox:Cd,extension:mf,docs:vf,videoPlayer:Zf,chat:wf,deployments:Gh,sshConfigurator:Jh,multiplayer:em.T,ghostwriterChat:xm}}},43935:function(e,t,n){var r,i;n.d(t,{CZ:function(){return a},Pc:function(){return i}}),function(e){e.Duration="durations",e.Statuses="statuses"}(r||(r={})),function(e){e.Browser="browsers",e.Country="countries",e.Ip="ips",e.Referrer="referrers",e.Url="urls"}(i||(i={}));var o=new Map([[i.Browser,"Browsers"],[i.Country,"Countries"],[i.Ip,"IPs"],[i.Referrer,"Referrers"],[i.Url,"URLs"]]),a=function(e){var t=o.get(e);if(!t)throw new Error("No label found for metric: ".concat(e));return t}}}]);
//# sourceMappingURL=9173-522391fb05e162d2.js.map